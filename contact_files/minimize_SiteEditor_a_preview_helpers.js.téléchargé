/*! jQuery UI - v1.11.4 - 2021-01-10
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, resizable.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(w){var t,e,i,s;function n(t,e){var i,s,n=t.nodeName.toLowerCase();return"area"===n?(s=(i=t.parentNode).name,!(!t.href||!s||"map"!==i.nodeName.toLowerCase())&&(!!(s=w("img[usemap='#"+s+"']")[0])&&o(s))):(/^(input|select|textarea|button|object)$/.test(n)?!t.disabled:"a"===n&&t.href||e)&&o(t)}function o(t){return w.expr.filters.visible(t)&&!w(t).parents().addBack().filter(function(){return"hidden"===w.css(this,"visibility")}).length}w.ui=w.ui||{},w.extend(w.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),w.fn.extend({scrollParent:function(t){var e=this.css("position"),i="absolute"===e,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,t=this.parents().filter(function(){var t=w(this);return(!i||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==e&&t.length?t:w(this[0].ownerDocument||document)},uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&w(this).removeAttr("id")})}}),w.extend(w.expr[":"],{data:w.expr.createPseudo?w.expr.createPseudo(function(e){return function(t){return!!w.data(t,e)}}):function(t,e,i){return!!w.data(t,i[3])},focusable:function(t){return n(t,!isNaN(w.attr(t,"tabindex")))},tabbable:function(t){var e=w.attr(t,"tabindex"),i=isNaN(e);return(i||0<=e)&&n(t,!i)}}),w("<a>").outerWidth(1).jquery||w.each(["Width","Height"],function(t,i){var n="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),o={innerWidth:w.fn.innerWidth,innerHeight:w.fn.innerHeight,outerWidth:w.fn.outerWidth,outerHeight:w.fn.outerHeight};function h(t,e,i,s){return w.each(n,function(){e-=parseFloat(w.css(t,"padding"+this))||0,i&&(e-=parseFloat(w.css(t,"border"+this+"Width"))||0),s&&(e-=parseFloat(w.css(t,"margin"+this))||0)}),e}w.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){w(this).css(s,h(this,t)+"px")})},w.fn["outer"+i]=function(t,e){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){w(this).css(s,h(this,t,!0,e)+"px")})}}),w.fn.addBack||(w.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),w("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(w.fn.removeData=(e=w.fn.removeData,function(t){return arguments.length?e.call(this,w.camelCase(t)):e.call(this)})),w.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),w.fn.extend({focus:(s=w.fn.focus,function(e,i){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){w(t).focus(),i&&i.call(t)},e)}):s.apply(this,arguments)}),disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(i+".ui-disableSelection",function(t){t.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,i,s=w(this[0]);s.length&&s[0]!==document;){if(("absolute"===(e=s.css("position"))||"relative"===e||"fixed"===e)&&(i=parseInt(s.css("zIndex"),10),!isNaN(i)&&0!==i))return i;s=s.parent()}return 0}}),w.ui.plugin={add:function(t,e,i){var s,n=w.ui[t].prototype;for(s in i)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([e,i[s]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;n<o.length;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}};var h,a=0,r=Array.prototype.slice;w.cleanData=(h=w.cleanData,function(t){for(var e,i,s=0;null!=(i=t[s]);s++)try{(e=w._data(i,"events"))&&e.remove&&w(i).triggerHandler("remove")}catch(t){}h(t)}),w.widget=function(t,i,e){var s,n,o,h,a={},r=t.split(".")[0];return t=t.split(".")[1],s=r+"-"+t,e||(e=i,i=w.Widget),w.expr[":"][s.toLowerCase()]=function(t){return!!w.data(t,s)},w[r]=w[r]||{},n=w[r][t],o=w[r][t]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},w.extend(o,n,{version:e.version,_proto:w.extend({},e),_childConstructors:[]}),(h=new i).options=w.widget.extend({},h.options),w.each(e,function(e,s){function n(){return i.prototype[e].apply(this,arguments)}function o(t){return i.prototype[e].apply(this,t)}w.isFunction(s)?a[e]=function(){var t,e=this._super,i=this._superApply;return this._super=n,this._superApply=o,t=s.apply(this,arguments),this._super=e,this._superApply=i,t}:a[e]=s}),o.prototype=w.widget.extend(h,{widgetEventPrefix:n&&h.widgetEventPrefix||t},a,{constructor:o,namespace:r,widgetName:t,widgetFullName:s}),n?(w.each(n._childConstructors,function(t,e){var i=e.prototype;w.widget(i.namespace+"."+i.widgetName,o,e._proto)}),delete n._childConstructors):i._childConstructors.push(o),w.widget.bridge(t,o),o},w.widget.extend=function(t){for(var e,i,s=r.call(arguments,1),n=0,o=s.length;n<o;n++)for(e in s[n])i=s[n][e],s[n].hasOwnProperty(e)&&void 0!==i&&(w.isPlainObject(i)?t[e]=w.isPlainObject(t[e])?w.widget.extend({},t[e],i):w.widget.extend({},i):t[e]=i);return t},w.widget.bridge=function(o,e){var h=e.prototype.widgetFullName||o;w.fn[o]=function(i){var t="string"==typeof i,s=r.call(arguments,1),n=this;return t?this.each(function(){var t,e=w.data(this,h);return"instance"===i?(n=e,!1):e?w.isFunction(e[i])&&"_"!==i.charAt(0)?(t=e[i].apply(e,s))!==e&&void 0!==t?(n=t&&t.jquery?n.pushStack(t.get()):t,!1):void 0:w.error("no such method '"+i+"' for "+o+" widget instance"):w.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+i+"'")}):(s.length&&(i=w.widget.extend.apply(null,[i].concat(s))),this.each(function(){var t=w.data(this,h);t?(t.option(i||{}),t._init&&t._init()):w.data(this,h,new e(i,this))})),n}},w.Widget=function(){},w.Widget._childConstructors=[],w.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=w(e||this.defaultElement||this)[0],this.element=w(e),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=w(),this.hoverable=w(),this.focusable=w(),e!==this&&(w.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=w(e.style?e.ownerDocument:e.document||e),this.window=w(this.document[0].defaultView||this.document[0].parentWindow)),this.options=w.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:w.noop,_getCreateEventData:w.noop,_create:w.noop,_init:w.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(w.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:w.noop,widget:function(){return this.element},option:function(t,e){var i,s,n,o=t;if(0===arguments.length)return w.widget.extend({},this.options);if("string"==typeof t)if(o={},t=(i=t.split(".")).shift(),i.length){for(s=o[t]=w.widget.extend({},this.options[t]),n=0;n<i.length-1;n++)s[i[n]]=s[i[n]]||{},s=s[i[n]];if(t=i.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=e}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(n,o,t){var h,a=this;"boolean"!=typeof n&&(t=o,o=n,n=!1),t?(o=h=w(o),this.bindings=this.bindings.add(o)):(t=o,o=this.element,h=this.widget()),w.each(t,function(t,e){function i(){if(n||!0!==a.options.disabled&&!w(this).hasClass("ui-state-disabled"))return("string"==typeof e?a[e]:e).apply(a,arguments)}"string"!=typeof e&&(i.guid=e.guid=e.guid||i.guid||w.guid++);var s=t.match(/^([\w:-]*)\s*(.*)$/),t=s[1]+a.eventNamespace,s=s[2];s?h.delegate(s,t,i):o.bind(t,i)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e),this.bindings=w(this.bindings.not(t).get()),this.focusable=w(this.focusable.not(t).get()),this.hoverable=w(this.hoverable.not(t).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){w(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){w(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){w(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){w(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,i){var s,n,o=this.options[t];if(i=i||{},(e=w.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],n=e.originalEvent)for(s in n)s in e||(e[s]=n[s]);return this.element.trigger(e,i),!(w.isFunction(o)&&!1===o.apply(this.element[0],[e].concat(i))||e.isDefaultPrevented())}},w.each({show:"fadeIn",hide:"fadeOut"},function(o,h){w.Widget.prototype["_"+o]=function(e,t,i){"string"==typeof t&&(t={effect:t});var s,n=t?!0!==t&&"number"!=typeof t&&t.effect||h:o;"number"==typeof(t=t||{})&&(t={duration:t}),s=!w.isEmptyObject(t),t.complete=i,t.delay&&e.delay(t.delay),s&&w.effects&&w.effects.effect[n]?e[o](t):n!==o&&e[n]?e[n](t.duration,t.easing,i):e.queue(function(t){w(this)[o](),i&&i.call(e[0]),t()})}});w.widget;var l=!1;w(document).mouseup(function(){l=!1});w.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===w.data(t.target,e.widgetName+".preventClickEvent"))return w.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!l){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,i=1===t.which,s=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&w(t.target).closest(this.options.cancel).length;return i&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===w.data(t.target,this.widgetName+".preventClickEvent")&&w.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),l=!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(w.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&w.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),l=!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});w.widget("ui.resizable",w.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(t,e){if("hidden"===w(t).css("overflow"))return!1;var i=e&&"left"===e?"scrollLeft":"scrollTop",e=!1;return 0<t[i]||(t[i]=1,e=0<t[i],t[i]=0,e)},_create:function(){var t,e,i,s,n=this,o=this.options;if(this.element.addClass("ui-resizable"),w.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(w("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(w(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=w(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},e=0;e<t.length;e++)i=w.trim(t[e]),(s=w("<div class='ui-resizable-handle "+("ui-resizable-"+i)+"'></div>")).css({zIndex:o.zIndex}),"se"===i&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(s);this._renderAxis=function(t){var e,i,s;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=w(this.handles[e]),this._on(this.handles[e],{mousedown:n._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=w(this.handles[e],this.element),s=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){n.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),n.axis=s&&s[1]?s[1]:"se")}),o.autoHide&&(this._handles.hide(),w(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(w(this).removeClass("ui-resizable-autohide"),n._handles.show())}).mouseleave(function(){o.disabled||n.resizing||(w(this).addClass("ui-resizable-autohide"),n._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();function t(t){w(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()}var e;return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var e,i,s=!1;for(e in this.handles)(i=w(this.handles[e])[0])!==t.target&&!w.contains(i,t.target)||(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var e,i,s=this.options,n=this.element;return this.resizing=!0,this._renderProxy(),e=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(e+=w(s.containment).scrollLeft()||0,i+=w(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalPosition={left:e,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=w(".ui-resizable-"+this.axis).css("cursor"),w("body").css("cursor","auto"===s?this.axis+"-resize":s),n.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e=this.originalMousePosition,i=this.axis,s=t.pageX-e.left||0,e=t.pageY-e.top||0,i=this._change[i];return this._updatePrevProperties(),i&&(e=i.apply(this,[t,s,e]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),e=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),w.isEmptyObject(e)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges())),!1},_mouseStop:function(t){this.resizing=!1;var e,i,s,n=this.options,o=this;return this._helper&&(s=(e=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:o.sizeDiff.height,i=e?0:o.sizeDiff.width,e={width:o.helper.width()-i,height:o.helper.height()-s},i=parseInt(o.element.css("left"),10)+(o.position.left-o.originalPosition.left)||null,s=parseInt(o.element.css("top"),10)+(o.position.top-o.originalPosition.top)||null,n.animate||this.element.css(w.extend(e,{top:s,left:i})),o.helper.height(o.size.height),o.helper.width(o.size.width),this._helper&&!n.animate&&this._proportionallyResize()),w("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s=this.options,n={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0};(this._aspectRatio||t)&&(e=n.minHeight*this.aspectRatio,i=n.minWidth/this.aspectRatio,s=n.maxHeight*this.aspectRatio,t=n.maxWidth/this.aspectRatio,e>n.minWidth&&(n.minWidth=e),i>n.minHeight&&(n.minHeight=i),s<n.maxWidth&&(n.maxWidth=s),t<n.maxHeight&&(n.maxHeight=t)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,h=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,l=/sw|nw|w/.test(i),i=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),h&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&l&&(t.left=a-e.minWidth),s&&l&&(t.left=a-e.maxWidth),h&&i&&(t.top=r-e.minHeight),n&&i&&(t.top=r-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseInt(s[e],10)||0,i[e]+=parseInt(n[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||w("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return w.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return w.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return w.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return w.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){w.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),w.ui.plugin.add("resizable","animate",{stop:function(e){var i=w(this).resizable("instance"),t=i.options,s=i._proportionallyResizeElements,n=s.length&&/textarea/i.test(s[0].nodeName),o=n&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,h=n?0:i.sizeDiff.width,n={width:i.size.width-h,height:i.size.height-o},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(w.extend(n,o&&h?{top:o,left:h}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&w(s[0]).css({width:t.width,height:t.height}),i._updateCache(t),i._propagate("resize",e)}})}}),w.ui.plugin.add("resizable","containment",{start:function(){var i,s,n=w(this).resizable("instance"),t=n.options,e=n.element,o=t.containment,h=o instanceof w?o.get(0):/parent/.test(o)?e.parent().get(0):o;h&&(n.containerElement=w(h),/document/.test(o)||o===document?(n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:w(document),left:0,top:0,width:w(document).width(),height:w(document).height()||document.body.parentNode.scrollHeight}):(i=w(h),s=[],w(["Top","Right","Left","Bottom"]).each(function(t,e){s[t]=n._num(i.css("padding"+e))}),n.containerOffset=i.offset(),n.containerPosition=i.position(),n.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},t=n.containerOffset,e=n.containerSize.height,o=n.containerSize.width,o=n._hasScroll(h,"left")?h.scrollWidth:o,e=n._hasScroll(h)?h.scrollHeight:e,n.parentData={element:h,left:t.left,top:t.top,width:o,height:e}))},resize:function(t){var e=w(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.position,o=e._aspectRatio||t.shiftKey,h={top:0,left:0},a=e.containerElement,t=!0;a[0]!==document&&/static/.test(a.css("position"))&&(h=s),n.left<(e._helper?s.left:0)&&(e.size.width=e.size.width+(e._helper?e.position.left-s.left:e.position.left-h.left),o&&(e.size.height=e.size.width/e.aspectRatio,t=!1),e.position.left=i.helper?s.left:0),n.top<(e._helper?s.top:0)&&(e.size.height=e.size.height+(e._helper?e.position.top-s.top:e.position.top),o&&(e.size.width=e.size.height*e.aspectRatio,t=!1),e.position.top=e._helper?s.top:0),i=e.containerElement.get(0)===e.element.parent().get(0),n=/relative|absolute/.test(e.containerElement.css("position")),i&&n?(e.offset.left=e.parentData.left+e.position.left,e.offset.top=e.parentData.top+e.position.top):(e.offset.left=e.element.offset().left,e.offset.top=e.element.offset().top),n=Math.abs(e.sizeDiff.width+(e._helper?e.offset.left-h.left:e.offset.left-s.left)),s=Math.abs(e.sizeDiff.height+(e._helper?e.offset.top-h.top:e.offset.top-s.top)),n+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-n,o&&(e.size.height=e.size.width/e.aspectRatio,t=!1)),s+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-s,o&&(e.size.width=e.size.height*e.aspectRatio,t=!1)),t||(e.position.left=e.prevPosition.left,e.position.top=e.prevPosition.top,e.size.width=e.prevSize.width,e.size.height=e.prevSize.height)},stop:function(){var t=w(this).resizable("instance"),e=t.options,i=t.containerOffset,s=t.containerPosition,n=t.containerElement,o=w(t.helper),h=o.offset(),a=o.outerWidth()-t.sizeDiff.width,o=o.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(n.css("position"))&&w(this).css({left:h.left-s.left-i.left,width:a,height:o}),t._helper&&!e.animate&&/static/.test(n.css("position"))&&w(this).css({left:h.left-s.left-i.left,width:a,height:o})}}),w.ui.plugin.add("resizable","alsoResize",{start:function(){var t=w(this).resizable("instance").options;w(t.alsoResize).each(function(){var t=w(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var e=w(this).resizable("instance"),s=e.options,n=e.originalSize,o=e.originalPosition,h={height:e.size.height-n.height||0,width:e.size.width-n.width||0,top:e.position.top-o.top||0,left:e.position.left-o.left||0};w(s.alsoResize).each(function(){var t=w(this),s=w(this).data("ui-resizable-alsoresize"),n={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];w.each(e,function(t,e){var i=(s[e]||0)+(h[e]||0);i&&0<=i&&(n[e]=i||null)}),t.css(n)})},stop:function(){w(this).removeData("resizable-alsoresize")}}),w.ui.plugin.add("resizable","ghost",{start:function(){var t=w(this).resizable("instance"),e=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=w(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=w(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),w.ui.plugin.add("resizable","grid",{resize:function(){var t,e=w(this).resizable("instance"),i=e.options,s=e.size,n=e.originalSize,o=e.originalPosition,h=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,r=a[0]||1,l=a[1]||1,u=Math.round((s.width-n.width)/r)*r,d=Math.round((s.height-n.height)/l)*l,p=n.width+u,c=n.height+d,g=i.maxWidth&&i.maxWidth<p,f=i.maxHeight&&i.maxHeight<c,m=i.minWidth&&i.minWidth>p,s=i.minHeight&&i.minHeight>c;i.grid=a,m&&(p+=r),s&&(c+=l),g&&(p-=r),f&&(c-=l),/^(se|s|e)$/.test(h)?(e.size.width=p,e.size.height=c):/^(ne)$/.test(h)?(e.size.width=p,e.size.height=c,e.position.top=o.top-d):/^(sw)$/.test(h)?(e.size.width=p,e.size.height=c,e.position.left=o.left-u):((c-l<=0||p-r<=0)&&(t=e._getPaddingPlusBorderDimensions(this)),0<c-l?(e.size.height=c,e.position.top=o.top-d):(c=l-t.height,e.size.height=c,e.position.top=o.top+n.height-c),0<p-r?(e.size.width=p,e.position.left=o.left-u):(p=r-t.width,e.size.width=p,e.position.left=o.left+n.width-p))}});w.ui.resizable});/*!
 * Bootstrap Confirmation
 * Copyright 2013 Nimit Suwannagate <ethaizone@hotmail.com>
 * Copyright 2014-2016 Damien "Mistic" Sorel <http://www.strangeplanet.fr>
 * Licensed under the Apache License, Version 2.0 (the "License")
 */

(function ($) {
  'use strict';

  // Confirmation extends popover.js
  if (!$.fn.popover) throw new Error('Confirmation requires popover.js');

  // CONFIRMATION PUBLIC CLASS DEFINITION
  // ===============================
  var Confirmation = function (element, options) {
    options.trigger = 'click';

    this.init('confirmation', element, options);

    // keep trace of selectors
    this.options._isDelegate = false;
    if (options.selector) { // container of buttons
      this.options._selector = this._options._selector = options._root_selector +' '+ options.selector;
    }
    else if (options._selector) { // children of container
      this.options._selector = options._selector;
      this.options._isDelegate = true;
    }
    else { // standalone
      this.options._selector = options._root_selector;
    }

    var that = this;

    if (!this.options.selector) {
      // store copied attributes
      this.options._attributes = {};
      if (this.options.copyAttributes) {
        if (typeof this.options.copyAttributes === 'string') {
          this.options.copyAttributes = this.options.copyAttributes.split(' ');
        }
      }
      else {
        this.options.copyAttributes = [];
      }

      this.options.copyAttributes.forEach(function(attr) {
        this.options._attributes[attr] = this.$element.attr(attr);
      }, this);

      // cancel original event
      this.$element.on(that.options.trigger, function(e, ack) {
        if (!ack) {
          e.preventDefault();
          e.stopPropagation();
          e.stopImmediatePropagation();
        }
      });

      // manage singleton
      this.$element.on('show.bs.confirmation', function(e) {

		//Add backdrop
		$('<div class="backdropManaul"></div>').appendTo('body');
		$('.backdropManaul').click(function() {
			$(this).remove();
		});
	
        if (that.options.singleton) {
          // close all other popover already initialized
          $(that.options._selector).not($(this)).filter(function() {
            return $(this).data('bs.confirmation') !== undefined;
          }).confirmation('hide');
        }
      });
    }

    if (!this.options._isDelegate) {
      // manage popout
      this.eventBody = false;
      this.uid = this.$element[0].id || this.getUID('group_');

      this.$element.on('shown.bs.confirmation', function(e) {
        if (that.options.popout && !that.eventBody) {
          var $this = $(this);
          that.eventBody = $('body').on('click.bs.confirmation.'+that.uid, function(e) {
            if ($(that.options._selector).is(e.target)) {
              return;
            }

            // close all popover already initialized
            $(that.options._selector).filter(function() {
              return $(this).data('bs.confirmation') !== undefined;
            }).confirmation('hide');

			$('.backdropManaul').remove();

            $('body').off('click.bs.'+that.uid);
            that.eventBody = false;
          });
        }
      });
    }
  };

  Confirmation.DEFAULTS = $.extend({}, $.fn.popover.Constructor.DEFAULTS, {
    placement: 'top',
    title: 'Are you sure?',
    html: true,
    popout: false,
    singleton: false,
    copyAttributes: 'href target',
    onConfirm: $.noop,
    onCancel: $.noop,
    btnOkClass: 'btn-xs btn-primary',
    btnOkIcon: 'glyphicon glyphicon-ok',
    btnOkLabel: 'Yes',
    btnCancelClass: 'btn-xs btn-default',
    btnCancelIcon: 'glyphicon glyphicon-remove',
    btnCancelLabel: 'No',
    template:
      '<div class="popover confirmation">' +
        '<div class="arrow"></div>' +
        '<h3 class="popover-title"></h3>' +
        '<div class="popover-content text-center">'+
          '<div class="btn-group">'+
            '<a class="btn" data-apply="confirmation"></a>'+
            '<a class="btn" data-dismiss="confirmation"></a>'+
          '</div>'+
        '</div>'+
      '</div>'
  });

  Confirmation.prototype = $.extend({}, $.fn.popover.Constructor.prototype);

  Confirmation.prototype.constructor = Confirmation;

  Confirmation.prototype.getDefaults = function () {
    return Confirmation.DEFAULTS;
  };

  Confirmation.prototype.setContent = function () {
    var that = this,
        $tip = this.tip(),
        o = this.options;

    $tip.find('.popover-title')[o.html ? 'html' : 'text'](this.getTitle());

    // configure 'ok' button
    $tip.find('[data-apply="confirmation"]')
      .addClass(o.btnOkClass)
      .html(o.btnOkLabel)
      .attr(this.options._attributes)
      .prepend($('<i></i>').addClass(o.btnOkIcon), ' ')
      .off('click')
      .one('click', function(e) {
        that.getOnConfirm.call(that).call(that.$element);
        that.$element.trigger('confirmed.bs.confirmation');
        that.$element.trigger(that.options.trigger, [true]);
        that.$element.confirmation('hide');
      });

    // configure 'cancel' button
    $tip.find('[data-dismiss="confirmation"]')
      .addClass(o.btnCancelClass)
      .html(o.btnCancelLabel)
      .prepend($('<i></i>').addClass(o.btnCancelIcon), ' ')
      .off('click')
      .one('click', function(e) {
        that.getOnCancel.call(that).call(that.$element);
        if (that.inState) that.inState.click = false; // Bootstrap 3.3.5
        that.$element.trigger('canceled.bs.confirmation');
        that.$element.confirmation('hide');
      });

    $tip.removeClass('fade top bottom left right in');

    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do
    // this manually by checking the contents.
    if (!$tip.find('.popover-title').html()) {
      $tip.find('.popover-title').hide();
    }
  };

  Confirmation.prototype.getOnConfirm = function() {
  	$('.backdropManaul').remove();

    if (this.$element.attr('data-on-confirm')) {
      return getFunctionFromString(this.$element.attr('data-on-confirm'));
    }
    else {
      return this.options.onConfirm;
    }
  };

  Confirmation.prototype.getOnCancel = function() {
  	$('.backdropManaul').remove();

    if (this.$element.attr('data-on-cancel')) {
      return getFunctionFromString(this.$element.attr('data-on-cancel'));
    }
    else {
      return this.options.onCancel;
    }
  };

  /*
   * Generates an anonymous function from a function name
   * function name may contain dots (.) to navigate through objects
   * root context is window
   */
  function getFunctionFromString(functionName) {
    var context = window,
        namespaces = functionName.split('.'),
        func = namespaces.pop();

    for (var i=0, l=namespaces.length; i<l; i++) {
      context = context[namespaces[i]];
    }

    return function() {
      context[func].call(this);
    };
  }


  // CONFIRMATION PLUGIN DEFINITION
  // =========================

  var old = $.fn.confirmation;

  $.fn.confirmation = function (option) {
    var options = (typeof option == 'object' && option) || {};
    options._root_selector = this.selector;

    return this.each(function () {
      var $this = $(this),
          data  = $this.data('bs.confirmation');

      if (!data && option == 'destroy') {
        return;
      }
      if (!data) {
        $this.data('bs.confirmation', (data = new Confirmation(this, options)));
      }
      if (typeof option == 'string') {
        data[option]();
        
        if (option == 'hide' && data.inState) { //data.inState doesn't exist in Bootstrap < 3.3.5
          data.inState.click = false;
        }
      }
    });
  };

  $.fn.confirmation.Constructor = Confirmation;


  // CONFIRMATION NO CONFLICT
  // ===================

  $.fn.confirmation.noConflict = function () {
    $.fn.confirmation = old;
    return this;
  };

}(jQuery));// Run when the page ready (before images and other resource)
jQuery(function($) {OpenModuleManagment();});function OpenModuleManagment() {$( document ).on( 's123.page.ready.wizard_preview_manage_helpers', function( event ) {if ( !IsWizard() ) return;var modulesLimitedToOne = [112,123];(function () {(function () {var floating_button_header_selector = $('#mainNav').is('ul') ? '#header .header-container' : '#mainNav';if ( $('#layoutNUM').val() == '21' ) {var buttons = [{text: translations.editHeader,click: function( event ) {expandWizardHomepage('designTab','#collapseHeaderOptions');}},{text: translations.editLogo,click: function( event ) {expandWizardHomepage('settingsTab','#homepageCollapse1');}},{text: translations.editStructure,click: function( event ) {expandWizardHomepage('designTab','#moreDesignOptions2');}}];} else {var buttons = [{text: translations.editHeader,click: function( event ) {expandWizardHomepage('designTab','#collapseHeaderOptions');}},{text: translations.editStructure,click: function( event ) {expandWizardHomepage('designTab','#moreDesignOptions2');}}];}
addFloatingMenu({type: 'menuButtons',$element: $(floating_button_header_selector),buttons: buttons});addFloatingMenu({type: 'footerButtons',$element: $('.global_footer'),buttons: [{text: translations.editFooter,click: function( event ) {expandWizardHomepage('designTab','#collapseFooterLayout');}}]});})();})();(function () {if ( $('#layoutNUM').val() == '21' ) return;var floating_button_header_selector = $('#mainNav').is('ul') ? '#header .header-column-logo' : '#mainNav .navbar-header';addFloatingMenu({type: 'websiteLogo',$element: $(floating_button_header_selector),buttons: [{text: translations.editLogo,click: function( event ) {expandWizardHomepage('settingsTab','#homepageCollapse1');}}]});$('#mainNav .logo_name')
.add('#mainNav .s123-site-logo')
.add('#header .header-logo .s123-site-logo')
.add('#header .logo_name')
.each(function() {OutlineHandler.register($(this));});})();(function () {addFloatingMenu({type: 'websiteLogo',$element: $('#mainNavMobile .navbar-header'),buttons: [{text: translations.editLogo,click: function( event ) {expandWizardHomepage('settingsTab','#homepageCollapse1');}}]});OutlineHandler.register($('#mainNavMobile .logo_name, #mainNavMobile .s123-site-logo'));})();(function () {$('.header-phone-wrapper')
.add('.header-address-wrapper')
.add('.header-social-wrapper')
.add('.header-email-wrapper')
.each(function() {var $this = $(this);OutlineHandler.register($this);$this.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {expandWizardHomepage('designTab','#collapseHeaderOptions');});});})();(function() {$('.s123-module').each(function() {var $section = $(this);if ( $section.hasClass('s123-page-data') ) return;if ( $section.hasClass('s123-module-rich-page') ) return;var $title = $section.find('.s123-page-header');var $slogan = $section.find('.s123-page-slogan');if ( multiLanCode != '' ) {$title.attr('data-original-title','');$title.tooltip({title: translations.s123Editible.featureDisabledTooltip,container: 'body',placement: 'auto'});$slogan.attr('data-original-title','');$slogan.tooltip({title: translations.s123Editible.featureDisabledTooltip,container: 'body',placement: 'auto'});return;}
var moduleID = $section.data('module-id');var moduleTypeNUM = $section.data('module-type-num');var $page = topWindow.Wizard.Pages.getPage(moduleID);if ( $section.find('.page_header_style_14, .page_header_style_9, .page_header_style_10, .page_header_style_13').length > 0 ) {$title = $title.find('span');$title.css({display: 'block'});}
$title.each(function() {var $this = $(this);if ( $section.data('module-id') == '112' ) {var editableTitle = new S123EditableElement({$el: $this,disableNewLine: true,maxlength: parseInt($page.find('input.module_name').attr('maxlength')),eventCallback: function( eventType ) {if ( eventType == 'focus' ) {$this.data('name',$this.text());} else if ( eventType == 'blur' ) {if ( $this.text().length == 0 ) {$this.text($this.data('name'));}}
if ( eventType == 'input' ) {clearTimeout($this.inputFinished);$this.inputFinished = setTimeout( function() {topWindow.Wizard.Save.inProgress();$.ajax({type: "POST",url: "/versions/"+$(versionNUM).val()+"/wizard/modules/eCommerce/tabs/homepage/updateSectionTitleAjax.php",data: {w: $(websiteID).val(),moduleTypeNUM: $section.data('module-type-num'),uniqueID: $this.get(0).id.replace(/(section-112-)(.*?)(-title)/,'$2'),title: $this.text()},success: function( data ) {data = tryParseJSON(data);if ( data.success ) {topWindow.Wizard.Save.success();} else {topWindow.Wizard.Save.error();}},error: function() {topWindow.Wizard.Save.error();}});},800);}}});} else {var editableTitle = new S123EditableElement({$el: $this,disableNewLine: true,maxlength: parseInt($page.find('input.module_name').attr('maxlength')),eventCallback: function( eventType ) {if ( eventType == 'blur' ) {if ( $this.text().trim().length == 0 ) {$this.text($this.data('name'));}
if ( $this.data('name') != $this.text() ) {clearTimeout($this.inputFinished);saveModuleName();}} else if ( eventType == 'focus' ) {$this.data('name',$this.text());} else if ( eventType == 'input' ) {if ( $this.data('name') != $this.text() ) {if ( $page.data('sync-titles') ) {$page.find('input.module_name').val($this.text());topWindow.updateModuleNameInBreadCrumbs(moduleID);topWindow.updateModuleNameInMenu(moduleID);}
clearTimeout($this.inputFinished);$this.inputFinished = setTimeout( function() {saveModuleName();},800);}}
function saveModuleName() {var isNewTitleFlow = true;var isSyncTitles = true;var settings = topWindow.GetModuleSetting(moduleID,'settings');settings = tryParseJSON(settings);if ( !settings ) {settings = {};}
if ( !settings.pageHeaderSettings ) {settings.pageHeaderSettings = new PageHeaderSettings();isNewTitleFlow = false;}
if ( isNewTitleFlow ) {isSyncTitles = settings.pageHeaderSettings.pageTitle == $page.find('input.module_name').val();$page.data('sync-titles',isSyncTitles);}
if ( isSyncTitles ) {$page.find('input.module_name').val($this.text()).trigger('input',true);} else {settings.pageHeaderSettings.pageTitle = $this.text();topWindow.EditModuleSetting(moduleID,'settings',JSON.stringify(settings));topWindow.BuildToolJSON();topWindow.AutoSaveWizard(false,true);}
$this.data('name',$this.text());}}});}
OutlineHandler.register($this);var s123FloatingBar = new S123FloatingBar({$el: $this,template: '<div class="previewManageButton" data-header-style="'+topWindow.$('#page_header_style').val()+'"><a href="#" class="p-m-b-design module-header-style">' + S123.escapeHtml(translations.S123FloatingBar.moduleTitleStyle) + '</a><a href="#" class="add-slogan dummy hidden"></a></div>',placement: 'bottom',type: 'moduleTitle',showCallback: function( instance ) {instance.$html.find('.module-header-style').tooltip({title: translations.S123FloatingBar.moduleTitleStyleTolltip,container: 'body',placement: 'auto',delay: {show: 2000,hide: 0}});instance.$html.find('.module-header-style').on('click', function( event ) {event.preventDefault();var $moduleHeaderStyles = topWindow.Wizard.tabEffectHandler.designTabHandler.$tabContent.find('#moduleHeaderStyles');var $moduleHeaderCustom = topWindow.Wizard.tabEffectHandler.designTabHandler.$tabContent.find('#moduleHeaderCustom');expandWizardHomepage('designTab','#websiteBackground');topWindow.Wizard.tabEffectHandler.AnimationManager.designTab.show(topWindow.$('#showAdvancedStructure'));topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.showTab('moduleHeaderStyles');topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.children().hide();topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.find('[data-tab-related="moduleHeaderStyles"]').show();$moduleHeaderCustom.addClass('static');$moduleHeaderStyles.attr('data-section-id',$section.data('module-id'));if ( IsRichPage() ) {var $wizardPage = topWindow.Wizard.Pages.getPage($section.data('module-id'));$moduleHeaderCustom.attr('data-module-id',topWindow.RichPage.getParent($wizardPage).data('moduleid'));$moduleHeaderCustom.attr('data-module-type-num',topWindow.RichPage.getParent($wizardPage).data('moduletypenum'));} else {$moduleHeaderCustom.attr('data-module-id',$section.data('module-id'));$moduleHeaderCustom.attr('data-module-type-num',$section.data('module-type-num'));}
topWindow.$(topWindow.document).one('animation_manager.hide', function() {$moduleHeaderCustom.removeClass('static');topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.showTab('showWebsiteStructuresTab');topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.children().show();topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.find('[data-tab-related="moduleHeaderStyles"]').hide();});});if ( $section.data('module-id') != '112' ) {if ( $slogan.text().length == 0 ) {var $addSlogan = $('<a href="#" class="p-m-b-design add-slogan">' + S123.escapeHtml(translations.S123FloatingBar.addSlogan) + '</a>');$addSlogan.tooltip({title: translations.S123FloatingBar.addSloganTolltip,container: 'body',placement: 'auto',delay: {show: 2000,hide: 0}});instance.$html.find('.add-slogan.dummy').replaceWith($addSlogan);instance.$html.find('.add-slogan').on('click', function( event ) {event.preventDefault();$slogan.html(S123.escapeHtml(translations.S123FloatingBar.newSlogan));convertSloganToEditable($slogan,moduleTypeNUM,moduleID);placeCaretAtEnd($slogan.get(0));$addSlogan.remove();s123FloatingBar.setPosition();topWindow.savePageSlogan(moduleTypeNUM,moduleID,decodeEntities($slogan.html()),false);});}
(function() {if ( IsRichPage() ) return;instance.$html.find('.previewManageButton').append('<a class="p-m-b-design icon-only-tooltip module-custom-settings" data-action="moduleCustomSettings" title="' + S123.escapeHtml(translations.S123FloatingBar.customModuleTitles) + '"><span>' + S123.s123IconToSvg.getHtml('cog','','') + '</span></a>');var content = '';content += '<div class="p-h-settings">';content += '<form>';content += '<div class="form-group">';content += '<div class="module-menu-title">';content += '<label for="title">' + S123.escapeHtml(translations.pageHeaderSettings.menuTitle) + '</label>';content += '&nbsp;<a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="' + S123.escapeHtml(translations.pageHeaderSettings.menuTitleTooltip) + '">';content += '<i class="fa fa-question-circle"></i>';content += '</a>';content += '<input name="title" id="title" class="form-control" type="text" placeholder="' + S123.escapeHtml(translations.pageHeaderSettings.menuTitlePlaceholder) + '" value="">';content += '</div>';content += '</div>';content += '<div class="form-group">';content += '<div class="module-page-title">';content += '<label for="pageTitle">' + S123.escapeHtml(translations.pageHeaderSettings.pageTitle) + '</label>';content += '&nbsp;<a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="' + S123.escapeHtml(translations.pageHeaderSettings.pageTitleTooltip) + '">';content += '<i class="fa fa-question-circle"></i>';content += '</a>';content += '<input name="pageTitle" id="pageTitle" class="form-control" type="text" placeholder="' + S123.escapeHtml(translations.pageHeaderSettings.pageTitlePlaceholder) + '" value="">';content += '</div>';content += '</div>';content += '<div class="form-group">';content += '<div class="module-slogan">';content += '<label for="slogan">' + S123.escapeHtml(translations.pageHeaderSettings.slogan) + '</label>';content += '&nbsp;<a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="' + S123.escapeHtml(translations.pageHeaderSettings.sloganTooltip) + '">';content += '<i class="fa fa-question-circle"></i>';content += '</a>';content += '<textarea name="slogan" id="slogan" class="form-control" type="text" placeholder="' + S123.escapeHtml(translations.pageHeaderSettings.sloganPlaceholder) + '"></textarea>';content += '</div>';content += '</div>';content += '<div class="form-group">';content += '<button id="save" type="submit" class="btn btn-sm btn-primary">' + S123.escapeHtml(translations.save) + '</button>';content += '</div>';content += '</form>';content += '</div>';var $content = $(content);var $form = $content.find('form');var s123PopOver = new S123PopOver({$el: instance.$html.find('.module-custom-settings'),customClass: 'page-header-settings layout-customizer',popoverSettings: {content: $content,placement: 'auto top'},showCallback: function() {var settings = topWindow.GetModuleSetting(moduleID,'settings');var title = topWindow.GetModuleSetting(moduleID,'title');var slogan = topWindow.GetModuleSetting(moduleID,'slogan');settings = tryParseJSON(settings);var isNewTitleFlow = true;if ( !settings ) {settings = {};}
if ( !settings.pageHeaderSettings ) {isNewTitleFlow = false;settings.pageHeaderSettings = new PageHeaderSettings({pageTitle: title});}
s123PopOver.popoverSettings.content.find('#title').val(title);s123PopOver.popoverSettings.content.find('#pageTitle').val(settings.pageHeaderSettings.pageTitle);s123PopOver.popoverSettings.content.find('#slogan').val(slogan);s123PopOver.popoverSettings.content.find('[data-rel=tooltip]').tooltip({container: 'body',placement: 'auto'});OutlineHandler.focus($this);s123FloatingBar.removeOnMouseOut = false;$form.find('#title')
.add($form.find('#pageTitle'))
.on('focus',function() {$(this).data('name',$(this).val());})
.on('blur',function() {var $this = $(this);if ( $this.val().length == 0 ) {$this.val($this.data('name'));}});$form.off('submit').on('submit', function( event ) {event.preventDefault();var savePageTitle = settings.pageHeaderSettings.pageTitle != $form.find('#pageTitle').val();var savePageMenuTitle = title != $form.find('#title').val();if ( $form.find('#title').val() != $form.find('#pageTitle').val() ) {if ( !isNewTitleFlow ) {savePageTitle = true;}
isNewTitleFlow = true;}
$page.data('sync-titles',$form.find('#title').val() == $form.find('#pageTitle').val());$page.data('is-new-title-flow',isNewTitleFlow);if ( savePageTitle ) {settings.pageHeaderSettings.pageTitle = $form.find('#pageTitle').val();topWindow.EditModuleSetting(moduleID,'settings',JSON.stringify(settings));$this.text($form.find('#pageTitle').val());topWindow.BuildToolJSON();topWindow.AutoSaveWizard(false,true);}
if ( savePageMenuTitle ) {$page.find('input.module_name').val($form.find('#title').val()).trigger('input',true);}
if ( $form.find('#slogan').val() != slogan ) {if ( $form.find('#slogan').val().length > 0 ) {$slogan.text($form.find('#slogan').val());convertSloganToEditable($slogan,moduleTypeNUM,moduleID);topWindow.savePageSlogan(moduleTypeNUM,moduleID,$form.find('#slogan').val(),false);} else {$(document).trigger('removeSlogan.'+moduleID);}}
s123PopOver.hide();});},hideCallback: function() {OutlineHandler.blur($this);s123FloatingBar.removeOnMouseOut = true;s123FloatingBar.hide();}});})();} else {instance.$html.find('.module-custom-settings').remove();}}});function PageHeaderSettings( data ) {var def = {pageTitle: ''};data = topWindow.objectAssign(def,data);return data;}});if ( $slogan.text().length > 0 ) {convertSloganToEditable($slogan,moduleTypeNUM,moduleID);}
if ( topWindow.modulesArr[moduleTypeNUM].one_item_module == 1 ) return;if ( moduleTypeNUM == 112 || IsEcommerceHighlight(moduleTypeNUM) ) return;if ( moduleTypeNUM == 159 ) return;if ( moduleTypeNUM == 123 ) return;if ( $section.find('.preview-highlighter').length > 0 ) return;if ( moduleTypeNUM == 1 && $section.find('.g-i').length > 0 ) return;if ( moduleTypeNUM == 20 && $section.find('#music-player-songs-' + $section.data('module-id')).length > 0 ) return;if ( $section.find('.section-add-item-btn').length > 0 ) return;$section.append($('<div class="previewManageButton section-add-item-btn"><a class="p-m-b-design" href="#"><i class="fa fa-plus"></i>&nbsp;'+S123.escapeHtml(translations.sectionAddItemBtn.addItem)+'</a></div>'));var $button = $section.find('.section-add-item-btn .p-m-b-design');$button.tooltip({title: translations.sectionAddItemBtn.addItemTooltip,container: 'body',placement: 'top'});$button.on('click', function( event ) {event.preventDefault();var action = 'editItem';if ( moduleTypeNUM == 1 ) {action = 'itemsPage';}
openItemEditModal(moduleID,moduleTypeNUM,'',null,action);});});var homepageAndPromoEditor = function ( $el ) {var _ = {homepageSelectors: ['#home_siteSlogan','#home_siteSlogan_2','#home_SecondSiteSlogan'],promoSelectors: ['.promoText1','.promoText2','.promoText3']};_.init = function() {var $editableElements = $(_.homepageSelectors.concat(_.promoSelectors).join(','));if ( multiLanCode != '' ) {$editableElements.attr('data-original-title','');$editableElements.tooltip({title: translations.s123Editible.featureDisabledTooltip,container: 'body',placement: 'auto'});return;}
$editableElements.each(function( index, el ) {var $el = $(this);$('.s123-tool-bar[data-rel="' + $el.get(0).id + '"]').remove();if ( _.homepageSelectors.indexOf('#'+$el.get(0).id) != -1 ) {var homepageEditableTextHandler = new HomepageEditableTextHandler({$el: $el})} else {var promoEditableTextHandler = new PromoEditableTextHandler({$el: $el});}
$el.off('focus.homepageAndPromoEditor.textFormatting').on('focus.homepageAndPromoEditor.textFormatting', function() {var $this = $(this);_.hideAllToolBars();if ( $this.data('s123-editable-elements').isDisabled ) return false;$this.data('s123-tool-bar').show();$this.data('s123-tool-bar').setPosition();});$el.off('click.initHomepageEditor').on('click.initHomepageEditor', function( event ) {var $this = $(this);if ( $this.data('s123-editable-elements').isDisabled ) return false;if ( !$this.data('s123-tool-bar').$toolBar.hasClass('active') ) {_.hideAllToolBars();$this.data('s123-tool-bar').show();}
$this.data('s123-tool-bar').setPosition();});});$(document)
.add($(topWindow.document))
.off('click.initHomepageEditor').on('click.initHomepageEditor',function( event ) {var $target = $(event.target);if ( $target.closest('[data-s123-editable-elements="true"][data-has-s123-toolbar="true"]').length > 0 ) return;if ( $target.closest('.popover').length > 0 ) {if ( $('#'+$target.closest('.popover').data('rel')).closest('.s123-tool-bar').length > 0 ) {return;}}
if ( $target.closest('#previewScaleDevices').length > 0 ) return;if ( $target.data('tab') == 'textLayoutTab' ) return;if ( $target.data('tab') == 'textPositionsTab' ) return;_.hideAllToolBars();});$(document).off('previewScale.deviceTypeChange.S123ToolBar').on('previewScale.deviceTypeChange.S123ToolBar', function() {var id = $('.s123-tool-bar.active').data('rel');if ( !id ) return;$('#'+id).data('s123-tool-bar').setPosition();});$(document).off('homepageAndPromoEditor.hideToolBar').on('homepageAndPromoEditor.hideToolBar', function( event, $el ) {_.hideToolBar($el);});topWindow.$('[data-toggle=mytabs]').off('click.previewHelpers.homepageAndPromoEditor').on('click.previewHelpers.homepageAndPromoEditor', function() {_.hideAllToolBars();});if ( IsHomepage() && !IsRichPage() ) {if ( !$('#top-section').hasClass('s-m-t-b') ) {var homepageBtn = new SectionMainTextBtn({$section: $('#top-section'),$container: $('#top-section .hm-t-c'),$elements: $(_.homepageSelectors.join(',')),isHomepage: true});}
var homepageTextVisiblityHandler = new TextVisiblityHandler({$section: $('#top-section'),$elements: $(_.homepageSelectors.join(',')),isHomepage: true,textOrder: ['h1','h2','p']});$('#top-section').off('resetTextStyles').on('resetTextStyles', function( event, $el ) {topWindow.resetHomepageTextStyles($el);});}
$('.s123-module[data-module-type-num="1000"]').each(function() {var $this = $(this);if ( !$this.hasClass('s-m-t-b') ) {var promoBtn = new SectionMainTextBtn({$section: $this,$container: $this.find('.p-t-c'),$elements: $this.find(_.promoSelectors.join(',')),isHomepage: false});}
var promoTextVisiblityHandler = new TextVisiblityHandler({$section: $this,$elements: $this.find(_.promoSelectors.join(',')),isHomepage: false,textOrder: ['h3','h4','p']});$this.off('resetTextStyles').on('resetTextStyles', function( event, $el ) {$el.css({fontSize: topWindow.getTextDefaultStyles('fontSize') + 'px',letterSpacing: topWindow.getTextDefaultStyles('letterSpacing') + 'px',wordSpacing: topWindow.getTextDefaultStyles('wordSpacing') + 'px',lineHeight: topWindow.getTextDefaultStyles('lineHeight'),marginTop: topWindow.getTextDefaultStyles('marginTop') + 'px',marginBottom: topWindow.getTextDefaultStyles('marginBottom') + 'px'});});});$(document).off('homepageAndPromoEditor.refreshResizable').on('homepageAndPromoEditor.refreshResizable', function( event, goalType, moduleID ) {if ( goalType == 'homepage' ) {$('#top-section .homepage_goal').each(function() {initHomepageGoalResizable($(this));});} else if ( goalType == 'promo' ) {$('.s123-module[data-module-type-num="1000"][data-module-id="'+moduleID+'"] .preview-highlighter').each(function() {initPromoResizable($(this));});}});$('#top-section .homepage_goal').each(function() {var $goal = $(this);$goal.find('.w-helper').each(function() {var $wHelper = $(this);var toolName = $wHelper.data('w-helper-filter') ? $wHelper.data('w-helper-filter') : '';var goalSpacingButton = getHomepageGoalSpacingButton($wHelper,$goal);var moreBtn = {type: 'homepageMoreBtn',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ellipsis-h" class="svg-inline--fa fa-ellipsis-h fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg>',
menuType: 'popover',$el: $wHelper,buttons: [{type: 'goalType',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sync" class="svg-inline--fa fa-sync fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"></path></svg>',
text: translations.actionType,click: function( event ) {event.preventDefault();topWindow.$('#homepageImageOptionsTab .hide-available-goals-tools').removeClass('hide-available-goals-tools');topWindow.$('#homepageImageOptionsTab .homepage_goal_type_box.checkboxSingleSetting').addClass('hide-available-goals-tools');expandWizardHomepage('homepageTab','#homepageImageOptionsTab');if ( toolName == 'form' ) topWindow.$('#homepage_goal_type_form').removeClass('showOnlyDesign showOnlySettigns');}}]};var buttons = [{text: translations.edit,type: 'edit',click: function( event ) {var $el = $(event.target);if ( $el.closest('.promoButtons').length > 0 ) {event.preventDefault();event.stopPropagation();}
if ( toolName == 'customCode_box' ) {topWindow.$('#customCodeManageButton').trigger('click');} else {openHomepageGoalTab($el.closest('.w-helper'));if ( toolName == 'form' ) {topWindow.$('#homepage_goal_type_form').removeClass('showOnlyDesign');topWindow.$('#homepage_goal_type_form').addClass('showOnlySettigns');}}}}];if ( toolName == 'buttons' ) {moreBtn.buttons.push({icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="cog" class="svg-inline--fa fa-cog fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg>',
text: translations.settings,click: function( event ) {var $buttons = topWindow.Wizard.tabEffectHandler.designTabHandler.$tabContent.find('#WebsiteThemeAdvancedOptionsBOX .s123-collapse-settings[data-box-id="actionButtonStyle"]');expandWizardHomepage('designTab','#websiteBackground');topWindow.Wizard.tabEffectHandler.AnimationManager.designTab.show(topWindow.$('#showAdvancedStructure'));topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.hide();topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.showTab('WebsiteThemeAdvancedOptionsBOX');$buttons.removeClass('hidden');$buttons.siblings().hide();$buttons.addClass('static');topWindow.$(topWindow.document).one('animation_manager.hide', function() {topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.show();$buttons.addClass('hidden');$buttons.siblings().show();$buttons.removeClass('static');});}});}
if ( toolName == 'image' ) {var editorBtn = {type: 'goalImageEditor',icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',addCallback: function( $btn ) {topWindow.$('#'+topWindow.uploadFiles['home_custom_image'].id)
.off('change.hompageInlineImageEditorStatus')
.on('change.hompageInlineImageEditorStatus', function() {setHompageInlineImageEditorStatus($btn);});setHompageInlineImageEditorStatus($btn);function setHompageInlineImageEditorStatus( $btn ) {if ( topWindow.uploadFiles['home_custom_image'].btns.imageEditor.css('display') !== 'none' ) {$btn.show();} else {$btn.hide();}}},click: function( event ) {event.preventDefault();topWindow.uploadFiles['home_custom_image'].btns.imageEditor.trigger('click');}};buttons.push(editorBtn);}
if ( toolName == 'form' ) {var editorBtn = {type: 'goalStyle',icon: '<i class="fa fa-paint-brush" aria-hidden="true"></i>',click: function( event ) {var $el = $(event.target);openHomepageGoalTab($el.closest('.w-helper'));topWindow.$('#homepage_goal_type_form').addClass('showOnlyDesign');topWindow.$('#homepage_goal_type_form').removeClass('showOnlySettigns');}};buttons.push(editorBtn);}
if ( goalSpacingButton ) {buttons.push(goalSpacingButton);}
moreBtn.buttons.push({type: 'goalPosition',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="dot-circle" class="svg-inline--fa fa-dot-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm80 248c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80z"></path></svg>',
text: translations.position,addCallback: function( $btn ) {var $content = $('<div class="form-group"></div>');var s123PopOver = new S123PopOver({$el: $btn,popoverSettings: {content: $content,placement: 'auto bottom'},showCallback: function() {$btn.closest('.p-m-b-highlight').addClass('p-m-b-highlight-focused');$content.empty();var $select = $goal.hasClass('mainGoal') ? topWindow.$('#homepage_goal_place') : topWindow.$('#homepage_second_goal_place');var html = '';html += '<label>' + S123.escapeHtml(translations.s123ToolBar.goalPosition) + '</label>';html += '<div class="goal-position-container">';html += '<div class="goal-position">';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box" data-value="top">';html += '<span>';html += '<i class="fa fa-long-arrow-up" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box" data-value="'+getSideValue('left')+'">';html += '<span>';html += '<i class="fa fa-long-arrow-left" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box" data-value="'+getSideValue('right')+'">';html += '<span>';html += '<i class="fa fa-long-arrow-right" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box" data-value="bottom">';html += '<span>';html += '<i class="fa fa-long-arrow-down" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '</div>';html += '</div>';var $html = $(html);var currentPosition = $select.val();$select.children().each(function( index, option ) {var $option = $(option);var $goalBox = $html.find('.goal-box[data-value="' + $option.val() + '"]');$goalBox.addClass('available');if ( currentPosition == $option.val() ) {$goalBox.addClass('active');}});$html.find('.goal-box:not(.dummy):not(.available)').each(function( index, el ) {$(this).addClass('disabled');$(this).tooltip({title: translations.s123ToolBar.goalPositionDisabledTooltip,template: '<div class="tooltip s123-popover-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container: 'body',placement: 'auto'});});$html.find('.goal-box').off('click').on('click', function( event ) {var $this = $(this);if ( !$this.data('value') ) return false;if ( $this.hasClass('active') ) return;if ( $this.hasClass('disabled') ) return;$(document).trigger('S123PopOver.hide');if ( $goal.hasClass('mainGoal') ) {$select.val($this.data('value')).trigger('change');} else {$select.val($this.data('value')).trigger('change');}
if ( $goal.find('a[data-type="homepageMoreBtn"]').data('s123-p') ) $goal.find('a[data-type="homepageMoreBtn"]').data('s123-p').hide();});$content.append($html);function getSideValue( defaultSideValue ) {if ( topWindow.$('#homepage_layout_kind').val() == '2' || topWindow.$('#homepage_layout_kind').val() == '3' ) {if ( defaultSideValue == 'right' && $select.val() != 'side' ) {return 'side';}}
return defaultSideValue;}},hideCallback: function() {$btn.closest('.p-m-b-highlight').removeClass('p-m-b-highlight-focused');}});}});moreBtn.buttons.push({type: 'goalRemove',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" class="svg-inline--fa fa-trash fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></svg>',
text: translations.remove,click: function( event ) {var $homepageGoal = $wHelper.closest('.homepage_goal');var $mainGoal = topWindow.$('#homepage_goal_type');var $secondGoal = topWindow.$('#homepage_second_goal_type');if ( $homepageGoal.hasClass('secondGoal') ) {$secondGoal.val('no').trigger('change');} else if ( $homepageGoal.hasClass('mainGoal') ) {if ( $secondGoal.val() != 'no' && $secondGoal.val() != null ) {$mainGoal.val($secondGoal.val()).trigger('change');} else {$mainGoal.val('no').trigger('change');}}
if ( topWindow.$('#homepageImageOptionsTab').attr('data-visible') == 'true' ) {topWindow.$('#wizardBox .close-wizard-tab-btn').trigger('click');}}});buttons.push(moreBtn);$wHelper.find('.p-m-b-floating-menu').remove();addFloatingMenu({type: 'homepageGoal',$element: $wHelper,buttons: buttons});OutlineHandler.register($wHelper);});initHomepageGoalResizable($goal);});$('.s123-module[data-module-type-num="1000"] .preview-highlighter').each(function() {var $goal = $(this);var $section = $goal.closest('.s123-module');var moduleID = $section.data('module-id');var moduleTypeNUM = $section.data('module-type-num');OutlineHandler.register($(this));var openTool = $goal.data('open-tool') ? $goal.data('open-tool') : '';var moreBtn = {type: 'homepageGoal',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ellipsis-h" class="svg-inline--fa fa-ellipsis-h fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg>',
buttons: [],$el: $goal,menuType: 'popover',click: function( event ) {var $el = $goal.closest('.w-helper');if ( $el.closest('.promoButtons').length > 0 ) {$el.closest('.promoButtons').data('prevent-btn-action',true);}}};var buttons = [];if ( openTool.length > 0 ) {buttons.push({text: translations.edit,click: function( event ) {event.preventDefault();var $item = $(event.target).closest('.preview-highlighter');var itemUniqueID = $item.data('unique-id') ? $item.data('unique-id') : '';topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+moduleID+'"]').closest('li').data('open-tool',openTool);openItemEditModal(moduleID,moduleTypeNUM,itemUniqueID,null);}});}
if ( openTool == 'button-options' ) {buttons.push({icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="cog" class="svg-inline--fa fa-cog fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg>',
click: function( event ) {var $el = $goal.closest('.w-helper');if ( $el.closest('.promoButtons').length > 0 ) {event.stopPropagation();}
var $buttons = topWindow.Wizard.tabEffectHandler.designTabHandler.$tabContent.find('#WebsiteThemeAdvancedOptionsBOX .s123-collapse-settings[data-box-id="actionButtonStyle"]');expandWizardHomepage('designTab','#websiteBackground');topWindow.Wizard.tabEffectHandler.AnimationManager.designTab.show(topWindow.$('#showAdvancedStructure'));topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.hide();topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.showTab('WebsiteThemeAdvancedOptionsBOX');$buttons.removeClass('hidden');$buttons.siblings().hide();$buttons.addClass('static');topWindow.$(topWindow.document).one('animation_manager.hide', function() {topWindow.Wizard.tabEffectHandler.designTabHandler.websiteStructureTabs.$linkContainer.show();$buttons.addClass('hidden');$buttons.siblings().show();$buttons.removeClass('static');});}});}
if ( openTool == 'images-options' ) {var editorBtn = {type: 'goalSpacing',icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',addCallback: function( $btn ) {var src = '';if ( $goal.find('video').length > 0 ) {src = $goal.find('video source').attr('src');} else if ( $goal.find('img').length > 0 ) {src = $goal.find('img').attr('data-src');}
if ( src.length !== 0 ) {var extension = src.split('.').pop();if ( extension === 'svg' || extension === 'mp4' ) {$btn.hide();} else {$btn.show();}}},click: function( event ) {event.preventDefault();var $item = $(event.target).closest('.preview-highlighter');var itemUniqueID = $item.data('unique-id') ? $item.data('unique-id') : '';topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+moduleID+'"]').closest('li').data('open-tool',openTool);openItemEditModal(moduleID,moduleTypeNUM,itemUniqueID,function( $iframe ) {topWindow.uploadFiles['image-inline-show'].btns.imageEditor.trigger('click');});}};buttons.push(editorBtn);}
if ( openTool == 'form-settings' ) {var editorBtn = {type: 'goalSpacing',icon: '<i class="fa fa-paint-brush" aria-hidden="true"></i>',click: function( event ) {event.preventDefault();var $item = $(event.target).closest('.preview-highlighter');var itemUniqueID = $item.data('unique-id') ? $item.data('unique-id') : '';topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+moduleID+'"]').closest('li').data('open-tool','form-settings-styles');openItemEditModal(moduleID,moduleTypeNUM,itemUniqueID,null);}};buttons.push(editorBtn);}
buttons.push({icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrows-alt-v" class="svg-inline--fa fa-arrows-alt-v fa-w-8" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"></path></svg>',
addCallback: function( $btn ) {var goalType = $goal.data('type');var goalsStyles = {};var minValue = 0;var maxValue = 200;goalsStyles[goalType] = {marginTop: parseInt($goal.css('margin-top')),marginBottom: parseInt($goal.css('margin-bottom'))};handleActiveClassOfGoalSpacing($btn,goalsStyles[goalType].marginTop,goalsStyles[goalType].marginBottom,minValue);var s123PopOverSliders = new S123PopOverSliders({$el: $btn,popoverSettings: {placement: 'auto bottom'},customClass: 'promo-goal-settings',slidersArray: [{type: 'goalTopSpacing',label: translations.promoeGoals.actionTopSpacing,tooltip: translations.promoeGoals.actionTopSpacingTolltip,design: 'twoLines',getValue: function() {return goalsStyles[goalType].marginTop;},numberKind: 1,minValue: minValue,maxValue: maxValue,callback: function( event, value, isLive ) {goalsStyles[goalType].marginTop = value;handleActiveClassOfGoalSpacing($btn,goalsStyles[goalType].marginTop,goalsStyles[goalType].marginBottom,minValue);$goal.css({marginTop: goalsStyles[goalType].marginTop + 'px'});if ( !isLive ) {updateMultipleSettings(moduleID,moduleTypeNUM,{goalsStyles: JSON.stringify(goalsStyles)});}}},{type: 'goalBottomSpacing',label: translations.promoeGoals.actionBottomSpacing,tooltip: translations.promoeGoals.actionBottomSpacingTolltip,design: 'twoLines',getValue: function() {return goalsStyles[goalType].marginBottom;},numberKind: 1,minValue: minValue,maxValue: maxValue,callback: function( event, value, isLive ) {goalsStyles[goalType].marginBottom = value;handleActiveClassOfGoalSpacing($btn,goalsStyles[goalType].marginTop,goalsStyles[goalType].marginBottom,minValue);$goal.css({marginBottom: goalsStyles[goalType].marginBottom + 'px'});if ( !isLive ) {updateMultipleSettings(moduleID,moduleTypeNUM,{goalsStyles: JSON.stringify(goalsStyles)});}}}],showCallback: function() {OutlineHandler.focus($goal);$(document).off('click.moreBtnHelper click.promoGoalSpacingButton').on('click.promoGoalSpacingButton').on('click.promoGoalSpacingButton').on('click.promoGoalSpacingButton', function( event ) {if ( $(event.target).closest('.preview-highlighter').length > 0 ) return;if ( $(event.target).closest('.s123-popover').length > 0 ) return;OutlineHandler.blur($goal);$(document).off('click.promoGoalSpacingButton').on('click.promoGoalSpacingButton');});}});}});moreBtn.buttons.push({type: 'goalPosition',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="dot-circle" class="svg-inline--fa fa-dot-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm80 248c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80z"></path></svg>',
text: translations.position,addCallback: function( $btn ) {var $content = $('<div class="form-group"></div>');var s123PopOver = new S123PopOver({$el: $btn,popoverSettings: {content: $content,placement: 'auto bottom'},showCallback: function() {$content.empty();var twoSideDiffBack = [3,4,5,6,15,16,28,29,35,36];var goalType = $btn.closest('.p-m-b-highlight').data('type');var html = '';html += '<label>' + S123.escapeHtml(translations.s123ToolBar.goalPosition) + '</label>';html += '<div class="goal-position-container">';html += '<div class="goal-position">';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box available" data-value="top">';html += '<span>';html += '<i class="fa fa-long-arrow-up" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box available" data-value="left">';html += '<span>';html += '<i class="fa fa-long-arrow-left" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box available" data-value="right">';html += '<span>';html += '<i class="fa fa-long-arrow-right" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '<div class="goal-box available" data-value="bottom">';html += '<span>';html += '<i class="fa fa-long-arrow-down" aria-hidden="true"></i>';html += '</span>';html += '</div>';html += '<div class="goal-box dummy"></div>';html += '</div>';html += '</div>';var $html = $(html);var currentPosition = '';if ( twoSideDiffBack.includes($section.data('tool-style')) ) {$html.find('.goal-box[data-value="right"]').removeClass('available');$html.find('.goal-box[data-value="left"]').removeClass('available');}
if ( ['buttons','mailingSubscribeForm','searchButton','socialButtons'].includes(goalType) ) {$html.find('.goal-box[data-value="right"]').removeClass('available');$html.find('.goal-box[data-value="left"]').removeClass('available');}
$html.find('.goal-box:not(.dummy):not(.available)').each(function( index, el ) {$(this).addClass('disabled');$(this).tooltip({title: translations.s123ToolBar.goalPositionDisabledTooltip,container: 'body',placement: 'auto'});});$html.find('.goal-box').off('click').on('click', function( event ) {var $this = $(this);if ( !$this.data('value') ) return false;var place = {};var twoSideDiffBackReverse = [4,5,6,16,29,36];var isReverse = twoSideDiffBackReverse.includes($section.data('tool-style'));if ( twoSideDiffBack.includes($section.data('tool-style')) ) {place = {top: {style: isReverse ? 36 : 35,arrID: isReverse ? 1005 : 1004},bottom: {style: isReverse ? 16 : 15,arrID: isReverse ? 1005 : 1004},};} else {place = {top: {style: 37,arrID: 1024},right: {style: 11,arrID: 1000},bottom: {style: 33,arrID: 1023},left: {style: 12,arrID: 1001},};}
if ( $this.hasClass('active') ) return;if ( $this.hasClass('disabled') ) return;updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{isCustomButtonType: '1'});s123PopOver.hide();topWindow.$('#card_' + $section.data('module-id')).data('module-style',place[$this.data('value')].style);topWindow.$('#card_' + $section.data('module-id')).data('modules-arr-id',place[$this.data('value')].arrID);topWindow.BuildToolJSON();topWindow.g_ManageModuleID = $section.data('module-id');topWindow.AutoSaveWizard(true,true);if ( $goal.find('a[data-type="promoMoreBtn"]').data('s123-p') ) $goal.find('a[data-type="promoMoreBtn"]').data('s123-p').hide();});$content.append($html);},hideCallback: function() {}});}});moreBtn.buttons.push({icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" class="svg-inline--fa fa-trash fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></svg>',
text: translations.remove,click: function( $btn ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{buttonType: $goal.data('type')},function() {topWindow.g_ManageModuleID = $section.data('module-id');if ( $section.hasClass('twoSideCallAction') ) {topWindow.$('#card_' + $section.data('module-id')).data('module-style','27');topWindow.$('#card_' + $section.data('module-id')).data('modules-arr-id','1017');topWindow.BuildToolJSON();topWindow.AutoSaveWizard(true,true);} else {topWindow.g_ManageModuleID = $section.data('module-id');topWindow.isPreviewReload = true;topWindow.RefreshPreview();}
if ( topWindow.$('#pagesTab .inline-module .inline-wizard-iframe').data('moduleid') == $section.data('module-id') ) {topWindow.$('#wizardBox .close-wizard-tab-btn').trigger('click');}});}});buttons.push(moreBtn);addFloatingMenu({type: 'homepageGoal',$element: $goal,buttons: buttons});initPromoResizable($(this));});function getHomepageGoalSpacingButton( $el, $goal ) {var $marginTopInput = null;var $marginBottomInput = null;if ( $goal.hasClass('mainGoal') ) {$marginTopInput = topWindow.$('#homepage_main_goal_margin_top');$marginBottomInput = topWindow.$('#homepage_main_goal_margin_bottom');} else if ( $goal.hasClass('secondGoal') ) {$marginTopInput = topWindow.$('#homepage_second_goal_margin_top');$marginBottomInput = topWindow.$('#homepage_second_goal_margin_bottom');}
var minValue = $marginTopInput.data('min-val');var maxValue = $marginBottomInput.data('max-val');var btn = {type: 'goalSpacing',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrows-alt-v" class="svg-inline--fa fa-arrows-alt-v fa-w-8" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"></path></svg>',
click: function() {$el.find('[data-type="homepageMoreBtn"]').addClass('m-b-k-o');},addCallback: function( $btn ) {handleActiveClassOfGoalSpacing($btn,$marginTopInput.val(),$marginBottomInput.val(),minValue);var s123PopOverSliders = new S123PopOverSliders({$el: $btn,popoverSettings: {placement: 'auto bottom'},customClass: 'homepage-goal-settings',slidersArray: [{type: 'marginTop',label: translations.homepageGoals.actionMarginTop,tooltip: translations.homepageGoals.actionMarginTopTolltip,design: 'twoLines',getValue: function() {return $marginTopInput.val();},numberKind: 1,minValue: minValue,maxValue: maxValue,callback: function( event, value, isLive ) {handleActiveClassOfGoalSpacing($btn,value,$marginBottomInput.val(),minValue);document.documentElement.style.setProperty('--'+$marginTopInput.get(0).id,value + 'px');$marginTopInput.val(value).trigger('input',true);}},{type: 'marginBottom',label: translations.homepageGoals.actionMarginBottom,tooltip: translations.homepageGoals.actionMarginBottomTolltip,design: 'twoLines',getValue: function() {return $marginBottomInput.val();},numberKind: 1,minValue: minValue,maxValue: maxValue,callback: function( event, value, isLive ) {handleActiveClassOfGoalSpacing($btn,$marginTopInput.val(),value,minValue);document.documentElement.style.setProperty('--'+$marginBottomInput.get(0).id,value + 'px');$marginBottomInput.val(value).trigger('input',true);}}],showCallback: function() {OutlineHandler.focus($el);$(document).off('click.moreBtnHelper click.homepageGoalSpacingButton').on('click.homepageGoalSpacingButton', function( event ) {if ( $(event.target).closest('.w-helper').length > 0 ) return;if ( $(event.target).closest('.s123-popover').length > 0 ) return;OutlineHandler.blur($el);$(document).off('click.homepageGoalSpacingButton');});}});$btn.off('hidden.bs.popover.goalSpacing').on('hidden.bs.popover.goalSpacing', function( event ) {$el.find('[data-type="homepageMoreBtn"]').removeClass('m-b-k-o');});}};return btn;}};_.hideAllToolBars = function() {$('#top-section [data-has-s123-toolbar="true"], .s123-module[data-module-type-num="1000"] [data-has-s123-toolbar="true"]').each(function() {_.hideToolBar($(this));});};_.hideToolBar = function( $el ) {var toolBar = $el.data('s123-tool-bar');if ( !toolBar ) return;if ( !toolBar.$toolBar.is(':visible') ) return;toolBar.$toolBar.find('.s123-p-s').each(function() {if ( !$(this).data('s123-p-s') ) return;$(this).data('s123-p-s').hide();});toolBar.$toolBar.find('.s123-p').each(function() {if ( !$(this).data('s123-p') ) return;$(this).data('s123-p').hide();});toolBar.hide();};function initHomepageGoalResizable( $goal ) {var $el = $goal.find('.w-helper');if ( $el.data('s123-resizable') ) $el.data('s123-resizable').destroy();var type = $goal.data('type');var maxWidth = $goal.width();var maxHeight = null;var minWidth = 10;var minHeight = 10;var supportedGoals = ['image','video','sound_cloud','facebook_like_box','twitter_box','pinterest_box','vertical_form','customCode_box'];var preserveRatio = true;var resizByWidth = true;var resizByHeight = true;var $wizardInputs = {};if ( supportedGoals.indexOf(type) == -1 ) return;if ( $el.closest('.left').length > 0 ) {maxWidth = $el.closest('.left').width();} else if ( $el.closest('.right').length > 0 ) {maxWidth = $el.closest('.right').width();}
if ( $el.hasClass('s123-resizable') ) $el.data('s123-resizable').destroy();switch ( type ) {case 'image':$wizardInputs = {width: topWindow.$('#home_custom_image_width'),height: null};var isOldResizeFlow = !$.isNumeric($wizardInputs.width.val());var resizable = new S123Resizable({$el: $el,$wizardInputs: $wizardInputs,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,resizeCallBack: function( event, ui ) {if ( isOldResizeFlow ) {document.documentElement.style.setProperty('--home_custom_image_size',ui.size.height + 'px');}
document.documentElement.style.setProperty('--home_custom_image_width',ui.size.width + 'px');},endCallBack: function( event, ui, isUndoRedo ) {if ( !isUndoRedo ) {topWindow.$('#home_custom_image_size').val('');$wizardInputs.width.val(ui.size.width).trigger('change');if ( isOldResizeFlow ) {topWindow.window.reloadPreviewCSS = topWindow.ReloadPreviewCSS;isOldResizeFlow = false;}}}});break;case 'vertical_form':minWidth = 150;preserveRatio = false;resizByHeight = false;$wizardInputs = {width: topWindow.$('#homepage_form_style_max_width'),height: null};var resizable = new S123Resizable({$el: $el,$wizardInputs: $wizardInputs,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,endCallBack: function( event, ui, isUndoRedo ) {ui.element.css({width: ui.size.width + 'px',});if ( !isUndoRedo ) $wizardInputs.width.val(ui.size.width).trigger('input');}});break;case 'sound_cloud':case 'facebook_like_box':case 'twitter_box':case 'pinterest_box':case 'customCode_box':maxHeight = 800;preserveRatio = false;if ( type == 'facebook_like_box' ) {maxWidth = 500;}
var $iframe = null;if ( type == 'sound_cloud' ) {$wizardInputs = {width: topWindow.$('#embed_url_width_sound_cloud'),height: topWindow.$('#embed_url_height_sound_cloud'),};} else if ( type == 'facebook_like_box' ) {$wizardInputs = {width: topWindow.$('#embed_url_width_facebook'),height: topWindow.$('#embed_url_height_facebook'),};} else if ( type == 'twitter_box' ) {$wizardInputs = {width: topWindow.$('#embed_url_width_twitter'),height: topWindow.$('#embed_url_height_twitter'),};} else if ( type == 'pinterest_box' ) {$wizardInputs = {width: topWindow.$('#embed_url_width_pinterest'),height: topWindow.$('#embed_url_height_pinterest'),};} else if ( type == 'customCode_box' ) {$wizardInputs = {width: topWindow.$('#embed_url_width_custom_code'),height: topWindow.$('#embed_url_height_custom_code'),};}
var resizable = new S123Resizable({$el: $el,$wizardInputs: $wizardInputs,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,startCallBack: function( event, ui ) {$iframe = $el.find('iframe');if ( $iframe ) {$iframe.css({maxWidth: '',width: $iframe.width() + 'px',});$iframe.removeAttr('width');$iframe.removeAttr('height');}},resizeCallBack: function( event, ui ) {if ( $iframe ) {$iframe.css({width: ui.size.width + 'px',height: ui.size.height + 'px',});}},endCallBack: function( event, ui, isUndoRedo ) {if ( $iframe ) {$iframe.css({maxWidth: '100%',width: ui.size.width + 'px',height: ui.size.height + 'px',});}
if ( $wizardInputs.width && !isUndoRedo ) $wizardInputs.width.val(ui.size.width).trigger('change');if ( $wizardInputs.height && !isUndoRedo ) $wizardInputs.height.val(ui.size.height).trigger('change');}});break;case 'video':var $iframe = null;$wizardInputs = {width: topWindow.$('#homepage_video_width'),height: null};var resizable = new S123Resizable({$el: $el,$wizardInputs: $wizardInputs,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,startCallBack: function( event, ui ) {ui.element.removeClass('old-customer');$iframe = $el.find('iframe');if ( $iframe ) {$iframe.css({maxWidth: '',width: $iframe.width() + 'px',});$iframe.removeAttr('width');$iframe.removeAttr('height');}},resizeCallBack: function( event, ui ) {if ( $iframe ) {$iframe.css({width: ui.size.width + 'px',height: ui.size.height + 'px',});}
ui.element.css({width: ui.size.width});},endCallBack: function( event, ui, isUndoRedo ) {if ( $iframe ) {$iframe.css({maxWidth: '100%',width: ui.size.width + 'px',height: ui.size.height + 'px',});}
ui.element.css({width: ui.size.width});if ( $wizardInputs.width && !isUndoRedo ) $wizardInputs.width.val(ui.size.width).trigger('change');}});break;}}
function handleActiveClassOfGoalSpacing( $btn, marginTop, marginBottom, minValue ) {if ( parseInt(marginTop) > parseInt(minValue) || parseInt(marginBottom) > parseInt(minValue) ) {$btn.addClass('active');} else {$btn.removeClass('active');}}
function initPromoResizable( $this ) {if ( $this.data('s123-resizable') ) $this.data('s123-resizable').destroy();var type = $this.data('type');var maxWidth = null;var maxHeight = null;var minWidth = 10;var minHeight = 10;var supportedTools = ['imageInline','videoInline','contactUsForm'];var preserveRatio = true;var resizByWidth = true;var resizByHeight = true;if ( supportedTools.indexOf(type) == -1 ) return;if ( $this.closest('.start').length > 0 ) {maxWidth = $this.closest('.start').width();} else if ( $this.closest('.end').length > 0 ) {maxWidth = $this.closest('.end').width();}
if ( $this.hasClass('s123-resizable') ) $this.data('s123-resizable').destroy();switch ( type ) {case 'contactUsForm':preserveRatio = false;resizByHeight = false;minWidth = 150;var resizable = new S123Resizable({$el: $this,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,endCallBack: function( event, ui ) {var $section = ui.element.closest('section');ui.element.css({width: ui.size.width});updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{promoVerticalFormWidth: ui.size.width});}});break;case 'imageInline':var resizable = new S123Resizable({$el: $this,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,resizeCallBack: function( event, ui ) {ui.element.find('img, video').css({width: ui.size.width,maxHeight: '100%' // drop old customers max-height setting
});},endCallBack: function( event, ui ) {var $section = ui.element.closest('section');updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{promoImageInlineWidth: ui.size.width});}});break;case 'videoInline':var $iframe = null;var resizable = new S123Resizable({$el: $this,maxWidth: maxWidth,maxHeight: maxHeight,minWidth: minWidth,minHeight: minHeight,resizByWidth: resizByWidth,resizByHeight: resizByHeight,preserveRatio: preserveRatio,startCallBack: function( event, ui ) {$this.closest('.promoVideoInline').removeClass('old-customer');$iframe = ui.element.find('iframe');if ( $iframe ) {$iframe.css({maxWidth: '',width: $iframe.width() + 'px',});$iframe.removeAttr('width');$iframe.removeAttr('height');}
ui.element.find('img').css({width: ui.size.width + 'px'});},resizeCallBack: function( event, ui ) {if ( $iframe ) {$iframe.css({width: ui.size.width + 'px',height: ui.size.height + 'px',});}
ui.element.find('img').css({width: ui.size.width + 'px'});},endCallBack: function( event, ui ) {var $section = ui.element.closest('section');if ( $iframe ) {$iframe.css({maxWidth: '100%',width: ui.size.width + 'px',height: ui.size.height + 'px',});}
updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{promoVideoInlineWidth: ui.size.width},false);}});break;}}
function getCaretPosition( element, originalText ) {var start = 0;var end = 0;var doc = element.ownerDocument || element.document;var win = doc.defaultView || doc.parentWindow;var sel;if (typeof win.getSelection != "undefined") {sel = win.getSelection();if (sel.rangeCount > 0) {var range = win.getSelection().getRangeAt(0);var preCaretRange = range.cloneRange();preCaretRange.selectNodeContents(element);preCaretRange.setEnd(range.startContainer, range.startOffset);start = preCaretRange.toString().length;preCaretRange.setEnd(range.endContainer, range.endOffset);end = preCaretRange.toString().length;}} else if ( (sel = doc.selection) && sel.type != "Control") {var textRange = sel.createRange();var preCaretTextRange = doc.body.createTextRange();preCaretTextRange.moveToElementText(element);preCaretTextRange.setEndPoint("EndToStart", textRange);start = preCaretTextRange.text.length;preCaretTextRange.setEndPoint("EndToEnd", textRange);end = preCaretTextRange.text.length;}
var arr = originalText.split('');var preCaretRangeArr = preCaretRange.toString().split('');for (var i = preCaretRangeArr.length ; i >= 0; i--) {if ( ['*','_'].indexOf(arr[i]) != -1 ) {start ++;end ++;}}
return { start: start, end: end };}
function restoreCaretPosition( data, $el, text ) {var textNode = document.createTextNode(text);$el.empty().append(textNode);var sel = window.getSelection();var range = new Range();range.setStart(textNode,data.start);range.collapse(true);sel.removeAllRanges();sel.addRange(range);}
function HomepageEditableTextHandler( settings ) {var _ = {$el: settings.$el};_.init = function() {var isTextChanged = false;var maxlength = 0;var $input = topWindow.$('#'+_.$el.get(0).id);maxlength = parseInt($input.attr('maxlength'));_.$el.off('click.homepageAndPromoEditor.textFormatting').on('click.homepageAndPromoEditor.textFormatting', function( event ) {if ( _.$el.data('showing-original-text') ) return;if ( topWindow.Wizard.Preview.iframe.attr('data-device-type') != 'computer' ) return;var $input = topWindow.$('#'+_.$el.get(0).id);if ( topWindow.isTextFormated($input.val()) ) {var cretPosition = getCaretPosition(_.$el.get(0),$input.val());_.$el.html($input.val());restoreCaretPosition(cretPosition,_.$el,$input.val());event.stopPropagation();_.$el.data('s123-tool-bar').show();}
_.$el.one('blur.homepageAndPromoEditor.textFormatting', function() {_.$el.data('showing-original-text',false);});_.$el.data('showing-original-text',true);});var fontSizeSelector = '';var fontSizeSelectorCSSVar = '';var fontSizeSelectorCSSVarInt = '';var fontStyleSelector = '';var letterSpacingSelector = '';var wordSpacingSelector = '';var lineHeightSelector = '';var topSpacingSelector = '';var bottomSpacingSelector = '';var shadowSelector = '';var fontWeightSelector = '';var italicSelector = '';var textRotateSelector = '';var minFontSize = 10;var maxFontSize = 200;switch ( _.$el.get(0).id ) {case 'home_siteSlogan':fontSizeSelector = '#home_text_size';fontSizeSelectorCSSVar = '--home_text_size_px';fontSizeSelectorCSSVarInt = '--home_text_size';fontStyleSelector = 'font_slogan';letterSpacingSelector = '#home_text_letter_spacing_1';wordSpacingSelector = '#home_text_word_spacing_1';lineHeightSelector = '#home_text_line_height_1';topSpacingSelector = '#home_text_top_space_1';bottomSpacingSelector = '#home_text_bottom_space_1';shadowSelector = '#home_text_shadow_1';fontWeightSelector = '#home_text_size_weight';italicSelector = '#home_text_italic';textRotateSelector = '#home_text_rotate_1';break;case 'home_siteSlogan_2':fontSizeSelector = '#home_text_size_2';fontSizeSelectorCSSVar = '--home_text_size_2_px';fontSizeSelectorCSSVarInt = '--home_text_size_2';fontStyleSelector = 'font_slogan_2';letterSpacingSelector = '#home_text_letter_spacing_2';wordSpacingSelector = '#home_text_word_spacing_2';lineHeightSelector = '#home_text_line_height_2';topSpacingSelector = '#home_text_top_space_2';bottomSpacingSelector = '#home_text_bottom_space_2';shadowSelector = '#home_text_shadow_2';fontWeightSelector = '#home_text_size_2_weight';italicSelector = '#home_text_2_italic';textRotateSelector = '#home_text_rotate_2';break;case 'home_SecondSiteSlogan':fontSizeSelector = '#slogan_text_size';fontSizeSelectorCSSVar = '--slogan_text_size_px';fontSizeSelectorCSSVarInt = '--slogan_text_size';fontStyleSelector = 'font_second_slogan';letterSpacingSelector = '#home_text_letter_spacing_3';wordSpacingSelector = '#home_text_word_spacing_3';lineHeightSelector = '#home_text_line_height_3';topSpacingSelector = '#home_text_top_space_3';bottomSpacingSelector = '#home_text_bottom_space_3';shadowSelector = '#home_text_shadow_3';fontWeightSelector = '#slogan_text_size_weight';italicSelector = '#slogan_text_italic';textRotateSelector = '#home_text_rotate_3';break;}
var toolBar = new S123ToolBar({$el: _.$el,optionsList: ['weight','italic','fontStyle','fontResizing','textMargins','textLayouts','textPositions','textShadow'],initCallback: function( toolBar ) {var slidersArray = [{type: 'textSize',label: translations.s123ToolBar.textSize,tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$(fontSizeSelector).val();},numberKind: 1,minValue: minFontSize,maxValue: maxFontSize,callback: function( event, fontSize, isLive ) {topWindow.$(fontSizeSelector).val(fontSize).trigger('input');}},{type: 'letterSpacing',label: translations.s123ToolBar.letterSpacing,tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$(letterSpacingSelector).val();},numberKind: 1,minValue: -5,maxValue: 10,callback: function( event, value, isLive ) {topWindow.$(letterSpacingSelector).val(value).trigger('input');}},{type: 'wordSpacing',label: translations.s123ToolBar.wordSpacing,tooltip: '',design: 'oneLine',value: topWindow.$(wordSpacingSelector).val(),getValue: function() {return topWindow.$(wordSpacingSelector).val();},numberKind: 1,minValue: -5,maxValue: 10,callback: function( event, value, isLive ) {topWindow.$(wordSpacingSelector).val(value).trigger('input');}},{type: 'lineHeight',label: translations.s123ToolBar.lineHeight,tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$(lineHeightSelector).val();},numberKind: 2,minValue: 0.7,maxValue: 2,callback: function( event, value, isLive ) {topWindow.$(lineHeightSelector).val(value).trigger('input');}}];if ( parseInt(topWindow.$(textRotateSelector).val()) > 0 ) {slidersArray.push({type: 'textRotate',label: translations.s123ToolBar.textRotate,tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$(textRotateSelector).val();},numberKind: 1,minValue: 0,maxValue: 359,callback: function( event, value, isLive ) {topWindow.$(textRotateSelector).val(value).trigger('input');}});}
var fontResizing = new S123PopOverSliders({$el: toolBar.$toolBar.find('[data-type="fontResizing"]'),popoverSettings: {placement: 'auto top'},slidersArray: slidersArray,showCallback: function() {toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});var textMargins = new S123PopOverSliders({$el: toolBar.$toolBar.find('[data-type="textMargins"]'),popoverSettings: {placement: 'auto top'},slidersArray: [{type: 'topSpacing',label: translations.s123ToolBar.topSpacing,tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$(topSpacingSelector).val();},numberKind: 1,minValue: 0,maxValue: 200,callback: function( event, value, isLive ) {toolBar.manualActiveHandler('textMargins',parseInt(value) > 0);topWindow.$(topSpacingSelector).val(value).trigger('input');}},{type: 'bottomSpacing',label: translations.s123ToolBar.bottomSpacing,tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$(bottomSpacingSelector).val();},numberKind: 1,minValue: 10,maxValue: 200,callback: function( event, value, isLive ) {toolBar.manualActiveHandler('textMargins',parseInt(value) > 10);topWindow.$(bottomSpacingSelector).val(value).trigger('input');}}],showCallback: function() {toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});var $html = $('<div class="form-group"></div>');var s123PopOver = new S123PopOver({$el: toolBar.$toolBar.find('[data-type="textShadow"]'),popoverSettings: {placement: 'auto top',content: $html},showCallback: function() {(function() {$html.find('.shadow-controller').remove();var $input = topWindow.$(shadowSelector);var html = '';html += '<div class="shadow-controller">';html += '<label>' + S123.escapeHtml(translations.s123ToolBar.textShadow) + '</label>';html += '<div class="shadow-controller">';html += '<a href="#" data-value="">A</a>';html += '<a href="#" data-value="shadow1" class="shadow1">A</a>';html += '<a href="#" data-value="shadow2" class="shadow2">A</a>';html += '<a href="#" data-value="shadow3" class="shadow3">A</a>';html += '<a href="#" data-value="shadow4" class="shadow4">A</a>';html += '</div>';html += '</div>';$html.append(html);$html.find('.shadow-controller a[data-value="' + $input.val() + '"]').addClass('active');$html.find('.shadow-controller').off('click').on('click', 'a', function( event ) {event.preventDefault();var $this = $(this);$this.siblings().removeClass('active');$this.addClass('active');_.$el.removeClass(function (index, className) {return (className.match (/(^|\s)shadow\S+/g) || []).join(' ');});_.$el.addClass($this.data('value'));$input.val($this.data('value')).trigger('change');toolBar.manualActiveHandler('textShadow',$this.data('value').length > 0);});$input.off('change.textShadow').on('change.textShadow', function( event, flagStatus ) {if ( flagStatus != 'UndoRedoChange' || flagStatus != 'ReadyTemplateChange' ) return;toolBar.manualActiveHandler('textShadow',topWindow.$(shadowSelector).val().length > 0);});})();toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});},showCallback: function() {var isItalicSupported = true;toolBar.manualActiveHandler('weight',topWindow.$(fontWeightSelector).val() == 'weight700');toolBar.manualActiveHandler('italic',topWindow.$(italicSelector).val() == 'italic');toolBar.manualActiveHandler('textShadow',topWindow.$(shadowSelector).val().length > 0);var hasMargins = false;if ( parseInt(topWindow.$(topSpacingSelector).val()) > 0 ) {hasMargins = true;}
if ( parseInt(topWindow.$(bottomSpacingSelector).val()) > 10 ) {hasMargins = true;}
toolBar.manualActiveHandler('textMargins',hasMargins);switch( _.$el.get(0).id ) {case 'home_siteSlogan':if ( topWindow.websiteFonts.font_slogan ) {isItalicSupported = topWindow.websiteFonts.font_slogan.isItalicSupported;}
break;case 'home_siteSlogan_2':if ( topWindow.websiteFonts.font_slogan_2 ) {isItalicSupported = topWindow.websiteFonts.font_slogan_2.isItalicSupported;}
break;case 'home_SecondSiteSlogan':if ( topWindow.websiteFonts.font_second_slogan ) {isItalicSupported = topWindow.websiteFonts.font_second_slogan.isItalicSupported;}
break;}
if ( !isItalicSupported ) {toolBar.disableOption('italic');toolBar.getOptionButton('italic').tooltip({title: translations.italic.notSupported,container: 'body',placement: 'auto'});} else {toolBar.getOptionButton('italic').tooltip('destroy');toolBar.enableOption('italic');}},clickCallback: function( $btn ) {if ( $btn.data('type') == 'weight' ) {if ( $btn.hasClass('active') ) {topWindow.$(fontWeightSelector).val('weight700').trigger('change');} else {topWindow.$(fontWeightSelector).val('weight400').trigger('change');}} else if ( $btn.data('type') == 'italic' ) {if ( $btn.hasClass('active') ) {topWindow.$(italicSelector).val('italic').trigger('change');} else {topWindow.$(italicSelector).val('').trigger('change');}} else if ( $btn.data('type') == 'textLayouts' || $btn.data('type') == 'textPositions' ) {expandWizardHomepage('homepageTab','#homepageCollapse88');var $homepageCollapse88 = topWindow.$('#homepageCollapse88');$homepageCollapse88.find('#readyTextLayoutsTabs').removeClass('hidden');if ( $btn.data('type') == 'textLayouts' ) {topWindow.Wizard.readyTextLayoutsHandler.printSingleTextLayouts(_.$el.get(0).id);$homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header [data-tab-related="textPositionsTab"]').hide();$homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header [data-tab-related="textLayoutTab"]').show();var height = '100vh';} else if ( $btn.data('type') == 'textPositions' ) {$homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header [data-tab-related="textLayoutTab"]').hide();$homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header [data-tab-related="textPositionsTab"]').show();var height = 'calc( 100vh - '+($homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header').outerHeight(true))+'px)';}
$homepageCollapse88.find('.homepage-titles-container').css({height: height});$homepageCollapse88.find('#homepageTitle1').addClass('hidden');$homepageCollapse88.find('#homepageTitle2').addClass('hidden');$homepageCollapse88.find('#homepageTitle3').addClass('hidden');topWindow.$(topWindow.document).one('animation_manager.hide', function() {$homepageCollapse88.find('#homepageTitle1').removeClass('hidden');$homepageCollapse88.find('#homepageTitle2').removeClass('hidden');$homepageCollapse88.find('#homepageTitle3').removeClass('hidden');$homepageCollapse88.find('#readyTextLayoutsTabs').addClass('hidden');$homepageCollapse88.find('.homepage-titles-container').css({height: ''});if ( $btn.data('type') == 'textLayouts' ) {$homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header [data-tab-related="textLayoutTab"]').show();} else if ( $btn.data('type') == 'textPositions' ) {$homepageCollapse88.find('#readyTextLayoutsTabs > .i-t-header [data-tab-related="textPositionsTab"]').show();}});if ( $btn.data('type') == 'textLayouts' ) {$homepageCollapse88.find('#readyTextLayoutsTabs [data-tab="textLayoutTab"]').trigger('click');} else if ( $btn.data('type') == 'textPositions' ) {$homepageCollapse88.find('#readyTextLayoutsTabs [data-tab="textPositionsTab"]').trigger('click');}
toolBar.setPosition();} else if ( $btn.data('type') == 'fontStyle' ) {topWindow.Wizard.tabEffectHandler.designTabHandler.loadThemes('singleFontThemes',fontStyleSelector,italicSelector);topWindow.OpenWizardTab('designTab',true);topWindow.Wizard.tabEffectHandler.AnimationManager.designTab.$tab.find('.t-h-e-manual-static .text-container').text(topWindow.Wizard.tabEffectHandler.AnimationManager.designTab.$tab.find('#singleFontThemes').data('static-tab-title-text'));topWindow.Wizard.tabEffectHandler.designTabHandler.innerTabsHanler.$linkContainer.find('[data-tab="singleFontThemes"]').trigger('click');}}});var editableTitle = new S123EditableElement({$el: _.$el,disableNewLine: false,maxlength: maxlength,eventCallback: function( eventType ) {let text = _.$el.html().trim()
.replace(/<br.*?>/ig,'\n')
.replace(/&nbsp;/ig,'');if ( eventType == 'input' || eventType == 'paste' ) {$input.val(decodeEntities(text)).trigger('input',true);isTextChanged = true;} else if ( eventType == 'blur' ) {if ( isTextChanged ) {$input.trigger('change');topWindow.AutoSaveWizard(false,true);isTextChanged = false;}
if ( text.length == 0 ) {_.$el.closest('section').trigger('textRemoved',[_.$el.get(0).id]);toolBar.hide();}
_.$el.html(topWindow.HomepageTextFormat(text));$(document).trigger('s123.page.ready.homepageRandomText');}}});var resizableText = new ResizableText({$el: _.$el,$section: $('#top-section'),minFontSize: minFontSize,maxFontSize: maxFontSize,startCallBack: function( event, ui ) {_.$el.closest('section').data('text-visibility-handler').disable();},resizeCallBack: function( fontSize ) {document.documentElement.style.setProperty(fontSizeSelectorCSSVar,fontSize + 'px');document.documentElement.style.setProperty(fontSizeSelectorCSSVarInt,fontSize);toolBar.setPosition();},endCallBack: function( fontSize ) {document.documentElement.style.setProperty(fontSizeSelectorCSSVar,fontSize + 'px');document.documentElement.style.setProperty(fontSizeSelectorCSSVarInt,fontSize);topWindow.$(fontSizeSelector).val(fontSize);topWindow.AutoSaveWizard(false,true);_.$el.closest('section').data('text-visibility-handler').enable();}});};_.init();return _;};function PromoEditableTextHandler( settings ) {var _ = {$el: settings.$el};_.init = function() {var $section = _.$el.closest('section.s123-module');var id = _.$el.get(0).id.split('-').pop();var fontSize = '';var letterSpacing = '';var wordSpacing = '';var lineHeight = '';var topSpacing = '';var bottomSpacing = '';var shadow = '';var maxlength = 500;var minFontSize = 10;var maxFontSize = 200;var fontSettingName = '';switch ( id ) {case 'promoText1':fontSize = 'text1_size_custom';letterSpacing = 'text1_letter_spacing';wordSpacing = 'text1_word_spacing';lineHeight = 'text1_line_height';topSpacing = 'text1_top_space';bottomSpacing = 'text1_bottom_space';shadow = 'text1_shadow';fontSettingName = 'text1_fontFamily';break;case 'promoText2':fontSize = 'text2_size_custom';letterSpacing = 'text2_letter_spacing';wordSpacing = 'text2_word_spacing';lineHeight = 'text2_line_height';topSpacing = 'text2_top_space';bottomSpacing = 'text2_bottom_space';shadow = 'text2_shadow';fontSettingName = 'text2_fontFamily';break;case 'promoText3':fontSize = 'text3_size_custom';letterSpacing = 'text3_letter_spacing';wordSpacing = 'text3_word_spacing';lineHeight = 'text3_line_height';topSpacing = 'text3_top_space';bottomSpacing = 'text3_bottom_space';shadow = 'text3_shadow';fontSettingName = 'text3_fontFamily';maxlength = null;break;}
var resizableText = new ResizableText({$el: _.$el,$section: $section,minFontSize: minFontSize,maxFontSize: maxFontSize,initCallBack: function( resizableText ) {var $tmpHelper = _.$el.clone();$('body').append($tmpHelper);resizableText.$wrapper.css('margin-top',$tmpHelper.css('margin-top'));resizableText.$wrapper.css('margin-bottom',$tmpHelper.css('margin-bottom'));$tmpHelper.remove();},startCallBack: function( event, ui ) {},resizeCallBack: function( size ) {$section.data('text-visibility-handler').setPosition(_.$el);toolBar.setPosition();},endCallBack: function( size ) {_.$el.css({fontSize: size + 'px'});updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[fontSize]: size});_.$el.closest('section').trigger('resizableText.end',[_.$el,size]);}});var toolBar = new S123ToolBar({$el: _.$el,optionsList: ['weight','italic','fontStyle','fontResizing','textMargins','textPositions','textShadow'],initCallback: function( toolBar ) {var fontResizing = new S123PopOverSliders({$el: toolBar.$toolBar.find('[data-type="fontResizing"]'),popoverSettings: {placement: 'auto top'},slidersArray: [{type: 'textSize',label: translations.s123ToolBar.textSize,tooltip: '',design: 'oneLine',getValue: function() {return parseInt(_.$el.css('font-size'));},numberKind: 1,minValue: minFontSize,maxValue: maxFontSize,callback: function( event, value, isLive ) {_.$el.css({fontSize: value + 'px'});if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[fontSize]: value});}}},{type: 'letterSpacing',label: translations.s123ToolBar.letterSpacing,tooltip: '',design: 'oneLine',getValue: function() {return parseInt(_.$el.css('letter-spacing'));},numberKind: 1,minValue: -5,maxValue: 10,callback: function( event, value, isLive ) {_.$el.css({letterSpacing: value + 'px'});if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[letterSpacing]: value});}}},{type: 'wordSpacing',label: translations.s123ToolBar.wordSpacing,tooltip: '',design: 'oneLine',getValue: function() {return parseInt(_.$el.css('word-spacing'));},numberKind: 1,minValue: -5,maxValue: 10,callback: function( event, value, isLive ) {_.$el.css({wordSpacing: value + 'px'});if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[wordSpacing]: value});}}},{type: 'lineHeight',label: translations.s123ToolBar.lineHeight,tooltip: '',design: 'oneLine',getValue: function() {return ( (parseInt(_.$el.css('line-height')) * 100 / parseInt(_.$el.css('font-size'))) / 100);},numberKind: 2,minValue: 0.7,maxValue: 2,callback: function( event, value, isLive ) {_.$el.css({lineHeight: value});if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[lineHeight]: value});}}}],showCallback: function() {toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});var $html = $('<div class="form-group"></div>');var s123PopOver = new S123PopOver({$el: toolBar.$toolBar.find('[data-type="textShadow"]'),popoverSettings: {placement: 'auto top',content: $html},showCallback: function() {(function() {$html.find('.shadow-controller').remove();var html = '';html += '<div class="shadow-controller">';html += '<label>' + S123.escapeHtml(translations.s123ToolBar.textShadow) + '</label>';html += '<div class="shadow-controller">';html += '<a href="#" data-value="">A</a>';html += '<a href="#" data-value="shadow1" class="shadow1">A</a>';html += '<a href="#" data-value="shadow2" class="shadow2">A</a>';html += '<a href="#" data-value="shadow3" class="shadow3">A</a>';html += '<a href="#" data-value="shadow4" class="shadow4">A</a>';html += '</div>';html += '</div>';$html.append(html);$html.find('.shadow-controller a').each(function( inex, el ) {var $this = $(this);if ( _.$el.hasClass($this.data('value')) ) {$this.siblings().removeClass('active');$this.addClass('active');return false;}});$html.find('.shadow-controller').off('click').on('click', 'a', function( event ) {event.preventDefault();var $this = $(this);$this.siblings().removeClass('active');$this.addClass('active');_.$el.removeClass(function (index, className) {return (className.match (/(^|\s)shadow\S+/g) || []).join(' ');});_.$el.addClass($this.data('value'));toolBar.manualActiveHandler('textShadow',$this.data('value').length > 0);updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[shadow]: $this.data('value')});});})();toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});(function() {var $el = _.$el;if ( resizableText.$wrapper ) {$el = resizableText.$wrapper;}
var textMargins = new S123PopOverSliders({$el: toolBar.$toolBar.find('[data-type="textMargins"]'),popoverSettings: {placement: 'auto top'},slidersArray: [{type: 'topSpacing',label: translations.s123ToolBar.topSpacing,tooltip: '',design: 'oneLine',getValue: function() {return parseInt($el.css('margin-top'));},numberKind: 1,minValue: 0,maxValue: 200,callback: function( event, value, isLive ) {$el.css({marginTop: value + 'px'});toolBar.manualActiveHandler('textMargins',parseInt(value) > 0);if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[topSpacing]: value});}}},{type: 'bottomSpacing',label: translations.s123ToolBar.bottomSpacing,tooltip: '',design: 'oneLine',getValue: function() {return parseInt($el.css('margin-bottom'));},numberKind: 1,minValue: 10,maxValue: 200,callback: function( event, value, isLive ) {$el.css({marginBottom: value + 'px'});toolBar.manualActiveHandler('textMargins',parseInt(value) > 10);if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[bottomSpacing]: value});}}}],showCallback: function() {toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});})();},showCallback: function() {toolBar.manualActiveHandler('weight',_.$el.hasClass('weight700'));toolBar.manualActiveHandler('italic',_.$el.hasClass('italic'));toolBar.manualActiveHandler('textShadow',_.$el.is('[class*="shadow"]'));(function() {var $el = _.$el;if ( resizableText.$wrapper ) {$el = resizableText.$wrapper;}
var hasMargins = false;if ( parseInt($el.css('margin-top')) > 0 ) {hasMargins = true;}
if ( parseInt($el.css('margin-bottom')) > 10 ) {hasMargins = true;}
toolBar.manualActiveHandler('textMargins',hasMargins);})();if ( !topWindow.Wizard.promoFonts.isItalicSupported(fontSettingName,$section.data('module-id')) ) {toolBar.disableOption('italic');toolBar.getOptionButton('italic').tooltip({title: translations.italic.notSupported,container: 'body',placement: 'auto'});} else {toolBar.getOptionButton('italic').tooltip('destroy');toolBar.enableOption('italic');}},clickCallback: function( $btn ) {var fontSizeSettingName = '';var fontWeightSettingName = '';var italicSettingName = '';switch ( id ) {case 'promoText1':fontSizeSettingName = 'text1_size_custom';fontWeightSettingName = 'text1_weight';italicSettingName = 'text1_fontStyle';break;case 'promoText2':fontSizeSettingName = 'text2_size_custom';fontWeightSettingName = 'text2_weight';italicSettingName = 'text2_fontStyle';break;case 'promoText3':fontSizeSettingName = 'text3_size_custom';fontWeightSettingName = 'text3_weight';italicSettingName = 'text3_fontStyle';break;}
if ( $btn.data('type') == 'weight' ) {var settingNameAjax = fontWeightSettingName;if ( _.$el.hasClass('weight700') ) {_.$el.removeClass('weight700').addClass('weight400');var settingVal = 'weight400';} else {_.$el.removeClass('weight400').addClass('weight700');var settingVal = 'weight700';}} else if ( $btn.data('type') == 'italic' ) {var settingNameAjax = italicSettingName;if ( _.$el.hasClass('italic') ) {var settingVal = '';_.$el.removeClass('italic');} else {var settingVal = 'italic';_.$el.addClass('italic');}} else if ( $btn.data('type') == 'textPositions' ) {topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$section.data('moduleId')+'"]').closest('li').data('open-tool','text-position');openItemEditModal($section.data('moduleId'),$section.data('moduleTypeNum'),'',null);return;} else if ( $btn.data('type') == 'fontStyle' ) {var $this = $(this);topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$section.data('module-id')+'"]').closest('li').data('open-tool','font-themes');openItemEditModal($section.data('module-id'),$section.data('module-type-num'),'',function( $iframe ) {var frameWindow = $iframe.get(0).contentWindow;frameWindow.showFontThemes(fontSettingName,function( newTheme ) {topWindow.Wizard.promoFonts.save($section.data('module-id'),fontSettingName,newTheme);if ( !newTheme.italic && frameWindow.$('#'+italicSettingName).val() == 'italic' ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[italicSettingName]: ''});}});});return;}
clearTimeout(_.$el['updateDelay_'+$btn.data('type')]);_.$el['updateDelay_'+$btn.data('type')] = setTimeout(function() {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[settingNameAjax]: settingVal});},500);}});var editableText = new S123EditableElement({$el: _.$el,disableNewLine: false,maxlength: maxlength,eventCallback: function( eventType ) {if ( eventType == 'blur' && _.$el.text().trim().length == 0 ) {_.$el.hide();$section.trigger('textRemoved',[_.$el.get(0).id]);toolBar.hide();} else if ( eventType == 'input' || eventType == 'paste' ) {clearTimeout(_.$el.inputFinished);_.$el.inputFinished = setTimeout(function() {let text = _.$el.html().trim()
.replace(/<br.*?>/ig,'\n')
.replace(/&nbsp;/ig,'');var settingNameAjax = '';switch( id ) {case 'promoText1':settingNameAjax = 'text1';break;case 'promoText2':settingNameAjax = 'text2';break;case 'promoText3':settingNameAjax = 'text3';break;}
updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{[settingNameAjax]: decodeEntities(text)});},300);}}});};_.init();return _;};function TextVisiblityHandler( settings ) {var _ = {$section: settings.$section,$elements: settings.$elements,isHomepage: settings.isHomepage,$toolBar: {},textOrder: settings.textOrder,};_.init = function() {_.$elements.each(function( index, el ) {var $this = $(this);$this.off('mouseenter.textVisiblityHandler').on('mouseenter.textVisiblityHandler', function( event ) {_.hideAllToolBars();if ( _.$toolBar[$this.get(0).id].hasClass('disabled') ) return;if ( $('html').hasClass('disable-inline-wizard') ) return;_.$toolBar[$this.get(0).id].addClass('active');_.setPosition($this);clearTimeout(_.$toolBar[$this.get(0).id].hideDelay);$this.off('mouseout.textVisiblityHandler').one('mouseout.textVisiblityHandler', function( event ) {clearTimeout(_.$toolBar[$this.get(0).id].hideDelay);_.$toolBar[$this.get(0).id].hideDelay = setTimeout(function() {_.hide($this.get(0).id);},100);});disableEnableControllers($this);});_.$section.off('textRemoved.TextVisiblityHandler.removeText').on('textRemoved.TextVisiblityHandler.removeText', function( event, elementID ) {_.$elements.each(function(index, el) {if ( elementID != $(this).get(0).id ) return;$(this).empty();});});addController($this);});_.$section.data('text-visibility-handler',_);};_.hideAllToolBars = function() {$.each(_.$toolBar, function(index, $el) {_.hide($el.data('rel'));});};_.hide = function( id ) {_.$toolBar[id].tooltip('hide');_.$toolBar[id].removeClass('active');};_.enable = function( id ) {if ( id ) {_.$toolBar[id].removeClass('disabled');} else {$.each(_.$toolBar, function(index, $el) {$el.removeClass('disabled');});}};_.disable = function( id ) {if ( id ) {_.$toolBar[id].addClass('disabled');} else {$.each(_.$toolBar, function(index, $el) {$el.addClass('disabled');});}};_.setPosition = function( $el ) {var $controller = _.$toolBar[$el.get(0).id];var offset = $el.get(0).getBoundingClientRect();var top = offset.top + $(window).scrollTop();var isRtl = $('html[dir="rtl"]').length > 0;var outlineOffSet = {x: 7,y: 7};if ( $el.closest('.s123-resizable').length > 0 ) {outlineOffSet.x = -15;}
if ( isRtl ) {offset.left -= getScrollbarWidth();}
$controller.css({top: (top + offset.height - ($controller.outerHeight(true) / 2)) + outlineOffSet.y});var textAlign = $el.css('text-align');if ( textAlign != 'left' && textAlign != 'right' && textAlign != 'center' ) {textAlign = $('html[dir="rtl"]').length > 0 ? 'right' : 'left';}
if ( textAlign == 'center' ) {if ( isRtl ) {$controller.css({left: offset.left - outlineOffSet.x,});} else {$controller.css({left: offset.right - $controller.outerWidth(true) + outlineOffSet.x,});}} else if ( textAlign == 'left' ) {$controller.css({left: offset.right - $controller.outerWidth(true) + outlineOffSet.x,});} else if ( textAlign == 'right' ) {$controller.css({left: offset.left - outlineOffSet.x});}};function disableEnableControllers( $el ) {var $controller = _.$toolBar[$el.get(0).id];var $addNew = $controller.find('.add-text');var $remove = $controller.find('.remove-text');var title = '';var isDisabled = true;$addNew.tooltip('destroy');$remove.tooltip('destroy');_.$elements.each(function(index, el) {if ( $(this).text().length == 0 ) {isDisabled = false;return false;}});if ( isDisabled ) {title = translations.textVisibilityHanlder.addNewTitleTooltipDisabled;$addNew.addClass('disabled');} else {title = translations.textVisibilityHanlder.addNewTitleTooltip;$addNew.removeClass('disabled');}
$addNew.tooltip({title: title,container: 'body',placement: 'top',trigger: 'hover',delay: {show: 2000,hide: 0}});$remove.tooltip({title: translations.textVisibilityHanlder.removeTitleTooltip,container: 'body',placement: 'top',trigger: 'hover',delay: {show: 2000,hide: 0}});}
function addController( $el ) {var html = '';html += '<div class="previewManageButton t-v-handler-tools" data-style="round" data-rel="' + $el.get(0).id + '">';html += '<a class="p-m-b-design add-text" href="#">';html += '<i class="fa fa-plus"></i>';html += '</a>';html += '<a class="p-m-b-design remove-text" href="#">';html += '<i class="fa fa-trash"></i>';html += '</a>';html += '</div>';var $html = $(html);$html.off('click.textVisiblityHandler').on('click.textVisiblityHandler','a',function( event ) {event.preventDefault();var $this = $(this);if ( $this.hasClass('disabled')) return;_.hide($el.get(0).id);if ( $this.hasClass('add-text') ) {_.$elements.each(function(index, el) {var $this = $(this);if ( $this.text().length == 0 ) {$this.show().text(translations.textVisibilityHanlder.newTitle).trigger('input');placeCaretAtEnd($this.get(0));_.$section.trigger('resetTextStyles',[$this]);_.$section.trigger('textAdded',[$this.get(0).id]);return false;}});} else if ( $this.hasClass('remove-text') ) {_.$section.trigger('textRemoved.TextVisiblityHandler.removeText',[$el.get(0).id]);$el.trigger('input').trigger('blur');_.$section.trigger('textRemoved',[$el.get(0).id]);}
disableEnableControllers($el);});$html.off('mouseout.textVisiblityHandler').on('mouseout.textVisiblityHandler', function( event ) {event.stopPropagation();clearTimeout(_.$toolBar[$el.get(0).id].hideDelay);_.$toolBar[$el.get(0).id].hideDelay = setTimeout(function() {_.hide($el.get(0).id);},100);});$html.off('mouseover.textVisiblityHandler').on('mouseover.textVisiblityHandler', function( event ) {event.stopPropagation();clearTimeout(_.$toolBar[$el.get(0).id].hideDelay);});_.$toolBar[$el.get(0).id] = $html;$('body').append($html);}
_.init();return _;}
function SectionMainTextBtn( settings ) {var _ = {$section: settings.$section,$elements: settings.$elements,$container: settings.$container,isHomepage: settings.isHomepage};_.init = function() {_.$controller = $(generateHtml());_.$controller.tooltip('destroy');_.$controller.tooltip({title: translations.sectionMainTextBtn.addTextTooltip,container: 'body',placement: 'top'});_.$controller.off('click.SectionMainTextBtn').on('click.SectionMainTextBtn','a',function( event ) {event.preventDefault();_.$section.trigger('textAdded',[_.$elements.first().get(0).id]);_.$section.trigger('resetTextStyles',[_.$elements.first()]);_.$elements.first().show().text(translations.textVisibilityHanlder.newTitle).trigger('input');placeCaretAtEnd(_.$elements.first().get(0));});_.$container.prepend(_.$controller);_.$section.off('textAdded.SectionMainTextBtn').on('textAdded.SectionMainTextBtn', function( event ) {_.setState('disabled');});_.$section.off('textRemoved.SectionMainTextBtn').on('textRemoved.SectionMainTextBtn', function( event ) {if ( hasNoTexts() ) {_.setState('active');}});if ( hasNoTexts() ) {_.setState('active');}
if ( _.isHomepage ) {_.$elements.each(function( index, el ) {var $this = $(this);topWindow.$('#'+$this.get(0).id).off('input.SectionMainTextBtn').on('input.SectionMainTextBtn', function() {clearInterval(_.delay);_.delay = setTimeout(function() {if ( hasNoTexts() ) {_.setState('active');}},500);});});}
_.$section.addClass('s-m-t-b');};_.setState = function( state ) {_.$section.attr('data-s-m-t-b',state);};function generateHtml() {var html = '';html += '<div class="previewManageButton section-main-text-btn" data-rel="' + _.$section.get(0).id + '">';html += '<a class="p-m-b-design remove-text" href="#">';html += '<i class="fa fa-plus"></i>&nbsp;' + S123.escapeHtml(translations.sectionMainTextBtn.addText);html += '</a>';html += '</div>';return html;}
function hasNoTexts() {var noTexts = true;_.$elements.each(function() {if ( _.isHomepage ) {if ( $(this).is(':visible') ) {noTexts = false;return false;}} else {if ( $(this).html().length > 0 ) {noTexts = false;return false;}}});return noTexts;}
_.init();return _;}
return _;}();homepageAndPromoEditor.init();function convertSloganToEditable( $slogan, moduleTypeNUM, moduleID ) {var editableSlogan = new S123EditableElement({$el: $slogan,disableNewLine: false,maxlength: 500,eventCallback: function( eventType ) {if ( eventType == 'focus' ) {$slogan.data('slogan',$slogan.html());} else if ( eventType == 'blur' ) {if ( $slogan.data('slogan') != $slogan.html() ) {var slogan = $slogan.html().trim()
.replace(/<br.*?>/ig,'\n');topWindow.savePageSlogan(moduleTypeNUM,moduleID,decodeEntities(slogan),false);}}}});OutlineHandler.register($slogan);OutlineHandler.refresh();S123ResizeObserver.refresh();var s123FloatingBar = new S123FloatingBar({$el: $slogan,template: '<div class="previewManageButton" data-header-style="'+topWindow.$('#page_header_style').val()+'"><a href="#" class="p-m-b-design remove-slogan"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" class="svg-inline--fa fa-trash fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></svg></a></div>',
placement: 'bottom',type: 'moduleSlogan',showCallback: function( instance ) {instance.$html.find('.remove-slogan').tooltip({title: translations.S123FloatingBar.removeSloganTolltip,container: 'body',placement: 'auto',delay: {show: 2000,hide: 0}});instance.$html.find('.remove-slogan').on('click', function( event ) {event.preventDefault();instance.$html.find('.remove-slogan').tooltip('destroy');removeSlogan();});}});$(document).on('removeSlogan.'+moduleID, function() {removeSlogan();});function removeSlogan() {$slogan.empty();topWindow.savePageSlogan(moduleTypeNUM,moduleID,'',false);s123FloatingBar.destroy();editableSlogan.destroy();OutlineHandler.destroy($slogan.get(0).id);$(document).off('removeSlogan.'+moduleID);}}
function placeCaretAtEnd( el ) {el.focus();if (typeof window.getSelection != "undefined"
&& typeof document.createRange != "undefined") {var range = document.createRange();range.selectNodeContents(el);range.collapse(false);var sel = window.getSelection();sel.removeAllRanges();sel.addRange(range);} else if (typeof document.body.createTextRange != "undefined") {var textRange = document.body.createTextRange();textRange.moveToElementText(el);textRange.collapse(false);textRange.select();}}
$(document).off('wizard.preview.device.changed.previewHelper').on('wizard.preview.device.changed.previewHelper', function( event, deviceType ) {$('[data-s123-editable-elements="true"]').each(function() {var $el = $(this);if ( deviceType != 'computer' ) {$el.data('s123-editable-elements').disable();} else {$el.data('s123-editable-elements').enable();}});});})();(function () {var $global_contact_details_container = $('#popupFloatDivSearch').find('.global-contact-details-container');if ( $global_contact_details_container.length === 0 ) return;$global_contact_details_container.find('a').off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {event.preventDefault();});$global_contact_details_container.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {if ( topWindow.$('#collapseHeaderOptionsEnterPhoneNumber > a').length === 0 ) return;topWindow.$('#collapseHeaderOptionsEnterPhoneNumber > a').trigger('click');});})();(function () {$('.contact-as-details-container').each( function( index ) {var $contact_as_details_container = $(this);$contact_as_details_container.find('a')
.attr('data-allow-external-link','true') // prevent from the external links alert to be shown
.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {event.preventDefault();});$contact_as_details_container.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {$contact_as_details_container.closest('section').find('.previewManageButton a.edit').trigger('click');});});})();(function () {$('.social-details-container').each( function( index ) {var $social_details_container = $(this);var $homepage_goal = $social_details_container.closest('.homepage_goal');$social_details_container.find('a')
.attr('data-allow-external-link','true') // prevent from the external links alert to be shown
.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {event.preventDefault();});if ( $homepage_goal.length > 0 ) {$homepage_goal.find('.p-m-b-floating-menu-btn[data-type="edit"]')
.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {if ( topWindow.$('#showSocialEditButtonForHeader').length === 0 ) return;topWindow.$('#showSocialEditButtonForHeader').trigger('click');});} else {$social_details_container
.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {if ( topWindow.$('#showSocialEditButtonForHeader').length === 0 ) return;topWindow.$('#showSocialEditButtonForHeader').trigger('click');});}});})();(function () {$('.upgrade-website-preview-helper').each( function( index ) {var $upgrade_website_preview_helper = $(this);$upgrade_website_preview_helper.find('a')
.attr('data-allow-external-link','true') // prevent from the external links alert to be shown
.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {event.preventDefault();});$upgrade_website_preview_helper.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {if ( topWindow.$('#upgradePackage').length === 0 ) return;topWindow.$('#upgradePackage').data('upgrade-reason','upgrade-website-preview-helper').modal('show');});});})();(function () {$(document).off('S123MagicButton.initialized.preview_helpers').on('S123MagicButton.initialized.preview_helpers', function( event, type ) {addFloatingMenu({type: 'magicButton',$element: $('.all-magic-buttons')});if ( type == 'contact' ) {addFloatingMenuBtn($('.all-magic-buttons .p-m-b-floating-menu[data-type="magicButton"]'),{type: type,text: translations.magicBtn.editMagicContactButton,click: function( event ) {topWindow.Wizard.magicContactButton.popup.show();}},true);} else if ( type == 'share' ) {addFloatingMenuBtn($('.all-magic-buttons .p-m-b-floating-menu[data-type="magicButton"]'),{type: type,text: translations.magicBtn.editMagicShareButton,click: function( event ) {topWindow.Wizard.magicShareButton.popup.show();}},true);}
OutlineHandler.register($('.all-magic-buttons'));OutlineHandler.refresh();(function() {$(document).off('wizard.preview.device.changed.magicButton').on('wizard.preview.device.changed.magicButton', function( event ) {showHideHelpers();});showHideHelpers();function showHideHelpers() {if ( topWindow.Wizard.Preview.Scale.mode == 'mobile' ) {$('.all-magic-buttons .p-m-b-floating-menu').addClass('hidden');OutlineHandler.destroy($('.all-magic-buttons').get(0).id);} else {$('.all-magic-buttons .p-m-b-floating-menu').removeClass('hidden');OutlineHandler.register($('.all-magic-buttons'));}}})();});})();(function () {ModuleItemsOutlineHandler.init();})();(function() {if ( !IsHomepage() && !IsRichPage() ) return;var modulesOrder = [];if ( IsRichPage() ) {topWindow.Wizard.Pages.listParent.find('li[data-parent-id="'+$('.s123-module-rich-page').data('module-id')+'"]').each(function( index, page ) {var $page = $(page);modulesOrder.push($page.data('moduleid'));});} else if ( (IsHomepage() && !IsRichPage()) ) {topWindow.Wizard.Pages.listParent.find('li[data-parent-id=""]').each(function( index, page ) {var $page = $(page);if ( $page.data('module-mp-show-in-home') != 1 ) return;modulesOrder.push($page.data('moduleid'));});}
if ( IsRichPage() ) {var isPromoFirst = true;modulesOrder = modulesOrder.filter(function( moduleID, index ) {var $module = topWindow.Wizard.Pages.getPage(moduleID);if ( isPromoFirst && ($module.data('moduletypenum') == 1000 || $module.data('moduletypenum') == 167) ) {return false;}
if ( $module.data('moduletypenum') != 1000 && $module.data('moduletypenum') != 167 ) {isPromoFirst = false;}
return true;});}
$('section.s123-module').each(function( index, page ) {var $section = $(this);var moduleID = $section.data('module-id');var moduleTypeNUM = $section.data('module-type-num');if ( $section.hasClass('s123-module-rich-page') ) {if ( $section.attr('data-sections-amount') == 0 ) {var $previewManageButton = $('<div class="previewManageButton" data-type="richpageEmptySction"></div>');addFloatingMenu({type: 'richpageEmptySction',$element: $previewManageButton,buttons: [{text: translations.sectionManager.addNewSection,click: function( event ) {event.preventDefault();addNewSectionButtonClickEvent('after',null,moduleID,$(event.target));}},{text: translations.sectionManager.removeModule,classList: 'delete',customAttributes: 'data-module-id="' + moduleID + '"'}]});$section.append($previewManageButton);}
return;}
$section.removeClass('first-section');$section.removeClass('last-section');if ( modulesOrder.length == 0 ) {$section.addClass('first-section');$section.addClass('last-section');} else {if ( modulesOrder.indexOf(moduleID) == 0 ) {$section.addClass('first-section');}
if ( modulesOrder.indexOf(moduleID) == modulesOrder.length - 1 ) {$section.addClass('last-section');}}
if ( $section.find('.previewManageButton.right-side-btns').length == 0 ) {var html = '';html += '<div class="previewManageButton right-side-btns"></div>';var $btnsContainer = $(html);$section.append($btnsContainer);if ( modulesLimitedToOne.indexOf(moduleTypeNUM) == -1 ) {var duplicateModule = new DuplicateModule({moduleID: moduleID,moduleTypeNUM: moduleTypeNUM,$btnsContainer: $btnsContainer});}
var sortableSections = new S123SortableSections({$section: $section,$btnsContainer: $btnsContainer});if ( moduleTypeNUM == 159 ) {WidgetsAdmin.init();WRH.init();WidgetsManagers.managers[$section.data('module-id')] = new WidgetManager({$section: $section,moduleID: $section.data('module-id'),moduleTypeNUM: $section.data('module-type-num'),$json: $section.find('.widgets-settings'),$btnsContainer: $btnsContainer});}} else {$section.find('.s123-sortable').data('s123-sortable').disableEnableSortingIcon();}
var $module = topWindow.Wizard.Pages.getPage(moduleID);addNewSectionButton($section,$module.data('parent-id'));});addNewSectionButton($('section#top-section'),'');$('.s123-module[data-module-type-num="1000"]').each(function() {var $section = $(this);var $minHeight = $section.find('[data-action="minHeight"]');var $container = $section.find('.promo-container');var $promoTextWidth = $container.find('.start');var $promoGoalsWidth = $container.find('.end');if ( $minHeight.hasClass('s123-p') ) return;var promoMinHeight = null;var promoTextWidth = null;var promoPadding = null;var content = '';content += '<div>';content += '<div class="sliders-container"></div>';content += '<div class="custom-padding"></div>';content += '</div>';var $content = $(content);var promoSizing = new S123PopOver({$el: $minHeight,customClass: 'homepage-sizing',popoverSettings: {content: $content,placement: $('html').attr('dir') === 'rtl' ? 'left' : 'right'},showCallback: function() {promoMinHeight = new S123Slider({label: translations.sectionManager.sectionMinHeight + ' (%)',tooltip: '',design: 'oneLine',getValue: function() {return Math.ceil(( parseInt($container.css('min-height')) * 100 ) / $(window).height());},type: 'promoMinHeight',numberKind: 1,minValue: 1,maxValue: 100,callback: function( event, value, isLive ) {$section.addClass('has-custom-height');$container.css({minHeight: value + 'vh'});if ( !isLive ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{customHeight: value});}}});promoTextWidth = new S123Slider({label: translations.promoWidth.textSideWidth + ' (%)',tooltip: '',design: 'oneLine',getValue: function() {return parseInt($promoTextWidth.data('width'));},type: 'promoTextWidth',numberKind: 1,minValue: 20,maxValue: 80,startCallback: function( event ) {$(document).trigger('S123Resize.start');},callback: function( event, newWidth, isLive ) {$promoTextWidth.data('width',newWidth);$promoTextWidth.css({width: newWidth + '%'});$promoGoalsWidth.css({width: (100 - newWidth) + '%'});if ( !isLive ) {$(document).trigger('s123.page.ready.refreshParallaxImages');$(document).trigger('homepageAndPromoEditor.refreshResizable',['promo',$section.data('module-id')]);updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{widthSize_start: newWidth});}}});promoPadding = new S123SectionPadding({paddingTop: $container.data('custom-padding-top'),paddingBottom: $container.data('custom-padding-bottom'),calculatePadding: function( type ) {if ( $section.hasClass('twoSideCallAction') ) {if ( type == 'top' ) {return (parseInt($container.css('padding-top')) + parseInt($container.find('.end').css('padding-top')));} else if ( type == 'bottom') {return (parseInt($container.css('padding-bottom')) + parseInt($container.find('.end').css('padding-bottom')));}} else {if ( type == 'top' ) {return parseInt($container.css('padding-top'));} else if ( type == 'bottom') {return parseInt($container.css('padding-bottom'));}}},currentTab: $section.hasClass('custom-padding') ? 'custom': 'auto',tabShowCallback: function( type, paddingTop, paddingBottom ) {if ( type == 'custom' ) {$container.css({paddingTop: paddingTop + 'px',paddingBottom: paddingBottom + 'px'});updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{paddingType: 'custom',paddingTop: paddingTop,paddingBottom: paddingBottom,},false);$section.addClass('custom-padding');} else if ( type == 'auto' ) {$section.removeClass('custom-padding');$container.css({paddingTop:'',paddingBottom: ''});updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{paddingType: 'auto'});}
$(document).trigger('S123PopOver.reposition');$(document).trigger('s123.page.ready.refreshParallaxImages');showHideAddNewSection($section,parseInt($container.css('padding-bottom')));},changeCallback: function( type, newValue ) {if ( type == 'paddingTop' ) {$container.css({paddingTop: newValue + 'px'});$container.data('custom-padding-top',newValue);} else {$container.css({paddingBottom: newValue + 'px'});$container.data('custom-padding-bottom',newValue);}
showHideAddNewSection($section,parseInt($container.css('padding-bottom')));},finishTypingCallback: function( type, newValue ) {if ( type == 'paddingTop' ) {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{paddingTop: newValue});} else {updateMultipleSettings($section.data('module-id'),$section.data('module-type-num'),{paddingBottom: newValue});}
$(document).trigger('s123.page.ready.refreshParallaxImages');}});$content.find('.sliders-container').append(promoMinHeight.$el);$content.find('.sliders-container').append(promoTextWidth.$el);$content.find('.custom-padding').html(promoPadding.$html);promoTextWidth.$el.hide();if ( $section.hasClass('twoSideCallAction') ) {promoTextWidth.$el.show();}
if ( $section.find('.promoImageInline').length == 0 ) {promoPadding.setTab('auto');promoPadding.disable();} else {promoPadding.enable();}},hiddenCallback: function() {promoMinHeight.destroy();promoTextWidth.destroy();}});showHideAddNewSection($section,parseInt($container.css('padding-bottom')));});if ( !IsRichPage() ) {var $homepage = $('#top-section');var $magic_homepage = $homepage.children('.magic_homepage');var $hmlMinHeight = $homepage.find('[data-action="hmlMinHeight"]');if ( $hmlMinHeight.hasClass('s123-p') ) return;var homepageMinHeight = null;var homepageTextWidth = null;var homepagePadding = null;var content = '';content += '<div>';content += '<div class="sliders-container"></div>';content += '<div class="custom-padding"></div>';content += '</div>'
var $content = $(content);var s123PopOver = new S123PopOver({$el: $hmlMinHeight,customClass: 'homepage-sizing',popoverSettings: {content: $content,placement: $('html').attr('dir') === 'rtl' ? 'left' : 'right'},showCallback: function() {homepageMinHeight = new S123Slider({label: translations.sectionManager.sectionMinHeight + ' (%)',tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$('#homepage_layout_height').val();},type: 'hmMinHeight',numberKind: 1,minValue: 50,maxValue: 100,callback: function( event, value, isLive ) {document.documentElement.style.setProperty('--homepage_layout_height_vh', value+'vh');if ( !isLive ) {topWindow.$('#homepage_layout_height').val(value).trigger('change');}}});homepageTextWidth = new S123Slider({label: translations.homepageWidth.textSideWidth + ' (%)',tooltip: '',design: 'oneLine',getValue: function() {return topWindow.$('#layout_left_side_width').val();},type: 'hmTextWidth',numberKind: 1,minValue: 20,maxValue: 80,startCallback: function( event ) {$(document).trigger('S123Resize.start');},callback: function( event, value, isLive ) {topWindow.$('#layout_left_side_width').val(value).trigger('input');if ( !isLive ) {$(document).trigger('s123.page.ready.refreshParallaxImages');$(document).trigger('homepageAndPromoEditor.refreshResizable',['homepage']);}}});homepagePadding = new S123SectionPadding({paddingTop: topWindow.$('#homepage_padding_top').val(),paddingBottom: topWindow.$('#homepage_padding_bottom').val(),calculatePadding: function( type ) {if ( type == 'top' ) {if ( $.isNumeric(topWindow.$('#homepage_padding_top').val()) ) {return topWindow.$('#homepage_padding_top').val();} else {return 50;}} else if ( type == 'bottom' ) {var style = getComputedStyle(document.body);if ( $.isNumeric(topWindow.$('#homepage_padding_bottom').val()) ) {return topWindow.$('#homepage_padding_bottom').val();} else {return 50 + parseInt(style.getPropertyValue('--homepage_layout_height_opacity_space_top')) + parseInt(style.getPropertyValue('--homepage_layout_height_opacity_space_bottom'));}}},currentTab: topWindow.$('#homepage_padding_type').val(),tabShowCallback: function( type ) {if ( type == 'custom' ) {$('#top-section').addClass('custom-padding');} else if ( type == 'auto' ) {$('#top-section').removeClass('custom-padding');}
topWindow.$('#homepage_padding_type').val(type);$(document).trigger('S123PopOver.reposition');$(document).trigger('s123.page.ready.refreshParallaxImages');showHideAddNewSection($homepage,parseInt($magic_homepage.css('padding-bottom')));},changeCallback: function( type, newValue ) {if ( type == 'paddingTop' ) {document.documentElement.style.setProperty('--homepage_padding_top',newValue+'px');topWindow.$('#homepage_padding_top').val(newValue);} else {document.documentElement.style.setProperty('--homepage_padding_bottom',newValue+'px');topWindow.$('#homepage_padding_bottom').val(newValue);}
showHideAddNewSection($homepage,parseInt($magic_homepage.css('padding-bottom')));},saveCallback: function() {topWindow.AutoSaveWizard(false,true);$(document).trigger('s123.page.ready.refreshParallaxImages');}});$content.find('.sliders-container').append(homepageMinHeight.$el);$content.find('.sliders-container').append(homepageTextWidth.$el);$content.find('.custom-padding').html(homepagePadding.$html);$hmlMinHeight.tooltip('hide');homepageTextWidth.$el.hide();if ( topWindow.$('#homepage_layout_kind').val() == '2' || topWindow.$('#homepage_layout_kind').val() == '3' ) {homepageTextWidth.$el.show();homepagePadding.hide();} else if ( topWindow.$('#homepage_goal_type').val() != 'no' && (topWindow.$('#homepage_goal_place').val() == 'right' || topWindow.$('#homepage_goal_place').val() == 'left') ) {homepageTextWidth.$el.show();homepagePadding.show();}
$magic_homepage.addClass('live-min-height-bug-fix');if ( topWindow.$('#homepage_goal_type').val() == 'image' ) {homepagePadding.enable();} else {homepagePadding.setTab('auto');homepagePadding.disable();}},hideCallback: function() {$magic_homepage.removeClass('live-min-height-bug-fix');},hiddenCallback: function() {homepageMinHeight.destroy();homepageTextWidth.destroy();$magic_homepage.removeClass('live-min-height-bug-fix');}});showHideAddNewSection($homepage,parseInt($magic_homepage.css('padding-bottom')));}
function showHideAddNewSection( $section, paddingBottom ) {var $addSectionAfter = $section.find('.p-s-m');$addSectionAfter.removeClass('hidden');var btnHeight = $addSectionAfter.height();if ( !$section.hasClass('custom-padding') ) return;if ( paddingBottom < btnHeight ) {$addSectionAfter.addClass('hidden');} else if ( paddingBottom > btnHeight ) {$addSectionAfter.removeClass('hidden');}}
function addNewSectionButton( $section, parentID ) {if ( $section.find('.p-s-m').length > 0 ) return;var html = '';html += '<div class="p-s-m {{position}} previewManageButton" data-style="round">';html += '<a href="#" class="p-m-b-design p-s-m-btn icon-only-tooltip" data-parent-id="'+ parentID +'" data-rel="tooltip" title="' + S123.escapeHtml(translations.sectionManager.addNewSection) + '">';html += '<i class="fa fa-plus"></i>';html += '</a>';html += '</div>';if ( $section.length > 0 && $section.get(0).id != 'top-section' ) {$section.prepend(html.replace('{{position}}','on-top'));}
$section.append(html.replace('{{position}}','on-bottom'));$section.find('.p-s-m a').on('click', function( event ) {event.preventDefault();if ( $section.length > 0 && $section.get(0).id == 'top-section' ) {var $module = topWindow.Wizard.Pages.list.first();var action = 'before';} else {var $module = topWindow.Wizard.Pages.getPage($section.data('module-id'));var action = $(this).parent().hasClass('on-top') ? 'before' : 'after';}
addNewSectionButtonClickEvent(action,$module,$module.data('parent-id'),$(this));});}
function addNewSectionButtonClickEvent( action, $module, parentID, $btn ) {topWindow.g_ManageAddModuleData = {action: action,$module: $module,parentID: parentID,isRichPage: IsRichPage()};topWindow.$('#AddModuleWin').modal('show',$btn);}})();var $previewManageButton = $('.previewManageButton');$previewManageButton.each( function( index ) {var $pmb = $(this);$pmb.find('a').off('click.p_m_buttons');switch ( $pmb.data('type') ) {case 'homepage':$pmb.find('a').hide();if ( true ) {$pmb.find('[data-action="image"]')
.on('click.p_m_buttons',function( event ) {event.preventDefault();if ( topWindow.$('#'+topWindow.Wizard.homePageChangingImages.fistInputID).val() == '' ) {topWindow.$('#backgroundOptionsTab [data-tab="backgroundColorOptionsTab"]').trigger('click');} else {topWindow.$('#backgroundOptionsTab [data-tab="backgroundMediaOptionsTab"]').trigger('click');}
expandWizardHomepage('homepageTab','#backgroundOptionsTab');})
.css({ display: 'flex' });}
$pmb.find('[data-action="layouts"]')
.on('click.p_m_buttons',function( event ) {event.preventDefault();expandWizardHomepage('homepageTab','#homepage_styles_box');})
.css({ display: 'flex' });$pmb.find('[data-action="bgSettings"]')
.on('click.p_m_buttons',function( event ) {event.preventDefault();expandWizardHomepage('homepageTab','#backgroundOptionsTab');topWindow.Wizard.homePageBgOptions.customizeHandler.$customize.find('[data-related-id="hmBgSettings"]').trigger('click');})
.css({ display: 'flex' });$pmb.find('[data-action="wizardImageTabColorsRecommended"]')
.on('click.p_m_buttons',function( event ) {event.preventDefault();expandWizardHomepage('homepageTab','#backgroundOptionsTab');topWindow.Wizard.homePageBgOptions.customizeHandler.$customize.find('[data-related-id="wizardImageTabColorsRecommended"]').trigger('click');});$pmb.find('[data-action="goals"]')
.on('click.p_m_buttons',function( event ) {event.preventDefault();topWindow.$('#homepageImageOptionsTab .hide-available-goals-tools').removeClass('hide-available-goals-tools');topWindow.$('#homepageImageOptionsTab .homepage_goal_type_box.checkboxSingleSetting').addClass('hide-available-goals-tools');topWindow.$('#homepage_goal_type_form').removeClass('showOnlyDesign showOnlySettigns');expandWizardHomepage('homepageTab','#homepageImageOptionsTab');})
.css({ display: 'flex' });if ( topWindow.$('#template').val() != '15' && topWindow.$('#template').val() != '20' ) {$pmb.find('[data-action="hmlMinHeight"]')
.css({ display: 'flex' });}
if ( topWindow.$('#homepage_layout_kind').val() == '2' || topWindow.$('#homepage_layout_kind').val() == '3' ) {$pmb.find('[data-action="wizardImageTabColorsRecommended"]').css({ display: 'flex'});} else {$pmb.find('[data-action="wizardImageTabColorsRecommended"]').hide();$pmb.addClass('col-count-2');}
if ( $('#top-section .homepage_goal[data-type="image"]').length > 0 ) {$pmb.find('[data-action="editImage"]').on('click.p_m_buttons',function( event ) {openHomepageGoalTab($('#top-section .homepage_goal[data-type="image"] .w-helper'));})
.css({ display: 'flex' });}
break;default:$pmb.find('a.edit').on('click.p_m_buttons',function() {event.preventDefault();var $this = $(this);if ( $this.data('module-type') == 1000 || $this.data('module-type') == 159 ) {topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$this.data('module-id')+'"]').closest('li').data('open-tool','background-image');}
openItemEditModal($this.data('module-id'),$this.data('module-type'),$this.data('item-unique-id'),null);});$pmb.find('a.e-c-manage').on('click.p_m_buttons',function() {event.preventDefault();var $this = $(this);topWindow.Wizard.Ecommerce.openManage($this);});$pmb.find('a.template').on('click.p_m_buttons',function() {event.preventDefault();var $this = $(this);if ( $this.data('module-type') == 1000 || $this.data('module-type') == 159 ) {topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$this.data('module-id')+'"]').closest('li').data('open-tool','templates-options');}
openItemEditModal($this.data('module-id'),$this.data('module-type'),$this.data('item-unique-id'),null);});$pmb.find('a.log-promo-template').on('click.p_m_buttons',function() {event.preventDefault();var $this = $(this);if ( $this.data('module-type') == 1000 || $this.data('module-type') == 159 ) {topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$this.data('module-id')+'"]').closest('li').data('open-tool','log-template');}
openItemEditModal($this.data('module-id'),$this.data('module-type'),$this.data('item-unique-id'),null);});$pmb.find('a.bgSettings').on('click.p_m_buttons',function() {event.preventDefault();var $this = $(this);if ( $this.data('module-type') == 1000 || $this.data('module-type') == 159 ) {topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$this.data('module-id')+'"]').closest('li').data('open-tool','background-options');}
openItemEditModal($this.data('module-id'),$this.data('module-type'),$this.data('item-unique-id'),null);});$pmb.find('.delete').each(function() {var $this = $(this) ;$this.confirmation({placement: $('html').attr('dir') === 'rtl' ? 'left' : 'right',title: translations.areYouSure,btnOkLabel: '<i class="icon-ok-sign icon-white"></i> ' + translations.yes,btnCancelLabel: '<i class="icon-remove-sign"></i> ' + translations.no,popout: true,singleton: true,container: $this.closest('section.s123-module'),btnOkClass: 'btn-danger btn-sm spacing-confirmation-btn',btnCancelClass: 'btn-default btn-sm spacing-confirmation-btn',delay: 0,onConfirm: function() {var $module = topWindow.Wizard.Pages.getPage($(this).data('module-id'));topWindow.RemoveModule($module);}});$this.on('show.bs.confirmation', function ( event ) {$(document).on('mousedown.confirmation', function ( event ) {var $target = $(event.target);if ( $target.closest('.popover.confirmation').length === 0 && !$target.hasClass('delete') ) {$this.confirmation('hide');$(document).off('mousedown.confirmation');}});});});$pmb.find('a.design').on('click.p_m_buttons',function() {event.preventDefault();var $this           = $(this);var moduleID        = $this.data('module-id');var moduleTypeNUM   = $this.data('module-type');var $wizardPage     = topWindow.Wizard.Pages.getPage(moduleID);if ( topWindow.RichPage.isChild($wizardPage) ) {topWindow.Wizard.Pages.modeManager.set('richPage',topWindow.RichPage.getParent($wizardPage).data('moduleid'),false);}
topWindow.$('.moduleSortList .designModuleButton[data-module-id="'+moduleID+'"],.moduleSortList .customDesignModuleButton[data-module-id="'+moduleID+'"]').trigger('click','wizard-preview');if ( moduleTypeNUM == '1000' || moduleTypeNUM == '159'  ) {$(document).on('promo_reset_button_type',function(event,moduleID) {updateMultipleSettings(moduleID,'1000',{isCustomButtonType: ''});});}
if ( !topWindow.modulesArr[moduleTypeNUM].custom_design ) {topWindow.OpenWizardTab('pagesTab',true);}});$pmb.find('a.customizeDesign').on('click.p_m_buttons',function() {event.preventDefault();var $this           = $(this);var moduleID        = $this.data('module-id');var $wizardPage     = topWindow.Wizard.Pages.getPage(moduleID);var modulesArrID     = $wizardPage.data('modules-arr-id');var moduleLayoutCustomizer = new topWindow.ModuleLayoutCustomizer({$container: $this,defaultData: tryParseJSON(topWindow.modulesArr[modulesArrID]['layout_customize']),moduleID: moduleID,style: modulesArrID,translations: topWindow.translations.layoutCustomizer,popoverPlacement: $('html[dir=rtl]').length == topWindow.$('html[dir=rtl]').length ? 'intrface_align_reverse' : 'intrface_align',onChange: function( newlayoutSetting ) {topWindow.g_ManageModuleID = moduleID;var moduleSetting = topWindow.GetModuleSetting(topWindow.g_ManageModuleID,'settings');moduleSetting = tryParseJSON(moduleSetting);if ( !moduleSetting ) {moduleSetting = {layout_customize: newlayoutSetting};} else {moduleSetting.layout_customize = newlayoutSetting;}
$('body').trigger('mousedown.preview.styleCustomizerPopover');topWindow.EditModuleSetting(topWindow.g_ManageModuleID,'settings',JSON.stringify(moduleSetting));topWindow.BuildToolJSON();topWindow.AutoSaveWizard(true,true);}});});if ( $pmb.find('a.edit-image').data('module-type') == 1000 ) {var $section = $pmb.closest('.s123-module');var $btn = $pmb.find('a.edit-image');if ( $section.find('.promoImageInline').length > 0 ) {$btn.on('click.p_m_buttons',function( event ) {event.preventDefault();var $this = $(this);topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+$this.data('module-id')+'"]').closest('li').data('open-tool','images-options');openItemEditModal($this.data('module-id'),$this.data('module-type'),$this.data('item-unique-id'));});} else {$btn.hide();}}}
$pmb.find('a:not(.icon-only-tooltip)').tooltip({template: '<div class="tooltip p-m-b-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',container: 'body',placement: $('html').attr('dir') === 'rtl' ? 'right' : 'left',delay: {show: 2000,hide: 0}});$pmb.find('a.icon-only-tooltip').tooltip({container: 'body',placement: 'top',delay: {show: 2000,hide: 0}});if ( $pmb.hasClass('p-s-m') ) {$pmb.css({ display: 'flex' });} else {$pmb.css({ display: 'grid' });}
if ( $pmb.data('type') === 'homepage' ) {fixHomepagePreviewManageButtonsPosition($pmb);$(document).off('previewScale.deviceTypeChange.f_h_p_b_p').on('previewScale.deviceTypeChange.f_h_p_b_p', function( event, device ) {fixHomepagePreviewManageButtonsPosition($pmb);if ( device === 'mobile' ) {$pmb.css({ top: ''});}});$(document).off('reloadPreviewCSS.reloaded.f_h_p_b_p').on('reloadPreviewCSS.reloaded.f_h_p_b_p', function( event, device ) {fixHomepagePreviewManageButtonsPosition($pmb);});$('#mainNav').one('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function( event ) {fixHomepagePreviewManageButtonsPosition($pmb);});}});$previewManageButton.on('selectstart dragstart', function( event ) { event.preventDefault(); });topWindow.$('.p-m-b-wizard-accordion-flash').removeClass('p-m-b-wizard-accordion-flash');OutlineHandler.init();S123ResizeObserver.init({selector: '.p-m-b-highlight',sizeChangeCallback: function( $el, width, height ) {OutlineHandler.handleResize($el);var $editableEl = $el.find('[data-has-s123-toolbar="true"]');if ( $editableEl.length > 0 ) {var s123Toolbar = $editableEl.data('s123-tool-bar');if ( s123Toolbar ) s123Toolbar.setPosition();var textVisibilityHandler = $el.closest('section').data('text-visibility-handler');if ( textVisibilityHandler ) textVisibilityHandler.setPosition($editableEl);} else if ( $el.hasClass('s123-page-header') || $el.hasClass('s123-page-slogan') ) {if ( $el.data('s123-f-b') ) $el.data('s123-f-b').setPosition();}}});function fixHomepagePreviewManageButtonsPosition( $pmb ) {if ( hasColidingelements($pmb) ) {if ( $('html[dir="rtl"]').length > 0 ) {$pmb.css({left: '15px',right: 'auto',direction: 'ltr' // change grid flow
});$pmb.find('.s123-p').data('s123-p').updateOption('placement','right');} else {$pmb.css({left: 'auto',right: '15px',direction: 'rtl' // change grid flow
});$pmb.find('.s123-p').data('s123-p').updateOption('placement','left');}}
$pmb.css('top','');if ( $.inArray($('#layoutNUM').val(),['2','3','4','13','15','20']) !== -1 ) return;if ( ($('#mainNav').offset().top + $('#mainNav').height()) > $pmb.offset().top ) {if ( $(window).scrollTop() === 0 ) {$pmb.css({top: ($('#mainNav').offset().top + $('#mainNav').height() + 20) + 'px'});}}
function hasColidingelements( $pmb ) {var $textElement = $('#top-section .hm-t-c .hm-txt, #top-section .section-main-text-btn').filter(':visible').first();if ( $textElement.length == 0 ) return;if ( $textElement.offset().top > ($pmb.offset().top + $pmb.height()) ) return;if ( isColliding($pmb,$textElement) ) return true;return false;}
function isColliding( $div1, $div2 ) {var d1_offset             = $div1.offset();var d1_height             = $div1.outerHeight(true);var d1_width              = $div1.outerWidth(true);var d1_distance_from_top  = d1_offset.top + d1_height;var d1_distance_from_left = d1_offset.left + d1_width;var d2_offset             = $div2.offset();var d2_height             = $div2.outerHeight(true);var d2_width              = $div2.outerWidth(true);var d2_distance_from_top  = d2_offset.top + d2_height;var d2_distance_from_left = d2_offset.left + d2_width;return ! ( d1_distance_from_top < d2_offset.top || d1_offset.top > d2_distance_from_top || d1_distance_from_left < d2_offset.left || d1_offset.left > d2_distance_from_left );}}
$('#page-top').on('click.websiteBackground', function( event ) {if ( event.target.id != $(this).get(0).id ) return;if ( $('body').width() === $('.body').width() ) return;expandWizardHomepage('designTab','#websiteBackground');});WidgetsAdmin.refresh();});function expandWizardHomepage( tab, accordionId ) {var $accordion = topWindow.$(accordionId);topWindow.Wizard.modals.hideAll();topWindow.OpenWizardTab(tab,true);if ( $accordion.hasClass('in') ) {$accordion.closest('.panel').addClass('p-m-b-wizard-accordion-flash');setTimeout(function() {$accordion.closest('.panel').removeClass('p-m-b-wizard-accordion-flash');},500);return;}
topWindow.$('#'+tab).one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {$(document).trigger('wizard.accordion_animation_ended');});var animationManager = topWindow.Wizard.tabEffectHandler.AnimationManager[tab];animationManager.show(animationManager.$tabLinks.find('a[href="'+accordionId+'"]'));}
function S123Slider( settings ) {var _ = {id: topWindow.uniqid('S123Slider-'),$el: null,label: settings.label,tooltip: settings.tooltip,design: settings.design,value: settings.getValue.call(this),numberKind: settings.numberKind,minValue: settings.minValue,maxValue: settings.maxValue,callback: settings.callback,startCallback: settings.startCallback,};_.init = function() {topWindow.SliderInputInitialize($('<div class="form-group" style="margin-top: 15px;"><div class="sliderInput" id="' + _.id + '" data-text="' + S123.escapeHtml(_.label) + '" data-value="' + _.value + '" data-max="' + _.maxValue + '" data-min="' + _.minValue + '" data-tooltip="' + S123.escapeHtml(_.tooltip) + '" data-number-kind="' + _.numberKind + '" data-design="' + S123.escapeHtml(_.design) + '"></div></div>').find('.sliderInput'));_.$el = topWindow.sliderInputs[_.id].$html;_.$el.find('#'+_.id).off('sliderInput.start').on('sliderInput.start', function( event ) {if ( _.startCallback ) _.startCallback.call(this,event);});_.$el.find('#'+_.id).off('change.S123Slider').on('change.S123Slider', function( event ) {_.value = $(this).val();_.$el.find('#'+_.id).trigger('input.S123Slider');});_.$el.find('#'+_.id).off('input.S123Slider').on('input.S123Slider', function( event ) {_.value = $(this).val();if ( _.callback ) _.callback.call(this,event,_.value,true);clearTimeout(this.inputDelay);this.inputDelay = setTimeout(function() {if ( _.callback ) _.callback.call(this,event,_.value,false);},300);});_.$el.find('[data-rel="tooltip"]').tooltip({container: _.$el,placement: 'top'});};_.destroy = function() {if ( topWindow.sliderInputs[_.id] ) topWindow.sliderInputs[_.id].destroy();};_.init();return _;};function S123PopOverSliders( settings ) {var _ = {$el: settings.$el,customClass: settings.customClass ? settings.customClass : '',popoverSettings: settings.popoverSettings ? settings.popoverSettings : {},slidersArray: settings.slidersArray,sliders: {},showCallback: settings.showCallback,hideCallback: settings.hideCallback};_.init = function() {if ( !_.$el.get(0).id ) {_.$el.attr('id',topWindow.uniqid('S123PopOverSliders-tmp-'));}
var $content = $('<div></div>');_.popoverSettings.content = $content;_.s123PopOver = new S123PopOver({$el: _.$el,popoverSettings: _.popoverSettings,customClass: 's123-popover-sliders' + _.customClass,showCallback: function() {for (var i = 0; i < _.slidersArray.length; i++) {_.sliders[_.slidersArray[i].type] = new S123Slider({label: _.slidersArray[i].label,tooltip: _.slidersArray[i].tooltip,design: _.slidersArray[i].design,getValue: _.slidersArray[i].getValue,numberKind: _.slidersArray[i].numberKind,minValue: _.slidersArray[i].minValue,maxValue: _.slidersArray[i].maxValue,callback: _.slidersArray[i].callback});$content.append(_.sliders[_.slidersArray[i].type].$el);}
if ( _.showCallback ) _.showCallback.call(this);},hideCallback: function() {if ( _.hideCallback ) _.hideCallback.call(this);} ,hiddenCallback: function() {$.each(_.sliders, function( key, slider ) {slider.destroy();});}});_.$el.addClass('s123-p-s');_.$el.data('s123-p-s',_);};_.hide = function() {_.s123PopOver.hide();};_.destroy = function() {_.s123PopOver.destroy();_.$el.data('s123-p-s',null);};_.init();return _;};function S123PopOver( settings ) {var _ = {$el: settings.$el,isVisible: false,customClass: settings.customClass ? settings.customClass : '',popoverSettings: settings.popoverSettings,showCallback: settings.showCallback,hideCallback: settings.hideCallback,hiddenCallback: settings.hiddenCallback};_.init = function() {_.$el.off('click.S123PopOver').on('click.S123PopOver', function( event ) {event.stopPropagation();event.preventDefault();if ( _.isVisible ) {_.hide();} else {_.show();}});if ( !_.$el.get(0).id ) {_.$el.attr('id',topWindow.uniqid('S123PopOver-tmp-'));}
_.popoverSettings = new PopoverSettings(_.popoverSettings);_.popoverSettings.template = _.popoverSettings.template.replace('{{data-rel}}','data-rel="' + _.$el.get(0).id + '"');_.$el.popover(_.popoverSettings)
.on('show.bs.popover', function( event ) {if ( _.showCallback ) _.showCallback.call(this);})
.on('shown.bs.popover', function () {_.isVisible = true;$(document).one('undoRedo.change', function() {_.hide();});$(document)
.add($(topWindow.document))
.on('mousedown.S123PopOver'+_.$el.get(0).id, function ( event ) {if ( $(event.target).closest('#'+_.$el.get(0).id+'.s123-p').length > 0 ) return;if ( $(event.target).closest('.popover.s123-popover').length > 0 ) return;_.hide();});})
.on('hide.bs.popover', function( event ) {_.isVisible = false;$(document)
.add($(topWindow.document))
.off('mousedown.S123PopOver'+_.$el.get(0).id);if ( _.hideCallback ) _.hideCallback.call(this);})
.on('hidden.bs.popover', function( event ) {if ( _.hiddenCallback ) _.hiddenCallback.call(this);});$(document).off('S123PopOver.reposition.'+_.$el.get(0).id).on('S123PopOver.reposition.'+_.$el.get(0).id, function( event ) {if ( !_.isVisible ) return;_.reposition();});_.$el.addClass('s123-p');_.$el.data('s123-p',_);};_.reposition = function() {_.$el.popover('reposition');};_.show = function() {_.$el.popover('show');};_.hide = function() {_.$el.popover('hide');};_.destroy = function() {$('.popover.s123-popover[data-rel="'+_.$el.get(0).id+'"]').remove();_.$el.data('s123-p',null);};_.updateOption = function( optionName, value ) {if ( !_.$el.data('bs.popover') ) return;_.$el.data('bs.popover').options[optionName] = value;};function PopoverSettings( data ) {function Def() {return {container: 'body',html: 'true',content: '',template: '<div class="popover s123-popover ' + _.customClass + '" role="tooltip" {{data-rel}} style="max-width: 290px;"><div class="arrow"></div><div class="popover-content"></div></div>',trigger: 'manual',placement: 'auto'};}
function objectAssign(target, sources) {if (Object.assign) {sources = Object.assign(target, sources);} else {for (var prop in target)
if (!sources.hasOwnProperty(prop)) sources[prop] = target[prop];}
return sources;}
var def = new Def();if ( data ) {data = objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
var placement = data.placement;if ( placement.indexOf('auto') != -1 && (placement.indexOf('top') != -1 || placement.indexOf('bottom') != -1) ) {data.placement = function( context, el ) {var $helper = $(context).clone();var $el = $(el);var prefferedPlacement = placement.indexOf('top') != -1 ? 'top' : 'bottom';$helper.addClass(prefferedPlacement);$helper.css({visibility: 'hidden'});$('body').append($helper);var popOverdHeight = $helper.outerHeight(true) + $el.outerHeight(true);$helper.remove();if ( placement.indexOf('top') != -1 ) {if ( ($el.offset().top - $(window).scrollTop()) < popOverdHeight ) {return 'bottom';}
return 'top';} else if ( placement.indexOf('bottom') != -1 ) {if ( ($el.offset().top - $(window).scrollTop()) + popOverdHeight > $(window).height() ) {return 'top';}
return 'bottom';}};}
return data;};_.init();return _;};function S123Resizable( settings ) {var _ = {$el: settings.$el,$wizardInputs: settings.$wizardInputs,maxWidth: $.isNumeric(settings.maxWidth) ? settings.maxWidth : null,maxHeight: $.isNumeric(settings.maxHeight) ? settings.maxHeight : null,minWidth : $.isNumeric(settings.minWidth ) ? settings.minWidth  : 10,minHeight : $.isNumeric(settings.minHeight ) ? settings.minHeight  : 10,resizByWidth: settings.resizByWidth,resizByHeight: settings.resizByHeight,preserveRatio: settings.preserveRatio,startCallBack: settings.startCallBack,resizeCallBack: settings.resizeCallBack,endCallBack: settings.endCallBack};_.init = function() {_.$el.find('.p-m-b-highlight').each(function(index, el) {OutlineHandler.destroy($(el).get(0).id);});OutlineHandler.register(_.$el);handles = 'ne, se, sw, nw';if ( !_.resizByWidth ) {handles = 'n, s';}
if ( !_.resizByHeight ) {handles = 'w, e';}
if ( !_.preserveRatio && ( _.resizByWidth && _.resizByHeight ) ) {handles = 'n, e, s, w, ne, se, sw, nw';_.$el.attr('data-s123-resizable-full-controllers','true');}
_.$el.resizable({aspectRatio: _.preserveRatio,maxWidth: _.maxWidth,maxHeight: _.maxHeight,minWidth : _.minWidth,minHeight: _.minHeight,handles: handles,start: function( event, ui ) {_.$el.addClass('resizing');$('html').addClass('disable-inline-wizard');if ( _.startCallBack ) _.startCallBack.call(this,event,ui);OutlineHandler.handleResizeStart(ui.element);$(document).trigger('S123Resize.start');},stop: function( event, ui ) {_.$el.removeClass('resizing');$('html').removeClass('disable-inline-wizard');ui.element.css({width: '',height: ''});if ( _.endCallBack ) _.endCallBack.call(this,event,ui,false);OutlineHandler.handleResizeEnd(event,ui.element);},resize: function( event, ui ) {ui.size.width = Math.round(ui.size.width);ui.size.height = Math.round(ui.size.height);if ( _.resizeCallBack )  _.resizeCallBack.call(this,event,ui);}});if ( _.$wizardInputs ) {_.$el.resizable('option','size',{width: _.$el.width(),height: _.$el.height()});if ( _.$wizardInputs.width ) {_.$wizardInputs.width.off('change.S123Resizable').on('change.S123Resizable', function( event, flagStatus ) {if ( flagStatus != 'UndoRedoChange' ) return;var ui = _.$el.resizable('instance');var size = _.$el.resizable('option','size');size.width = parseInt($(this).val());_.$el.resizable('option','size',size);if ( _.endCallBack )  _.endCallBack.call(this,event,ui,true);});}
if ( _.$wizardInputs.height ) {_.$wizardInputs.height.off('change.S123Resizable').on('change.S123Resizable', function( event, flagStatus ) {if ( flagStatus != 'UndoRedoChange' ) return;var ui = _.$el.resizable('instance');var size = _.$el.resizable('option','size');size.height = parseInt($(this).val());_.$el.resizable('option','size',size);if ( _.endCallBack )  _.endCallBack.call(this,event,ui,true);});}}
_.$el.data('s123-resizable',_);_.$el.addClass('s123-resizable');};_.destroy = function() {_.$el.data('s123-resizable',null);_.$el.removeClass('s123-resizable');_.$el.resizable('destroy');};_.init();return _;};function S123FloatingBar( settings ) {var _ = {$el: settings.$el,template: settings.template,placement: settings.placement,type: settings.type,showCallback: settings.showCallback,preventHide: false,removeOnMouseOut: true};_.init = function() {if ( _.$el.data('s123-f-b') ) _.$el.data('s123-f-b').destroy();_.$el.on('mouseenter.S123FloatingBar', function( event ) {event.stopPropagation();_.show();clearTimeout(_.$html.hideDelay);_.$el.off('mouseout.S123FloatingBar').one('mouseout.S123FloatingBar', function( event ) {event.stopPropagation();clearTimeout(_.$html.hideDelay);_.$html.hideDelay = setTimeout(function() {_.hide();},100);});});_.$el.addClass('s123-f-b');_.$el.data('s123-f-b',_);};_.show = function() {if ( !_.$html ) {_.$html = $('<div class="s123-floating-bar" data-rel="' + _.$el.get(0).id + '" data-type="' + _.type + '">' + _.template + '</div>');if ( _.showCallback ) _.showCallback.call(this,_);$('body').append(_.$html);}
_.$html.off('mouseout.S123FloatingBar').on('mouseout.S123FloatingBar', function( event ) {event.stopPropagation();clearTimeout(_.$html.hideDelay);_.$html.hideDelay = setTimeout(function() {_.hide();},100);});_.$html.off('mouseover.S123FloatingBar').on('mouseover.S123FloatingBar', function( event ) {event.stopPropagation();clearTimeout(_.$html.hideDelay);});_.setPosition();};_.hide = function() {if ( !_.removeOnMouseOut ) return;if ( _.$html ) {clearTimeout(_.$html.hideDelay);_.$html.remove();_.$el.off('mouseout.S123FloatingBar');}
_.$html = null;};_.destroy = function() {_.$el.removeClass('s123-f-b');_.$el.data('s123-f-b',null);_.$el.off('mouseenter.S123FloatingBar');_.$el.off('mouseout.S123FloatingBar');_.hide();};_.setPosition = function() {if ( !_.$html ) return;var offset = _.$el.get(0).getBoundingClientRect();var top = offset.top + $(window).scrollTop();var isRtl = $('html[dir="rtl"]').length > 0;var outlineOffset = 7;if ( isRtl ) {offset.left -= getScrollbarWidth();}
switch ( _.placement ) {case 'bottom':_.$html.css({top: (top + offset.height - (_.$html.outerHeight(true) / 2)) + outlineOffset});break;case 'bottom center':_.$html.css({top: (top + offset.height - (_.$html.outerHeight(true) / 2)) + outlineOffset,left: offset.left + (offset.width / 2) - (_.$html.outerWidth(true) / 2)});return;case 'bottom right':_.$html.css({top: (top + offset.height - (_.$html.outerHeight(true) / 2)) + outlineOffset,left: offset.left + offset.width - _.$html.outerWidth(true) - outlineOffset});return;break;case 'top':if ( top < 0 ) {top = _.$html.outerHeight(true) + $(window).scrollTop();}
_.$html.css({top: (top - _.$html.outerHeight(true) / 2) - outlineOffset,});break;}
var textAlign = _.$el.css('text-align');if ( textAlign != 'left' && textAlign != 'right' && textAlign != 'center' ) {textAlign = $('html[dir="rtl"]').length > 0 ? 'right' : 'left';}
if ( textAlign == 'center' ) {if ( isRtl ) {_.$html.css({left: offset.left - outlineOffset,});} else {_.$html.css({left: offset.right - _.$html.outerWidth(true) + outlineOffset,});}} else if ( textAlign == 'left' ) {_.$html.css({left: offset.right - _.$html.outerWidth(true) + outlineOffset,});} else if ( textAlign == 'right' ) {_.$html.css({left: offset.left - outlineOffset});}};_.init();return _;};function S123EditableElement( settings ) {var _ = {$el: settings.$el,disableNewLine: settings.disableNewLine,maxlength: settings.maxlength,eventCallback: settings.eventCallback,isDisabled: false};_.init = function() {if ( _.$el.data('s123-editable-elements') ) _.$el.data('s123-editable-elements').destroy();_.$el.attr('contenteditable',true);_.$el.attr('data-s123-editable-elements',true);_.$el.on('focus.convertToEditable', function() {if ( _.isDisabled ) return false;_.$el.attr('spellcheck',true);if ( _.eventCallback ) _.eventCallback.call(this,'focus');});_.$el.on('blur.convertToEditable',function( event ) {if ( _.isDisabled ) return false;_.$el.attr('spellcheck',false);if ( _.eventCallback ) _.eventCallback.call(this,'blur');});_.$el.on('input.convertToEditable', function() {if ( _.isDisabled ) return;if ( _.eventCallback ) _.eventCallback.call(this,'input');});inputHandler(_.$el,_.disableNewLine,_.maxlength,_.eventCallback);_.$el.data('s123-editable-elements',_);if ( topWindow.Wizard.Preview.Scale.mode != 'computer' ) {_.disable();}};function inputHandler() {_.$el.on('keydown.convertToEditable.inputHandler', function( e ) {if ( _.isDisabled ) return false;var $target = $(e.target);if ( e.type === 'keydown' ) {var blockedKeys = ((e.which === 13 && _.disableNewLine) ||(e.ctrlKey || e.metaKey) && e.which === 66 ||(e.ctrlKey || e.metaKey) && e.which === 73 ||(e.ctrlKey || e.metaKey) && e.which === 85);var excludedKeys = (e.which === 8 ||e.which === 35 ||e.which === 36 ||e.which === 37 ||e.which === 38 ||e.which === 39 ||e.which === 40 ||e.which === 46 ||(e.ctrlKey || e.metaKey) && e.which === 65 ||(e.ctrlKey || e.metaKey) && e.which === 88 ||(e.ctrlKey || e.metaKey) && e.which === 67 ||(e.ctrlKey || e.metaKey) && e.which === 86 ||(e.ctrlKey || e.metaKey) && e.which === 90);if ( blockedKeys ) {e.preventDefault();} else if ( !excludedKeys ) {var isSelectedBlock = window.getSelection().toString().length > 0;if ( $.isNumeric(_.maxlength) && (!isSelectedBlock && $target.text().length >= _.maxlength) ) {e.preventDefault();} else if ( e.which === 13 ) {e.preventDefault();var docFragment = document.createDocumentFragment();var br = document.createElement('br');docFragment.appendChild(br);if ( getCaretIndex($target.get(0)) == $target.text().length) {var nolineBreak = document.createTextNode('\xa0');docFragment.appendChild(nolineBreak);}
var range = window.getSelection().getRangeAt(0);range.deleteContents();range.insertNode(docFragment);range = document.createRange();range.setStartAfter(br);range.collapse(true);var sel = window.getSelection();sel.removeAllRanges();sel.addRange(range);if ( _.eventCallback ) _.eventCallback.call(this,'input');return false;}}}});_.$el.on('paste.convertToEditable.inputHandler', function( e ) {if ( _.isDisabled ) return false;var $target = $(e.target);e.preventDefault();if ( $.isNumeric(_.maxlength) && $target.text().length >= _.maxlength && !window.getSelection().toString().length > 0 ) return;var text = (e.originalEvent || e).clipboardData.getData('text/plain').trim();var range = document.getSelection().getRangeAt(0);range.deleteContents();var textNode = document.createTextNode(text);range.insertNode(textNode);range.selectNodeContents(textNode);range.collapse(false);var selection = window.getSelection();selection.removeAllRanges();selection.addRange(range);if ( $.isNumeric(_.maxlength) && $target.text().length >= _.maxlength ) {$target.text($target.text().slice(0,_.maxlength));}
if ( _.eventCallback ) _.eventCallback.call(this,'paste');});_.$el.on('dragover.convertToEditable.inputHandler drop.convertToEditable.inputHandler', function( event ) {event.preventDefault();});function getCaretIndex( element ) {let position = 0;const isSupported = typeof window.getSelection !== "undefined";if ( isSupported ) {const selection = window.getSelection();if ( selection.rangeCount !== 0 ) {const range = window.getSelection().getRangeAt(0);const preCaretRange = range.cloneRange();preCaretRange.selectNodeContents(element);preCaretRange.setEnd(range.endContainer, range.endOffset);position = preCaretRange.toString().length;}}
return position;}}
_.destroy = function() {_.$el.attr('contenteditable',false);_.$el.attr('data-s123-editable-elements',false);_.$el.data('s123-editable-elements',null);_.$el.off('focus.convertToEditable');_.$el.off('blur.convertToEditable');_.$el.off('input.convertToEditable');_.$el.off('click.convertToEditable');_.$el.off('keydown.convertToEditable.inputHandler');_.$el.off('paste.convertToEditable.inputHandler');};_.disable = function() {_.isDisabled = true;_.$el.attr('contenteditable',false);};_.enable = function() {_.isDisabled = false;_.$el.attr('contenteditable',true);};_.init();return _;};function updateMultipleSettings( moduleID, moduleTypeNUM, newSettingsObj, callback = null ) {topWindow.Wizard.UpdateModuleItemSettings(moduleID,moduleTypeNUM,newSettingsObj)
.then(function( data ) {if ( callback ) callback.call(this,data);if ( moduleTypeNUM == 159 ) {var undoHelper = tryParseJSON($('#section-'+moduleID+' .undo-helper').val());topWindow.WizardUndoRedoHandler.add({type: 'widgets',styleObj: {style: topWindow.Wizard.Pages.getPage(moduleID).data('module-style'),moduleArrID: topWindow.Wizard.Pages.getPage(moduleID).data('modules-arr-id'),},allSettings: newSettingsObj,moduleID: moduleID,moduleTypeNUM: moduleTypeNUM},$('#section-'+moduleID+' .undo-helper'));}});}
function openHomepageGoalTab( $el ) {var filter = $el.data('w-helper-filter') ? $el.data('w-helper-filter') : '';var $availableTools = topWindow.$('#homepageImageOptionsTab .homepage_goal_type_box.checkboxSingleSetting');topWindow.$('#homepageImageOptionsTab .hide-available-goals-tools').removeClass('hide-available-goals-tools');if ( filter != '' ) {$availableTools = $availableTools.filter(function() {return ( $(this).css("display") != "none" && $(this).attr('id') != 'homepage_goal_type_'+filter );});$availableTools.addClass('hide-available-goals-tools');topWindow.$('#homepageImageOptionsTab .s123-collapse-settings').addClass('hide-available-goals-tools');topWindow.$('#homepageImageOptionsTab .homepage-popular-goals').addClass('hide-available-goals-tools');}
var $input = topWindow.$('#'+$el.get(0).id);topWindow.$(topWindow.document)
.off('animation_manager.show.btnSelectFocus')
.on('animation_manager.show.btnSelectFocus', function( event ) {setTimeout(function() {$input.select().focus();},100);});expandWizardHomepage('homepageTab','#homepageImageOptionsTab');$input.select().focus();}
var decodeEntities = (function() {var element = document.createElement('div');function decodeHTMLEntities (str) {if(str && typeof str === 'string') {str = str.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi, '');str = str.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi, '');element.innerHTML = str;str = element.textContent;element.textContent = '';}
return str;}
return decodeHTMLEntities;})();$(document).on('shown.bs.dropdown','.dropdown', function () {var $this = $(this);var $ul = $this.children('.dropdown-menu');var $button = $this.children('.dropdown-toggle');var ulOffset = $ul.offset();var spaceUp = (ulOffset.top - $button.height() - $ul.height()) - $(window).scrollTop();var spaceDown = $(window).scrollTop() + $(window).height() - (ulOffset.top + $ul.height());if ( spaceDown < 0 && (spaceUp >= 0 || spaceUp > spaceDown) ) {$this.addClass('dropup');}}).on('hidden.bs.dropdown', '.dropdown', function() {$(this).removeClass('dropup');});var OutlineHandler = function() {var _ = {$elements: {},handled: {},$renderedOutlines: {},mouseOutTimeout: 1000,};_.init = function() {$('#top-section, .s123-module:is([data-module-type-num="1000"])').each(function( index, section ) {$(this).off('textRemoved.OutlineHandler').on('textRemoved.OutlineHandler', function( event, elementID ) {removeElementOutlines($(this).find('.p-m-b-highlight[data-rel="'+elementID+'"]').get(0).id);});});$.each(_.$elements, function( elementID, $el ) {registerEvents($el);var animationDetector = new AnimationDetector({$el: $el.closest('section'),inProcess: function( $el ) {var elementID = $el.get(0).id;if ( !_.$renderedOutlines[elementID] ) return;_.setPosition(elementID);},ended: function( $el ) {var elementID = $el.get(0).id;if ( !_.$renderedOutlines[elementID] ) return;_.setPosition(elementID);}});});$(document).off('click.OutlineHandler').on('click.OutlineHandler', function( event ) {var $target = $(event.target);if ( $target.closest('.p-m-b-highlight').length > 0 ) return;if ( $target.hasClass('p-m-b-highlight') ) return;_.removeAllOutlines(false);})
.off('OutlineHandler.rendered.handleOutlineVisiblity').on('OutlineHandler.rendered.handleOutlineVisiblity', function( event, elementID ) {var filterElementIDS = [elementID];if ( _.$elements[elementID].find('.p-m-b-highlight').length > 0 ) {_.$elements[elementID].find('.p-m-b-highlight').each(function(index, el) {filterElementIDS.push($(el).get(0).id);});}
_.removeAllOutlines(filterElementIDS);})
.off('OutlineHandler.setPosition').on('OutlineHandler.setPosition', function( event, elementID ) {if ( !_.$renderedOutlines[elementID] ) return;_.setPosition(elementID);})
.off('ModuleItemsOutlineHandler.rendered.OutlineHandler').on('ModuleItemsOutlineHandler.rendered.OutlineHandler', function( event ) {_.removeAllOutlines(false);});$(document).off('OutlineHandler.focus').on('OutlineHandler.focus', function( event, $el ) {_.focus($el);});$(document).off('OutlineHandler.blur').on('OutlineHandler.blur', function( event, $el ) {_.blur($el);});$(document).off('OutlineHandler.resetHideDelay').on('OutlineHandler.resetHideDelay', function( event, $el ) {if ( _.$renderedOutlines[$el.get(0).id] ) clearTimeout(_.$renderedOutlines[$el.get(0).id].mouseTimeout);})
.off('ModuleItemsOutlineHandler.rendered.OutlineHandler').on('ModuleItemsOutlineHandler.rendered.OutlineHandler', function( event ) {_.removeAllOutlines(false);});topWindow.$('#wizardForm').off('mouseenter.OutlineHandler').on('mouseenter.OutlineHandler', function( event ) {_.removeAllOutlines(false);});removeMissingDomElements();};_.refresh = function() {$.each(_.$elements, function( elementID , $el ) {if ( _.handled[elementID] ) return;registerEvents($el);});};_.render = function( $el ) {var elementID = $el.get(0).id;var isWidgetEl = isWidget($el);_.$renderedOutlines[elementID] = {outlines: {$top: $('<div class="p-m-b-outline top-side" data-is-widget="'+isWidgetEl+'"><div></div></div>'),$right: $('<div class="p-m-b-outline right-side" data-is-widget="'+isWidgetEl+'"><div></div></div>'),$bottom: $('<div class="p-m-b-outline bottom-side" data-is-widget="'+isWidgetEl+'"><div></div></div>'),$left: $('<div class="p-m-b-outline left-side" data-is-widget="'+isWidgetEl+'"><div></div></div>'),},mouseTimeout: null};var $outline = _.$renderedOutlines[elementID].outlines.$top
.add(_.$renderedOutlines[elementID].outlines.$right)
.add(_.$renderedOutlines[elementID].outlines.$bottom)
.add(_.$renderedOutlines[elementID].outlines.$left);if ( $el.hasClass('no-outline-offset') ) {$outline.addClass('no-outline-offset');}
$outline.on('mouseout.OutlineHandler', function( event ) {var $enteredTarget = $(event.relatedTarget);if ( $enteredTarget.hasClass('p-m-b-floating-menu-btn') ) return;if ( $enteredTarget.closest('#'+elementID).length > 0 ) return;if ( _.$renderedOutlines[elementID] ) {clearTimeout(_.$renderedOutlines[elementID].mouseTimeout);_.$renderedOutlines[elementID].mouseTimeout = setTimeout(function() {removeElementOutlines(elementID);},_.mouseOutTimeout);}});$el.parent().append($outline);$el.addClass('p-m-b-highlight-visible');if ( ['relative','absolute'].indexOf($el.parent().css('position')) == -1 ) {$el.parent().addClass('o-h-relative');}
$el.off('mouseout.OutlineHandler').on('mouseout.OutlineHandler', function( event ) {event.stopPropagation();var $enteredTarget = $(event.relatedTarget);var $this = $(this);if ( $enteredTarget.closest('.previewManageButton').length > 0 ) return;if ( $enteredTarget.closest('#'+$el.get(0).id).length > 0 ) return;if ( $enteredTarget.closest('.p-m-b-outline').length > 0 ) return;if ( _.$renderedOutlines[elementID] ) {clearTimeout(_.$renderedOutlines[elementID].mouseTimeout);_.$renderedOutlines[elementID].mouseTimeout = setTimeout(function() {removeElementOutlines(elementID);},_.mouseOutTimeout);}});_.setPosition(elementID);$(document).trigger('OutlineHandler.rendered',[elementID]);};_.removeAllOutlines = function( filterElementIDS ) {$.each(_.$renderedOutlines, function( elementID, outline ) {if ( filterElementIDS && filterElementIDS.indexOf(elementID) != -1 ) return;if ( _.$renderedOutlines[elementID] ) clearTimeout(_.$renderedOutlines[elementID].mouseTimeout);removeElementOutlines(elementID);});};_.register = function( $elements ) {$elements.each(function(index, el) {var $el = $(el);if ( $el.closest('.carousel').length > 0 ) {$el = $el.closest('.carousel');}
var id = $el.get(0).id;if ( !id ) {id = topWindow.uniqid('OutlineHandler-tmp-');$el.attr('id',id);}
$el.addClass('p-m-b-highlight');_.$elements[id] = $el;});};_.destroy = function( elementID ) {if ( !_.$elements[elementID] ) return;_.$elements[elementID].removeClass('p-m-b-highlight');removeElementOutlines(elementID);delete _.handled[elementID];delete _.$elements[elementID];delete _.$renderedOutlines[elementID];};_.setPosition = function( elementID ) {var $el = _.$elements[elementID];var outlineOffset = 10;var includeMargins = true;if ( $el.hasClass('no-outline-offset') ) {outlineOffset = 0;includeMargins = false;}
var offset = getOffsetRelativeToParent($el,outlineOffset);_.$renderedOutlines[elementID].outlines.$top.css({top: offset.top - _.$renderedOutlines[elementID].outlines.$top.outerHeight(includeMargins),left: offset.left,width: offset.width,});_.$renderedOutlines[elementID].outlines.$right.css({top: offset.top,left: offset.left + $el.outerWidth(),height: offset.height,});_.$renderedOutlines[elementID].outlines.$bottom.css({top: offset.top + $el.outerHeight(),left: offset.left,width: offset.width,});_.$renderedOutlines[elementID].outlines.$left.css({top: offset.top,left: offset.left - _.$renderedOutlines[elementID].outlines.$left.outerWidth(includeMargins),height: offset.height,});$(document).trigger('OutlineHandler.updatePosition',[elementID]);};_.handleResizeStart = function( $el ) {var id = $el.get(0).id;$.each(_.$elements, function( elementID, $el ) {var $editable = $el.find('[contenteditable="true"]');if ( $editable.length > 0 ) {$editable.trigger('blur');$(document).trigger('homepageAndPromoEditor.hideToolBar',[$editable]);}});};_.handleResizeEnd = function( event, $el ) {var $elementMouseOn = $(document.elementFromPoint(event.clientX,event.clientY));if ( !$elementMouseOn.get(0) ) return;if ( $el.get(0).id == $elementMouseOn.get(0).id ) return;if ( $elementMouseOn.closest('#'+$el.get(0).id).length > 0 ) return;removeElementOutlines($el.get(0).id);};_.handleResize = function( $el ) {var id = $el.get(0).id;if ( !_.$renderedOutlines[id] ) return;_.setPosition(id);};_.focus = function( $el ) {if ( $el.hasClass('p-m-b-highlight-focused') ) return;$el.addClass('p-m-b-highlight-focused');_.removeAllOutlines();if ( !_.$renderedOutlines[$el.get(0).id] ) {_.render($el);}};_.blur = function( $el ) {$el.removeClass('p-m-b-highlight-focused');removeElementOutlines($el.get(0).id);};function removeElementOutlines( elementID ) {if ( !_.$renderedOutlines[elementID] ) return;if ( _.$elements[elementID].hasClass('p-m-b-highlight-focused') ) return;if ( _.$elements[elementID].hasClass('resizing') ) return;_.$renderedOutlines[elementID].outlines.$top.remove();_.$renderedOutlines[elementID].outlines.$right.remove();_.$renderedOutlines[elementID].outlines.$bottom.remove();_.$renderedOutlines[elementID].outlines.$left.remove();if ( _.$elements[elementID].parent().find('.p-m-b-highlight-visible').length == 0 ) {_.$elements[elementID].closest('.o-h-relative').removeClass('o-h-relative');}
_.$elements[elementID].removeClass('p-m-b-highlight-visible');delete _.$renderedOutlines[elementID];$(document).trigger('OutlineHandler.removed',[elementID]);}
function getOffsetRelativeToParent( $el, outlineOffset ) {var childPos = $el.offset();var parentPos = $el.parent().offset();return {top: childPos.top - parentPos.top,left: childPos.left - parentPos.left,width: $el.outerWidth() + outlineOffset,height: $el.outerHeight() + outlineOffset,};}
function registerEvents( $el ) {var id = $el.get(0).id;$el.off('mouseenter.OutlineHandler').on('mouseenter.OutlineHandler', function( event ) {if ( _.$renderedOutlines[id] ) clearTimeout(_.$renderedOutlines[id].mouseTimeout);if ( $('html').hasClass('disable-inline-wizard') ) return;if ( topWindow.Wizard.Preview.Scale.mode != 'computer' && !isWidget($el) ) return;if ( $el.hasClass('disable-outline-on-enter') ) return;var $this = $(this);var $contenteditable = $this.find('[data-s123-editable-elements="true"]');if ( $contenteditable.length > 0 && $contenteditable.data('s123-editable-elements').isDisabled && !isWidget($el) ) return false;if ( _.$elements[$this.get(0).id].hasClass('p-m-b-highlight-focused') ) return;removeElementOutlines($this.get(0).id);_.render($this);});var $contenteditable = $el.find('[contenteditable="true"]');if ( $el.hasClass('s123-page-header') || $el.hasClass('s123-page-slogan') ) {$contenteditable = $el;}
$contenteditable.off('focus.OutlineHandler').on('focus.OutlineHandler', function( event ) {var $this = $(this);if ( $this.data('s123-editable-elements').isDisabled ) return;var $el = $this.closest('.p-m-b-highlight');_.focus($this.closest('.p-m-b-highlight'));});$contenteditable.off('blur.OutlineHandler').on('blur.OutlineHandler', function( event ) {var $this = $(this);if ( $this.hasClass('s123-widget') ) return;var $el = $this.closest('.p-m-b-highlight');$el.removeClass('p-m-b-highlight-focused');removeElementOutlines($el.get(0).id);});_.handled[id] = true;}
function AnimationDetector( settings ) {var _ = {$el: settings.$el,started: settings.started,inProcess: settings.inProcess,ended: settings.ended,animations: {}};_.init = function() {if ( _.$el.hasClass('animation-detector') ) return;_.$el.off('transitionstart.OutlineHandler').on('transitionstart.OutlineHandler', '.p-m-b-highlight', function ( event ) {var $target = $(event.target);if ( !$target.hasClass('p-m-b-highlight') ) return;if ( _.started ) _.started.call(this,$target);clearInterval(_.animations[$target.get(0).id]);_.animations[$target.get(0).id] = setInterval(function() {if ( _.inProcess ) _.inProcess.call(this,$target);},10);});_.$el.off('transitionend.OutlineHandler webkitTransitionEnd.OutlineHandler oTransitionEnd.OutlineHandler').on('transitionend.OutlineHandler webkitTransitionEnd.OutlineHandler oTransitionEnd.OutlineHandler', '.p-m-b-highlight', function ( event ) {var $target = $(event.target);if ( !$target.hasClass('p-m-b-highlight') ) return;clearInterval(_.animations[$target.get(0).id]);if ( _.ended ) _.ended.call(this,$target);});_.$el.addClass('animation-detector');};_.init();return _;}
function removeMissingDomElements() {$.each(_.$elements, function( elementID, $el ) {if ( $('#'+$el.get(0).id).length == 0 ) {_.destroy($el.get(0).id);}});}
function isWidget( $el ) {return $el.closest('.s123-widgets-module').length > 0;}
return _;}();var ModuleItemsOutlineHandler = function() {var _ = {$element: null,animationDetector: null,$renderedOutlines: null,mouseOutTimeout: 1000,};_.init = function() {$(document).off('mouseenter.ModuleItemsOutlineHandler').on('mouseenter.ModuleItemsOutlineHandler', '.preview-highlighter', function( event ) {var $this = $(event.currentTarget);if ( $this.closest('.s123-module:is([data-module-type-num="1000"],[data-module-type-num="159"])').length > 0 ) return;if ( $this.hasClass('s123-page-header') || $this.hasClass('s123-page-slogan') ) return;if ( $('html').hasClass('disable-inline-wizard') ) return;if ( topWindow.Wizard.Preview.Scale.mode != 'computer' ) return;if ( $this.hasClass('social-details-container') && $this.closest('.global_footer').length == 0 ) return;if ( $this.hasClass('p-m-b-highlight-visible') ) return;removePreviousItemOutlines();var $item = $this.closest('.carousel').length > 0 ? $this.closest('.carousel') : $this;var $module = $item.closest('.s123-module');var itemUniqueID = $item.data('unique-id') ? $item.data('unique-id') : '';var moduleID = $module.data('module-id');var moduleTypeNUM = $module.data('module-type-num');if ( $item.data('module-type-num') ) {moduleTypeNUM = $item.data('module-type-num');}
if ( $item.data('module') ) {moduleID = $item.data('module');}
_.render($item, function() {var btnText = translations.edit;var buttons = [{text: btnText,click: function( event ) {event.preventDefault();openItemEditModal(moduleID,moduleTypeNUM,itemUniqueID,null);if ( IsEcommerceHighlight($module.data('module-type-num')) ) {topWindow.g_ManageModuleID = $module.data('module-id');}}}];if ( $item.closest('.e-c-box').data('module-type-num') != 113 && topWindow.modulesArr[moduleTypeNUM].one_item_module != 1 ) {buttons.push({type: 'delete',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" class="svg-inline--fa fa-trash fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></svg>',
addCallback: function( $btn ) {$btn.confirmation({placement: $('html').attr('dir') === 'rtl' ? 'left' : 'right',title: translations.areYouSure,btnOkLabel: '<i class="icon-ok-sign icon-white"></i> ' + translations.yes,btnCancelLabel: '<i class="icon-remove-sign"></i> ' + translations.no,popout: true,singleton: true,container: $this.closest('section.s123-module'),btnOkClass: 'btn-danger btn-sm spacing-confirmation-btn',btnCancelClass: 'btn-default btn-sm spacing-confirmation-btn',delay: 0,onConfirm: function() {topWindow.Wizard.Save.inProgress();$.ajax({type: "POST",url: "/versions/"+$(versionNUM).val()+"/wizard/modules/delete.php",data: {w : $(websiteID).val(),uniqueIDS: itemUniqueID,moduleID : moduleID,moduleTypeNUM: moduleTypeNUM,ajax: true},success: function( data ) {if ( data == 'success' ) {if ( IsEcommerceHighlight($module.data('module-type-num')) ) {moduleID = $module.data('module-id');}
topWindow.ReloadPreviewAndGoToModule(moduleID,true);topWindow.Wizard.Save.success();} else {topWindow.Wizard.Save.error();}},error: function() {topWindow.Wizard.Save.error();}});}});$btn.on('show.bs.confirmation.ModuleItemsOutlineHandler', function ( event ) {$(document).on('mousedown.confirmation.ModuleItemsOutlineHandler', function ( event ) {var $target = $(event.target);if ( $target.closest('.popover.confirmation').length === 0 && !$target.hasClass('delete') ) {$btn.confirmation('hide');$(document).off('mousedown.confirmation.ModuleItemsOutlineHandler');}});})
.on('shown.bs.confirmation.ModuleItemsOutlineHandler', function ( event ) {$('.popover.confirmation').on('mouseout.ModuleItemsOutlineHandler', function( event ) {var $target = $(event.relatedTarget);if ( $target.closest('.p-m-b-highlight-visible').length > 0 ) return;if ( $target.closest('.popover.confirmation').length > 0 ) return;$('.popover.confirmation').off('mouseout.ModuleItemsOutlineHandler');removePreviousItemOutlines();});});}});}
addFloatingMenu({type: 'moduleItem',$element: $this,buttons: buttons});$this.find('.p-m-b-floating-menu').on('mouseout.ModuleItemsOutlineHandler', function( event ) {var $target = $(event.relatedTarget);if ( $target.closest('.p-m-b-highlight-visible').length > 0 ) return;if ( $target.closest('.popover.confirmation').length > 0 ) return;if ( $target.closest('.p-m-b-floating-menu').length > 0 ) return;removePreviousItemOutlines();});});})
.off('OutlineHandler.rendered.ModuleItemsOutlineHandler').on('OutlineHandler.rendered.ModuleItemsOutlineHandler', function( event ) {removePreviousItemOutlines();});_.animationDetector = new AnimationDetector({$el: $(document),inProcess: function( $el ) {if ( !_.$renderedOutlines ) return;_.setPosition();},ended: function( $el ) {if ( !_.$renderedOutlines ) return;_.setPosition();}});};_.render = function( $el, callback ) {_.$element = $el;_.$renderedOutlines = {outlines: {$top: $('<div class="p-m-b-outline top-side"><div></div></div>'),$right: $('<div class="p-m-b-outline right-side"><div></div></div>'),$bottom: $('<div class="p-m-b-outline bottom-side"><div></div></div>'),$left: $('<div class="p-m-b-outline left-side"><div></div></div>'),},mouseTimeout: null};var $outline = _.$renderedOutlines.outlines.$top
.add(_.$renderedOutlines.outlines.$right)
.add(_.$renderedOutlines.outlines.$bottom)
.add(_.$renderedOutlines.outlines.$left);_.$element.off('mouseout.ModuleItemsOutlineHandler').on('mouseout.ModuleItemsOutlineHandler', function( event ) {if ( !event.relatedTarget ) return;if ( $(event.relatedTarget).hasClass('p-m-b-outline') ) return;if ( $(event.relatedTarget).closest('.preview-highlighter').length !== 0 ) return;if ( $(event.relatedTarget).closest('.popover.confirmation').length !== 0 ) return;removePreviousItemOutlines();});$outline.off('mouseout.ModuleItemsOutlineHandler').on('mouseout.ModuleItemsOutlineHandler', function( event ) {removePreviousItemOutlines();});$el.parent().append($outline);$el.addClass('p-m-b-highlight-visible');if ( ['relative','absolute'].indexOf($el.parent().css('position')) == -1 ) {$el.parent().addClass('o-h-relative');}
_.setPosition();if ( callback ) callback.call(this);$(document).trigger('ModuleItemsOutlineHandler.rendered');};_.setPosition = function() {var offset = getOffsetRelativeToParent(_.$element);_.$renderedOutlines.outlines.$top.css({top: offset.top - _.$renderedOutlines.outlines.$top.outerHeight(true),left: offset.left,width: offset.width,});_.$renderedOutlines.outlines.$right.css({top: offset.top,left: offset.left + _.$element.outerWidth(),height: offset.height,});_.$renderedOutlines.outlines.$bottom.css({top: offset.top + _.$element.outerHeight(),left: offset.left,width: offset.width,});_.$renderedOutlines.outlines.$left.css({top: offset.top,left: offset.left - _.$renderedOutlines.outlines.$left.outerWidth(true),height: offset.height,});};function removePreviousItemOutlines() {if ( !_.$element ) return;if ( !_.$renderedOutlines ) return;_.$renderedOutlines.outlines.$top.remove();_.$renderedOutlines.outlines.$right.remove();_.$renderedOutlines.outlines.$bottom.remove();_.$renderedOutlines.outlines.$left.remove();_.$element.removeClass('p-m-b-highlight-visible');_.$element.find('.p-m-b-floating-menu [data-type="delete"]').confirmation('destroy');_.$element.find('.p-m-b-floating-menu').remove();_.$renderedOutlines = null;_.$element = null;}
function getOffsetRelativeToParent( $el ) {var outlineOffset = 10;var childPos = $el.offset();var parentPos = $el.parent().offset();return {top: childPos.top - parentPos.top,left: childPos.left - parentPos.left,width: $el.outerWidth() + outlineOffset,height: $el.outerHeight() + outlineOffset,};}
function AnimationDetector( settings ) {var _ = {$el: settings.$el,started: settings.started,inProcess: settings.inProcess,ended: settings.ended,animation: null};_.init = function() {if ( _.$el.hasClass('animation-detector') ) return;_.$el.off('transitionstart.ModuleItemsOutlineHandler').on('transitionstart.ModuleItemsOutlineHandler', '.preview-highlighter', function ( event ) {var $target = $(event.target);if ( !$target.hasClass('preview-highlighter') ) return;if ( _.started ) _.started.call(this,$target);clearInterval(_.animation);_.animation = setInterval(function() {if ( _.inProcess ) _.inProcess.call(this,$target);},10);});_.$el.off('transitionend.ModuleItemsOutlineHandler webkitTransitionEnd.ModuleItemsOutlineHandler oTransitionEnd.ModuleItemsOutlineHandler').on('transitionend.ModuleItemsOutlineHandler webkitTransitionEnd.ModuleItemsOutlineHandler oTransitionEnd.ModuleItemsOutlineHandler', '.preview-highlighter', function ( event ) {var $target = $(event.target);if ( !$target.hasClass('preview-highlighter') ) return;clearInterval(_.animation);if ( _.ended ) _.ended.call(this,$target);});_.$el.addClass('animation-detector');};_.init();return _;}
return _;}();var S123ResizeObserver = function() {var _ = {$elements: {},observers: {},selector: '',sizeChangeCallback: null};_.init = function( settings ) {_.destroy();_.selector = settings.selector;_.sizeChangeCallback = settings.sizeChangeCallback;registerEvents();};_.refresh = function() {registerEvents();};_.destroy = function() {$.each(_.observers, function( elementID , observer ) {observer.destroy();delete _.observers[elementID];});};function registerEvents() {$(_.selector).each(function(index, el) {var $el = $(el);var id = $el.get(0).id;if ( !id ) {id = topWindow.uniqid('S123ResizeObserver-tmp-');$el.attr('id',id);}
_.observers[id] = new Observer({$el: $el,returnOuterSize: false,includeMargins: false,callback: function( $el ,width, height ) {if ( _.sizeChangeCallback ) _.sizeChangeCallback.call(this,$el,width,height);}});});}
function Observer( settings ) {var _ = {$el: settings.$el,returnOuterSize: settings.returnOuterSize,includeMargins: settings.includeMargins,callback: settings.callback,resizeObserver: null};_.init = function() {_.resizeObserver = new ResizeObserver(function() {if ( $('#'+_.$el.get(0).id).length == 0 ) {_.destroy();return;}
if ( _.callback ) _.callback.call(this,_.$el,getNewSize());});_.resizeObserver.observe(_.$el.get(0));_.$el.addClass('s123-resize-observer');};_.destroy = function() {_.resizeObserver.unobserve(_.$el.get(0));_.$el.removeClass('s123-resize-observer');};function getNewSize() {if ( _.returnOuterSize ) {return {width: _.$el.outerWidth(_.includeMargins),height: _.$el.outerHeight(_.includeMargins)};} else {return {width: _.$el.width(),height: _.$el.height()};}}
_.init();return _;};return _;}();function S123SectionPadding( settings ) {var _ = {paddingTop: settings.paddingTop,paddingBottom: settings.paddingBottom,calculatePadding: settings.calculatePadding,currentTab: settings.currentTab,tabShowCallback: settings.tabShowCallback,changeCallback: settings.changeCallback,finishTypingCallback: settings.finishTypingCallback,saveCallback: settings.saveCallback,isDisabled: false};_.init = function() {_.$html = $(generateHtml());_.$html.find('#custom input').off('input.S123SectionPadding').on('input.S123SectionPadding', function( event, changeWithoutSaving ) {var $this = $(this);if ( $this.data('type') == 'paddingTop')  _.paddingTop = $this.val();if ( $this.data('type') == 'paddingBottom')  _.paddingBottom = $this.val();if ( _.changeCallback ) _.changeCallback.call(this,$this.data('type'),$this.val());if ( changeWithoutSaving ) return;clearTimeout(this.typingDelay);this.typingDelay = setTimeout( function() {if ( _.finishTypingCallback ) _.finishTypingCallback.call(this,$this.data('type'),$this.val());if ( _.saveCallback ) _.saveCallback.call(this);},500);});_.$html.find('.s123-s-p-custom-padding-input').off('change.S123SectionPadding').on('change.S123SectionPadding', function( event, changeWithoutSaving ) {if ( _.isDisabled ) return;var $this = $(this);var $paddingTop = _.$html.find('[data-type="paddingTop"]');var $paddingBottom = _.$html.find('[data-type="paddingBottom"]');$paddingTop.val(getPaddings('top'));$paddingBottom.val(getPaddings('bottom'));var state = $this.prop('checked') ? 'custom' : 'auto';_.setTab(state);if ( _.tabShowCallback ) _.tabShowCallback.call(this,state,$paddingTop.val(),$paddingBottom.val());if ( changeWithoutSaving ) return;if ( _.saveCallback ) _.saveCallback.call(this);});_.setTab(_.currentTab);};_.setTab = function( tab ) {var $tabs = _.$html.find('.tab');$tabs.hide();$tabs.filter('#'+tab).fadeIn();};_.enable = function() {_.isDisabled = false;_.$html.filter('.s123-s-p-custom-padding-box').removeClass('disabled');_.$html.closest('.custom-padding').tooltip('destroy');};_.disable = function() {_.isDisabled = true;_.$html.filter('.s123-s-p-custom-padding-box').addClass('disabled');_.$html.find('.s123-s-p-custom-padding-input').prop('checked',false);_.$html.closest('.custom-padding').tooltip({title: translations.sectionPadding.disabledTooltip,container: 'body',placement: 'auto'});};_.hide = function() {_.$html.hide();};_.show = function() {_.$html.show();};function generateHtml() {var html = '';var state = _.currentTab === 'custom' ? 'checked' : '';html += '<div class="s123-s-p-custom-padding-box">';html += '<div class="row">';html += '<div class="col-xs-9">';html += '<label>'+translations.sectionPadding.customPadding+'</label>';html += '</div>';html += '<div class="col-xs-3">';html += '<label class="pull-right">';html += '<input class="ace ace-switch s123-s-p-custom-padding-input" type="checkbox" '+state+'>';html += '<span class="lbl" style="margin: 0;"></span>';html += '</label>';html += '</div>';html += '<div class="col-xs-12 s123-s-p-custom-padding-properties">';html += '<div class="tab-content form-group">';html += '<div id="custom" class="tab">';html += '<div class="top">';html += '<label>'+translations.sectionPadding.top+'</label>';html += '<input type="number" min="0" class="form-control" placeholder="0px" data-type="paddingTop" value="' + getPaddings('top') + '">';html += '</div>';html += '<div class="bottom">';html += '<label>'+translations.sectionPadding.bottom+'</label>';html += '<input type="number" min="0" class="form-control" placeholder="0px" data-type="paddingBottom" value="' + getPaddings('bottom') + '">';html += '</div>';html += '</div>';html += '</div>';html += '</div>';html += '</div>';html += '</div>';return html;}
function getPaddings( type ) {switch( type ) {case 'top':var padding = $.isNumeric(_.paddingTop) ? _.paddingTop : null;break;case 'bottom':var padding = $.isNumeric(_.paddingBottom) ? _.paddingBottom : null;break;}
if ( !$.isNumeric(padding) ) {var defPadding = _.calculatePadding ? _.calculatePadding.call(this,type) : null;if ( $.isNumeric(defPadding) ) {padding = defPadding;} else {padding = 0;}}
return padding;}
_.init();return _;};function addFloatingMenu( $options ) {if ( $options.$element.find('.p-m-b-floating-menu[data-type="'+$options.type+'"]').length !== 0 && !$options.allowMultiple ) return;var $menu = $('<div class="p-m-b-floating-menu" data-type="'+$options.type+'"></div>');if ( $options.buttons ) {$.each($options.buttons, function(i, button) {addFloatingMenuBtn($menu,button,false);});}
$options.$element.append($menu);if ( $.inArray($options.$element.css('position'),['absolute','relative','fixed']) === -1 ) {$options.$element.css({ position: 'relative' });}
return $menu;};function addFloatingMenuBtn( $menu, settings, isManuallyAdded ) {if ( isManuallyAdded && $menu.find('[data-type="'+settings.type+'"]').length > 0 ) return;var $btn = $('<a class="p-m-b-floating-menu-btn p-m-b-design '+ (settings.classList ? settings.classList : '') + '" data-type="'+settings.type+'" '+ (settings.customAttributes ? settings.customAttributes : '') + '></a>');if ( settings.icon && !settings.text ) {$btn.html(settings.icon);} else if ( !settings.icon && settings.text ) {$btn.text(settings.text);} else if ( settings.icon && settings.text ) {$btn.html(settings.icon + '&nbsp;' + '<span>' + settings.text + '</span>');}
$btn.off('click.p_m_helpers').on('click.p_m_helpers',function( event ) {if ( settings.click ) settings.click.call(this,event);});$menu.append($btn);if ( settings.buttons && settings.buttons.length > 0 ) {switch( settings.menuType ) {case 'popover':var $container = $('<div class="p-m-b-btn-more-container" data-type="'+settings.type+'"></div>');var $list = $('<div class="p-m-b-btn-more-list"></div>');$container.append($btn);for ( var i = 0; i < settings.buttons.length ; i++ ) {var $item = $('<div class="p-m-b-floating-menu" data-type="'+settings.buttons[i].type+'"></div>');addFloatingMenuBtn($item,settings.buttons[i],true);$list.append($item);}
var s123PopOver = new S123PopOver({$el: $btn,customClass: 'p-m-b-btn-more-popover',popoverSettings: {placement: 'auto bottom',content: $list},showCallback: function() {$list.find('.p-m-b-floating-menu-btn:not(.s123-p)').one('click', function( event ) {s123PopOver.hide();});if ( $menu.closest('.w-helper, .preview-highlighter').length > 0 ) {OutlineHandler.focus($menu.closest('.w-helper, .preview-highlighter'));$(document).off('click.moreBtnHelper').on('click.moreBtnHelper', function( event ) {if ( $(event.target).closest('.w-helper, .preview-highlighter').length > 0 ) return;OutlineHandler.blur($menu.closest('.w-helper, .preview-highlighter'));$(document).off('click.moreBtnHelper');});}}});$btn
.off('show.bs.popover.moreBtn').on('show.bs.popover.moreBtn', function( event ) {OutlineHandler.focus(settings.$el);})
.off('shown.bs.popover.moreBtn').on('shown.bs.popover.moreBtn', function( event ) {$list.find('.p-m-b-floating-menu-btn:not(.s123-p)').one('click', function( event ) {s123PopOver.hide();});$btn.on('click.preventOutlineBlur', function(event) {$btn.addClass('m-b-k-o');});})
.off('hide.bs.popover.moreBtn').on('hide.bs.popover.moreBtn', function( event ) {$list.find('.p-m-b-floating-menu-btn').each(function( index, btn ) {var $this = $(this);if ( $this.data('s123-p') ) $this.data('s123-p').hide();});})
.off('hidden.bs.popover.moreBtn').on('hidden.bs.popover.moreBtn', function( event ) {$btn.off('click.preventOutlineBlur');if ( $btn.hasClass('m-b-k-o') ) {$btn.removeClass('m-b-k-o');return;}
OutlineHandler.blur(settings.$el);});break;default:$btn.attr('data-toggle','dropdown');var $container = $('<div class="p-m-b-btn-more-container p-m-b-floating-menu dropdown" data-type="'+settings.type+'"></div>');var $dropDown = $('<ul class="dropdown-menu"></ul>');$container.append($btn);$container.append($dropDown);for ( var i = 0; i < settings.buttons.length ; i++ ) {var $li = $('<li class="p-m-b-floating-menu" data-type="'+settings.type+'"></li>');addFloatingMenuBtn($li,settings.buttons[i],true);$dropDown.append($li);}
break;}
$menu.append($container);}
if ( $menu.children().length == 1 ) {$menu.addClass('one-btn-only');} else {$menu.removeClass('one-btn-only');}
if ( settings.addCallback ) settings.addCallback.call(this,$btn);};function openItemEditModal( moduleID, moduleTypeNUM, itemUniqueID, loadedCallback = null, manualAction = '' ) {var $wizardPage = topWindow.Wizard.Pages.getPage(moduleID);var action = itemUniqueID == '' ? 'itemsPage' : 'editItem';if ( manualAction.length >  0 ) {action = manualAction;}
if ( action == 'itemsPage' ) {if ( moduleTypeNUM == 1000 || moduleTypeNUM == 159 ) {topWindow.OpenWizardTab('pagesTab',true);topWindow.OpenPromoInlineEdit($wizardPage,moduleTypeNUM,loadedCallback);$wizardPage.data('prevent-module-scroll',true);topWindow.$('.inline-module').addClass('no-header');topWindow.$(topWindow.document).one('animation_manager.hide', function() {topWindow.$('.inline-module').removeClass('no-header');$wizardPage.data('prevent-module-scroll',false);});}
topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+moduleID+'"]').trigger('click','wizard-preview');if ( topWindow.RichPage.isChild($wizardPage) ) {topWindow.Wizard.Pages.modeManager.set('richPage',topWindow.RichPage.getParent($wizardPage).data('moduleid'),false);}} else {if ( moduleTypeNUM == '113' ) {var collectionData = {uniqueID : itemUniqueID,moduleID : moduleID,isFromCollection : false};$.cookie($(websiteID).val()+'_113_collection',JSON.stringify(collectionData),{ expires: 1, path: '/' });itemUniqueID = '';action = 'itemsPage';}
topWindow.OpenModuleManagmentWizardFromPreview(moduleID,moduleTypeNUM,itemUniqueID,IsHomepage(),action);}}
function S123SortableSections( settings ) {var _ = {$section: settings.$section,$btnsContainer: settings.$btnsContainer,disabled: false};_.init = function() {if ( topWindow.modulesArr[_.$section.data('module-type-num')].module_kind == '4' ) return;if ( topWindow.modulesArr[_.$section.data('module-type-num')].module_kind == '5' ) return;if ( topWindow.modulesArr[_.$section.data('module-type-num')].module_kind == '6' ) return;_.$btnsContainer.append(generateHtml(_.$section));var $s123Sortable = _.$section.find('.s123-sortable');$s123Sortable.off('click.s123Sortable').on('click.s123Sortable', function( event ) {event.preventDefault();var $this = $(this);if ( $this.hasClass('disabled') ) return;var moduleID = $this.data('module-id');var moduleTypeNum = $this.data('module-type');var $module = topWindow.Wizard.Pages.getPage($(this).data('module-id'));if ( $this.hasClass('move-section-up') ) {$module.insertBefore(getPrevSection($module));} else if ( $this.hasClass('move-section-down') ) {$module.insertAfter(getNextSection($module));}
$this.tooltip('hide');topWindow.BuildToolJSON();topWindow.SortPreviewModules(true);topWindow.window.scrollPreview = '#section-' + $(this).data('module-id');topWindow.scrollToPointInPreview();_.disableEnableSortingIcon();topWindow.AutoSaveWizard(false,true);var wizardActiveButton = topWindow.ActionButtons.getActiveButton();if ( wizardActiveButton ) {wizardActiveButton.rebuildOption('scroll');} else if ( topWindow.$('.inline-wizard-iframe[data-moduletypenum="1000"]').length > 0 ) {var promoActiveButton = topWindow.$('.inline-wizard-iframe[data-moduletypenum="1000"]').get(0).contentWindow.ActionButtons.getActiveButton();if ( promoActiveButton ) {promoActiveButton.rebuildOption('scroll');}}});_.disableEnableSortingIcon();$s123Sortable.data('s123-sortable',_);};function generateHtml( $section ) {var html = '';html += '<div class="s123-sortable-sections">';html += '<a href="#" class="p-m-b-design s123-sortable move-section-up tooltip-manual" data-module-id="' + $section.data('module-id') + '" data-module-type="' + $section.data('module-type-num') + '"><i class="fa fa-arrow-up"></i></a>';html += '<a href="#" class="p-m-b-design s123-sortable move-section-down tooltip-manual" data-module-id="' + $section.data('module-id') + '" data-module-type="' + $section.data('module-type-num') + '"><i class="fa fa-arrow-down"></i></a>';html += '</div>';return html;}
function getNextSection( $module ) {var $nexModule = $module.next();if ( isNoSectionModule($nexModule.data('moduletypenum')) ) {$nexModule = getNextSection($nexModule);}
if ( !topWindow.IsSinglePage() && (IsHomepage() && !IsRichPage()) && $nexModule.data('module-mp-show-in-home') == '0' ) {$nexModule = getNextSection($nexModule);}
return $nexModule;}
function getPrevSection( $module ) {var $prevModule = $module.prev();if ( isNoSectionModule($prevModule.data('moduletypenum')) ) {$prevModule = getPrevSection($prevModule);}
if ( !topWindow.IsSinglePage() && (IsHomepage() && !IsRichPage()) && $prevModule.data('module-mp-show-in-home') == '0' ) {$prevModule = getPrevSection($prevModule);}
return $prevModule;}
_.disableEnableSortingIcon = function() {_.disabled = false;if ( IsRichPage() ) {var isPromoFirst = true;var $modules = topWindow.Wizard.Pages.getPage($('.s123-module-rich-page').data('module-id')).find('ul > li').filter(function( index, module ) {var $module = $(module);if ( isPromoFirst && ($module.data('moduletypenum') == 1000 || $module.data('moduletypenum') == 167) ) {return false;}
if ( $module.data('moduletypenum') != 1000 && $module.data('moduletypenum') != 167 ) {isPromoFirst = false;}
return true;});} else if ( IsHomepage() ) {var $modules = topWindow.Wizard.Pages.listParent.children().filter(function( index, module ) {var $module = $(module);if ( $module.data('moduletypenum') == 78 ) {_.disabled = true;}
if ( !$module.data('module-mp-show-in-home') ) return false;if ( isNoSectionModule($module.data('moduletypenum')) ) return false;return true;});}
_.$section.parent().children().each(function(index, section) {var $section = $(section);var $moveSectionUp = $section.find('.s123-sortable.move-section-up');var $moveSectionDown = $section.find('.s123-sortable.move-section-down');var $module = topWindow.Wizard.Pages.getPage($section.data('module-id'));var index = $modules.index($module);$moveSectionUp.removeClass('disabled');$moveSectionDown.removeClass('disabled');if ( index == 0 ) {$moveSectionUp.addClass('disabled');}
if ( IsRichPage() ) {if ( ($module.data('moduletypenum') == 1000 || $module.data('moduletypenum') == 167) && index <= 1 ) {$moveSectionUp.addClass('disabled');$moveSectionUp.addClass('rich-page-disabled-promo');} else if ( ($module.next().data('moduletypenum') == 1000 || $module.next().data('moduletypenum') == 167) && index == 0  ) {$moveSectionDown.addClass('disabled');$moveSectionDown.addClass('rich-page-disabled-promo');}}
if ( index == $modules.length - 1 ) {$moveSectionDown.addClass('disabled');}
addTooltip($moveSectionUp,'sortUp');addTooltip($moveSectionDown,'sortDown');if ( _.disabled ) {var $moveSectionUp = $section.find('.s123-sortable.move-section-up');var $moveSectionDown = $section.find('.s123-sortable.move-section-down');$moveSectionUp
.add($moveSectionDown)
.addClass('disabled')
.tooltip('destroy')
.tooltip({title: translations.sectionManager.sortingDisabledTooltip,container: 'body',placement: 'top',delay: {show: 2000,hide: 0}});}});}
function isNoSectionModule( moduleTypeNUM ) {if ( topWindow.modulesArr[moduleTypeNUM].module_kind == '4' ) return true;if ( topWindow.modulesArr[moduleTypeNUM].module_kind == '5' ) return true;if ( topWindow.modulesArr[moduleTypeNUM].module_kind == '6' ) return true;return false;}
function addTooltip( $el, type ) {$el.tooltip('destroy');var title = '';if ( $el.hasClass('disabled') ) {title = type == 'sortUp' ? translations.sectionManager.sortUpDisabledTooltip : translations.sectionManager.sortDownDisabledTooltip;} else {title = type == 'sortUp' ? translations.sectionManager.sortUpTooltip : translations.sectionManager.sortDownTooltip;}
$el.tooltip({title: title,container: 'body',placement: 'top',delay: {show: 2000,hide: 0}});}
_.init();return _;};function DuplicateModule( settings ) {var _ = {moduleID: settings.moduleID,moduleTypeNUM: settings.moduleTypeNUM,$btnsContainer: settings.$btnsContainer};_.init = function() {_.$html = $(generateHTML());_.$btnsContainer.append(_.$html);_.$btn = _.$html.find('.duplicate-module');_.$module = _.$html.find('.duplicate-module');_.$btn.off('click.duplicatedModule').on('click.duplicatedModule', function( event ) {event.preventDefault();_.duplicate();});_.$btn.tooltip({title: translations.sectionManager.duplicateModuleTooltip,container: 'body',placement: 'top',delay: {show: 2000,hide: 0}});};_.duplicate = function() {topWindow.g_ManageAddModuleData = {action: 'after',$module: topWindow.Wizard.Pages.getPage(_.moduleID),};topWindow.duplicateModule(_.moduleTypeNUM,_.moduleID);};function generateHTML() {var html = '';html += '<div>';html += '<a class="p-m-b-design duplicate-module tooltip-manual">';html += '<i class="ace-icon fa fa-files-o"></i>';html += '</a>';html += '</div>';return html;}
_.init();return _;}
function ResizableText( settings ) {var _ = {$el: settings.$el,minFontSize: settings.minFontSize,maxFontSize: settings.maxFontSize,$wrapper: null,$section: settings.$section,initCallBack: settings.initCallBack,startCallBack: settings.startCallBack,resizeCallBack: settings.resizeCallBack,endCallBack: settings.endCallBack,customClass: settings.customClass};_.init = function() {if ( _.$el.data('resizable-text') ) _.$el.data('resizable-text').destroy();var heightLimits = getMinMaxResizableHeight();_.$el.wrap('<div class="resizable-text-wrapper visible" data-rel="' + _.$el.get(0).id + '"></div>');_.$wrapper = _.$el.parent();if ( _.customClass ) _.$wrapper.addClass(_.customClass);var resizable = new S123Resizable({$el: _.$wrapper,maxWidth: _.$el.closest('.boxBorder').width(),resizByWidth: false,resizByHeight: true,preserveRatio: false,minHeight: heightLimits.min,maxHeight: heightLimits.max,startCallBack: function( event, ui ) {if ( _.startCallBack ) _.startCallBack.call(this,event,ui);},resizeCallBack: function( event, ui ) {fittText(_.$el);if ( _.resizeCallBack ) _.resizeCallBack.call(this,parseInt(_.$el.css('font-size')));},endCallBack: function( event, ui ) {var fontSize = parseInt(_.$el.css('font-size'));_.$el.css({fontSize: ''});if ( _.endCallBack ) _.endCallBack.call(this,fontSize);}});_.$section.off('textAdded.'+_.$el.get(0).id).on('textAdded.'+_.$el.get(0).id, function( event, elementID ) {if ( elementID != _.$el.get(0).id ) return;_.$wrapper.addClass('visible');});_.$section.off('textRemoved.'+_.$el.get(0).id).on('textRemoved.'+_.$el.get(0).id, function( event, elementID ) {if ( elementID != _.$el.get(0).id ) return;_.$wrapper.removeClass('visible');});if ( !_.$el.is(':visible') ) {_.$wrapper.removeClass('visible');}
if ( _.initCallBack ) _.initCallBack.call(this,_);_.$el.data('resizable-text',_);};_.destroy = function() {_.$wrapper.data('s123-resizable').destroy();_.$el.unwrap();};function fittText( $elements ) {if ( $elements.length == 0 ) return;$elements.each(function(index, el) {var $this = $(this);var steps = 1;$this.css('font-size',(parseInt($this.css('font-size')) + 10) + 'px');while ( isOverflowing(this) && steps < 50 ) {$this.css('font-size',(parseInt($this.css('font-size')) - 1) + 'px');steps ++;}});function isOverflowing( el ) {el.classList.add('get-clean-scroll-width');var isOverflowing = el.clientWidth < el.scrollWidth || el.clientHeight < el.scrollHeight;el.classList.remove('get-clean-scroll-width');return isOverflowing;}}
function getMinMaxResizableHeight() {var heightLimits = {max: null,min: null};var $clone = _.$el.clone();_.$el.parent().append($clone);$clone.css({fontSize: _.minFontSize + 'px'});heightLimits.min = $clone.height();$clone.css({fontSize: _.maxFontSize + 'px'});heightLimits.max = $clone.height();$clone.remove();return heightLimits;}
_.init();return _;};function S123ToolBar( settings ) {var _ = {$el: settings.$el,optionsList: settings.optionsList ? settings.optionsList : [],clickCallback: settings.clickCallback,showCallback: settings.showCallback,hideCallback: settings.hideCallback,initCallback: settings.initCallback,preventHideToolBar: false};_.init = function () {if ( _.$el.data('s123-tool-bar') ) _.$el.data('s123-tool-bar').destroy();var html = '';html += '<div data-rel="' + _.$el.get(0).id + '" class="s123-tool-bar">';if ( _.optionsList.indexOf('weight') != -1 ) {html += '<a data-type="weight" href="#" data-active-supported="true">'+S123.s123IconToSvg.getHtml('bold','','')+'</a>';}
if ( _.optionsList.indexOf('italic') != -1 ) {html += '<a data-type="italic" href="#" data-active-supported="true">'+S123.s123IconToSvg.getHtml('italic','','')+'</a>';}
if ( _.optionsList.indexOf('fontSize') != -1 ) {html += '<a data-type="fontSize" data-action="increase" href="#">'+S123.s123IconToSvg.getHtml('plus','','')+'</a>';html += '<a data-type="fontSize" data-action="decrease" href="#">'+S123.s123IconToSvg.getHtml('minus','','')+'</a>';}
if ( _.optionsList.indexOf('fontStyle') != -1 ) {html += '<a id="fontStyle_'+_.$el.get(0).id+'" data-type="fontStyle" href="#"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="font" class="svg-inline--fa fa-font fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"></path></svg></a>';}
if ( _.optionsList.indexOf('fontResizing') != -1 ) {html += '<a id="fontResizing_'+_.$el.get(0).id+'" data-type="fontResizing" href="#"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="text-size" class="svg-inline--fa fa-text-size fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M624 32H272a16 16 0 0 0-16 16v80a16 16 0 0 0 16 16h16a16 16 0 0 0 16-16V96h112v336h-48a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16h-48V96h112v32a16 16 0 0 0 16 16h16a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM304 224H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h16a16 16 0 0 0 16-16v-32h80v160H96a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16h-32V272h80v32a16 16 0 0 0 16 16h16a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16z"></path></svg></a>';}
if ( _.optionsList.indexOf('textMargins') != -1 ) {html += '<a id="textMargins_'+_.$el.get(0).id+'" data-type="textMargins" href="#" data-active-supported="true"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrows-alt-v" class="svg-inline--fa fa-arrows-alt-v fa-w-8" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path fill="currentColor" d="M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"></path></svg></a>';}
if ( _.optionsList.indexOf('textLayouts') != -1 ) {html += '<a id="textLayouts_'+_.$el.get(0).id+'" data-type="textLayouts" href="#"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="palette" class="svg-inline--fa fa-palette fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg></a>';}
if ( _.optionsList.indexOf('textPositions') != -1 ) {html += '<a id="textPositions_'+_.$el.get(0).id+'" data-type="textPositions" href="#"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="align-center" class="svg-inline--fa fa-align-center fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM108.1 96h231.81A12.09 12.09 0 0 0 352 83.9V44.09A12.09 12.09 0 0 0 339.91 32H108.1A12.09 12.09 0 0 0 96 44.09V83.9A12.1 12.1 0 0 0 108.1 96zm231.81 256A12.09 12.09 0 0 0 352 339.9v-39.81A12.09 12.09 0 0 0 339.91 288H108.1A12.09 12.09 0 0 0 96 300.09v39.81a12.1 12.1 0 0 0 12.1 12.1z"></path></svg></a>';}
if ( _.optionsList.indexOf('textShadow') != -1 ) {html += '<a id="textShadow_'+_.$el.get(0).id+'" data-type="textShadow" href="#" data-active-supported="true"><svg aria-hidden="true" focusable="false" data-prefix="fad" data-icon="mountains" class="svg-inline--fa fa-mountains fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><g class="fa-group"><path class="fa-secondary" fill="currentColor" d="M611.14 448h-69.72L357.48 159.68l32.84-50.37c11.57-17.75 39.8-17.75 51.37 0l194 297.6c11.77 18-2.05 41.09-24.55 41.09z" opacity="0.4"></path><path class="fa-primary" fill="currentColor" d="M338.33 189.07L503.5 448H30.92C6.81 448-8 422.81 4.58 403.18l207.9-324.66c12.4-19.36 42.64-19.36 55 0z"></path></g></svg></a>';}
html += '</div>';_.$toolBar = $(html);_.$toolBar.off('click.S123ToolBar').on('click.S123ToolBar','a', function( event ) {event.preventDefault();event.stopPropagation();var $this = $(this);if ( $this.hasClass('disabled') ) return;if ( $this.data('active-supported') ) {$this.toggleClass('active');}
if ( _.clickCallback ) _.clickCallback.call(this,$this);});_.$toolBar.off('mousedown.S123ToolBar').on('mousedown.S123ToolBar', function( event ) {var $popoverController = $(event.target).closest('.s123-p');if ( $popoverController.length > 0 ) {_.$toolBar.find('.s123-p:not(#'+$popoverController.get(0).id+')').popover('hide');}
return false;});$('body').append(_.$toolBar);_.$el.attr('data-has-s123-toolbar',true);_.$el.data('s123-tool-bar',_);if ( _.initCallback ) _.initCallback.call(this,_);};_.show = function() {_.$toolBar.addClass('active');_.$toolBar.css({visibility: 'hidden'});clearTimeout(_.showDelay);_.showDelay = setTimeout(function() {if ( _.showCallback ) _.showCallback.call(this,_);_.$toolBar.css({visibility: ''});},100);};_.hide = function () {if ( _.preventHideToolBar ) return;_.$toolBar.removeClass('active');if ( _.hideCallback ) _.hideCallback.call(this,_);};_.destroy = function() {_.$toolBar.remove();_.$el.attr('data-has-s123-toolbar',false);_.$el.data('s123-tool-bar',null);};_.setPosition = function() {var offset = _.$el.get(0).getBoundingClientRect();var left = offset.left;var top = offset.top + $(window).scrollTop();var outlineOffSet = 7;if ( top < 0 ) {top = _.$toolBar.outerHeight(true) + $(window).scrollTop();}
if ( $('html[dir="rtl"]').length > 0 ) {if ( navigator.userAgent.toLowerCase().indexOf('firefox') == -1 ) {left -= getScrollbarWidth();}}
_.$toolBar.css({top: (top - _.$toolBar.outerHeight(true)) - outlineOffSet,});var textAlign = _.$el.css('text-align');if ( textAlign != 'left' && textAlign != 'right' && textAlign != 'center' ) {textAlign = $('html[dir="rtl"]').length > 0 ? 'right' : 'left';}
if ( textAlign == 'center' ) {_.$toolBar.css({left: left + (_.$el.outerWidth(true) / 2) - (_.$toolBar.outerWidth(true) / 2)});} else if ( textAlign == 'left' ) {_.$toolBar.css({left: left - outlineOffSet});} else if ( textAlign == 'right' ) {_.$toolBar.css({left: left + (_.$el.outerWidth(true) - _.$toolBar.outerWidth(true) ) + outlineOffSet});}};_.enableOption = function( optionName ) {_.$toolBar.find('[data-type="'+optionName+'"]').removeClass('disabled');};_.disableOption = function( optionName ) {_.$toolBar.find('[data-type="'+optionName+'"]').addClass('disabled');};_.manualActiveHandler = function( optionName, isActive ) {if ( isActive ) {_.$toolBar.find('[data-type="'+optionName+'"][data-active-supported="true"]').addClass('active');} else {_.$toolBar.find('[data-type="'+optionName+'"][data-active-supported="true"]').removeClass('active');}};_.getOptionButton = function( optionName ) {return _.$toolBar.find('[data-type="'+optionName+'"]');};_.init();return _;};function WidgetManager( settings ) {var _ = {$section: settings.$section,moduleID: settings.moduleID,moduleTypeNUM: settings.moduleTypeNUM,$json: settings.$json,$btnsContainer: settings.$btnsContainer,widgets: {}};_.init = function() {_.data = tryParseJSON(_.$json.val());if ( !_.data ) return;$.each(_.data.structures, function( structureID, structureSettings ) {var $structure = _.$section.find('#'+structureID+'.w-m-structure');structureSettings.moduleID = _.moduleID;structureSettings.moduleTypeNUM = _.moduleTypeNUM;structureSettings.$el = $structure;structureSettings.$wrapper = $structure.closest('.w-m-widget-wrapper');structureSettings.moduleSettings = _.data.moduleSettings;_.data.structures[structureID] = new StructureWidget(structureSettings);_.widgets[structureID] = _.data.structures[structureID];$.each(_.data.structures[structureID].columns, function( columnID, columnSettings ) {columnSettings.moduleID = _.moduleID;columnSettings.moduleTypeNUM = _.moduleTypeNUM;columnSettings.$structure = $structure;columnSettings.moduleSettings = _.data.moduleSettings;columnSettings.$el = $structure.find('#'+columnID);var columnObj = new ColumnWidget(columnSettings);_.widgets[columnObj.id] = columnObj;columnObj.widgets = new Widgets(columnObj.widgets);$.each(columnObj.widgets, function( widgetID, settings ) {settings.$el = $('#'+widgetID);var widgetObj = getWidgetInstance(_.data.moduleSettings,columnObj,settings);widgetObj.initComponents();_.widgets[widgetObj.id] = widgetObj;columnObj.widgets[widgetObj.id] = widgetObj;});var widgetsMenu = new WidgetsMenu({$el: columnObj.$el.find('.add-new-widget .add'),menu: _.data.widgetsSettings,selectCallback: function( type ) {var value = _.data.widgetsSettings[type].defValues.value;if ( typeof value === 'object' && value !== null ) {value = tryParseJSON(JSON.stringify(_.data.widgetsSettings[type].defValues.value));}
var newWidgetObj = getWidgetInstance(_.data.moduleSettings,columnObj,{template: _.data.widgetsSettings[type].template,id: topWindow.uniqid(type + '-'),type: type,class: tryParseJSON(JSON.stringify(_.data.widgetsSettings[type].defValues.class)), // clone the object because we don't want to pass the original object so it won't get effected
value: value,advanced: tryParseJSON(JSON.stringify(_.data.widgetsSettings[type].defValues.advanced)), // clone the object because we don't want to pass the original object so it won't get effected
style: tryParseJSON(JSON.stringify(_.data.widgetsSettings[type].defValues.style)), // clone the object because we don't want to pass the original object so it won't get effected
$section: _.$section});addWidgetObjToData(columnID,newWidgetObj,null);columnObj.$widgetContainer.append(newWidgetObj.$wrapper);widgetAddedEvent(columnObj.$el,newWidgetObj);_.$section.trigger('widgetManager.add',[newWidgetObj.$el]);}});showHideColumnAddWidgetBtn(columnObj.$el);_.data.structures[structureID].columns[columnID] = columnObj;});});_.WidgetsFloatingBar.init({structures: _.data.structures,widgetsSettings: _.data.widgetsSettings,moduleSettings: _.data.moduleSettings,$section: _.$section,moduleID: _.$section.data('module-id'),widgetAddeCallback: widgetAddedEvent,widgetRemoveCallback: widgetRemovedEvent,saveCallback: _.save});initSystemWidgetController();WRH.handleWidgetVisibility(_.widgets);};_.updateWidgetObj = function( columnID, widgetObj ) {if ( widgetObj.type == 'structure' ) {_.data.structures[widgetObj.id] = widgetObj;} else if ( widgetObj.type == 'column' ) {var strucutre = _.getStructure(columnID);_.data.structures[strucutre.id].columns[columnID] = widgetObj;} else {var strucutre = _.getStructure(columnID);_.widgets[widgetObj.id] = widgetObj;_.data.structures[strucutre.id].columns[columnID].widgets[widgetObj.id] = widgetObj;}};_.getStructure = function( columnID ) {var strucutreObj = null;$.each(_.data.structures, function( strucutID, strucutre ) {if ( strucutre.columns[columnID] ) {strucutreObj = strucutre;return false;}});return strucutreObj;};_.getWidget = function( widgetID ) {var widgetObj = null;if ( _.data.structures[widgetID] ) {widgetObj = _.data.structures[widgetID];} else {$.each(_.data.structures, function( strucutID, strucutre ) {if ( strucutre.columns[widgetID] ) {widgetObj = strucutre.columns[widgetID];return false;}
var widgetFound = false;$.each(strucutre.columns, function( columnID, column ) {if ( column.widgets[widgetID] ) {widgetObj = column.widgets[widgetID];widgetFound = true;return false;}});if ( widgetFound ) return false;});}
return widgetObj;};_.removeWidget = function( columnID, widgetID ) {var strucutre = _.getStructure(columnID);_.data.structures[strucutre.id].columns[columnID].widgets[widgetID].destroy();delete _.widgets[widgetID];delete _.data.structures[strucutre.id].columns[columnID].widgets[widgetID];};_.save = function ( reloadModule ) {var data = new Data();$.each(_.data.structures, function( structureID, structure ) {data.structures[structureID] = structure.getSettings();});_.$json.val(JSON.stringify({widgetsSettings: _.data.widgetsSettings,structures: data.structures}));updateMultipleSettings(_.moduleID,_.moduleTypeNUM,{widgetsManager: JSON.stringify(data)},function( data ) {if ( !data.success ) return;if ( reloadModule ) {var $module = topWindow.Wizard.Pages.getPage(_.moduleID);var url = '';if ( topWindow.RichPage.isChild($module) ) {url = topWindow.RichPage.getPageUrl($module);}
topWindow.UpdatePreviewAreaByAjax(['#section-' + _.moduleID], function() {topWindow.window.scrollPreview = '#section-'+_.moduleID;topWindow.scrollToPointInPreview();},false,url);}});};function widgetAddedEvent( $column, newWidgetObj ) {newWidgetObj.initComponents();showHideColumnAddWidgetBtn($column);_.save(false);WidgetsAdmin.show(newWidgetObj);}
function widgetRemovedEvent( $column ) {showHideColumnAddWidgetBtn($column);_.save(false);}
function showHideColumnAddWidgetBtn( $column ) {var strucutre = _.getStructure($column.get(0).id);if ( Object.keys(_.data.structures[strucutre.id].columns[$column.get(0).id].widgets).length > 0 ) {$column.removeClass('no-widgets');} else {$column.addClass('no-widgets');}}
function getWidgetInstance( moduleSetting, column, settings ) {settings.moduleID = _.moduleID;settings.moduleTypeNUM = _.moduleTypeNUM;settings.$section = _.$section;settings.columnID = column.id;settings.structureID = column.$structure.get(0).id;settings.moduleSettings = moduleSetting;settings.positions = true;switch( settings.type ) {case 'textWidget':var widgetObj = new TextWidget(settings);break;case 'imageWidget':var widgetObj = new ImageWidget(settings);break;case 'buttonWidget':var widgetObj = new ButtonWidget(settings);break;case 'mailingListWidget':var widgetObj = new MailingListWidget(settings);break;case 'videoWidget':settings.value = tryParseJSON(JSON.stringify(settings.value));var widgetObj = new VideoWidget(settings);break;case 'dividerWidget':var widgetObj = new DividerWidget(settings);break;case 'spacerWidget':settings.positions = false;var widgetObj = new SpacerWidget(settings);break;case 'formWidget':var widgetObj = new FormWidget(settings);break;}
return widgetObj;}
function addWidgetObjToData( columnID, widgetObj, settings ) {var strucutre = _.getStructure(columnID);_.widgets[widgetObj.id] = widgetObj;if ( !settings ) {_.data.structures[strucutre.id].columns[columnID].widgets[widgetObj.id] = widgetObj;} else {var widgetsIDS = Object.keys(_.data.structures[strucutre.id].columns[columnID].widgets);if ( settings.insertAfterWidgetID ) {var index = widgetsIDS.indexOf(settings.insertAfterWidgetID);if ( index == (widgetsIDS.length -1) ) {_.data.structures[strucutre.id].columns[columnID].widgets[widgetObj.id] = widgetObj;} else {_.data.structures[strucutre.id].columns[columnID].widgets = addToObject(_.data.structures[strucutre.id].columns[columnID].widgets,widgetObj.id,widgetObj,(index+1));}} else if ( settings.insertBeforeWidgetID ) {var index = widgetsIDS.indexOf(settings.insertBeforeWidgetID);_.data.structures[strucutre.id].columns[columnID].widgets = addToObject(_.data.structures[strucutre.id].columns[columnID].widgets,widgetObj.id,widgetObj,index);}}
function addToObject(obj, key, value, index) {var temp = {};var i = 0;for ( var prop in obj ) {if ( Object.prototype.hasOwnProperty.call(obj,prop) ) {if (i === index && key && value) {temp[key] = value;}
temp[prop] = obj[prop];i++;}}
if ( !index && key ) {temp[key] = value;}
return temp;}}
function initSystemWidgetController() {var html = '';html += '<div class="w-m-system-widgets">';html += '<a class="p-m-b-design w-m-structure-controller widgets-admin-controller" data-module-id="'+_.moduleID+'" data-widget-id="'+Object.keys(_.data.structures)[0]+'">';html += '<i class="fa fa-cog" aria-hidden="true"></i>';html += '</a>';html += '<a class="p-m-b-design w-m-column-controller widgets-admin-controller">';html += '<i class="fa fa-columns" aria-hidden="true"></i>';html += '</a>';html += '</div>';var $html = $(html);var content = '';$.each(_.data.structures, function(structureID, structure) {content += '<div class="w-m-controllers-container">';$.each(structure.columns, function(columnID, column) {content += '<div class="w-m-controller widgets-admin-controller" data-module-id="'+_.moduleID+'" data-widget-id="'+columnID+'"></div>';});content += '</div>';});var $content = $(content);if ( $content.find('.w-m-controller').length == 1 ) {$html.find('.w-m-column-controller').addClass('widgets-admin-controller');$html.find('.w-m-column-controller').data('module-id',_.moduleID);$html.find('.w-m-column-controller').data('widget-id',$content.find('.w-m-controller').data('widget-id'));} else {var s123PopOver = new S123PopOver({$el: $html.find('.w-m-column-controller'),customClass: 'w-m-controllers',popoverSettings: {placement: 'auto bottom',content: $content,container: _.container},showCallback: function() {if ( WidgetsAdmin.isActive ) {$content.find('.w-m-controller[data-widget-id="'+WidgetsAdmin.widgetObj.id+'"]').addClass('active');}
$content.find('.w-m-controller').off('click').on('click', function( event ) {s123PopOver.hide();});},hideCallback: function() {$content.find('.w-m-controller').removeClass('active');}});}
_.$btnsContainer.append($html);}
function Data( data ) {function Def() {return {structures: {}};}
var def = new Def();if ( data ) {data = topWindow.objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
return data;};function Widgets( data ) {function Def() {return {};}
var def = new Def();if ( data ) {data = topWindow.objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
return data;};function WidgetsMenu( settings ) {var _ = {$el: settings.$el,menu: settings.menu,showCallback: settings.showCallback,hideCallback: settings.hideCallback,selectCallback: settings.selectCallback};_.init = function() {var $html = $(generateHtml());var s123PopOver = new S123PopOver({$el: _.$el,popoverSettings: {placement: 'auto top',content: $html,container: 'body'},showCallback: function() {$html.find('.w-m-i').off('click').on('click', function( event ) {event.preventDefault();if ( _.selectCallback ) _.selectCallback.call(this,$(this).data('type'));s123PopOver.hide();});if ( _.showCallback ) _.showCallback.call(this);},hideCallback: function() {if ( _.hideCallback ) _.hideCallback.call(this);}});};function generateHtml() {var html = '';html += '<div class="w-m-container">';$.each(_.menu, function( type, item ) {html += '<div class="w-m-i" data-type="' + type + '">';html += '<div class="w-m-i-preview">' + item.preview + '</div>';html += '</div>';});html += '</div>';return html;}
_.init();return _;};_.WidgetsFloatingBar = function() {var _ = {$bars: {},resizeControllerOffset: 10,structures: {},widgetsSettings: {},moduleSettings: {},$section: {},moduleID: '',widgetAddeCallback: null,widgetRemoveCallback: null,saveCallback: null};_.init = function( settings ) {_.structures = settings.structures;_.widgetsSettings = settings.widgetsSettings;_.moduleSettings = settings.moduleSettings;_.$section = settings.$section;_.widgetAddeCallback = settings.widgetAddeCallback;_.widgetRemoveCallback = settings.widgetRemoveCallback;_.saveCallback = settings.saveCallback;_.moduleID = _.$section.data('module-id');$(document).off('OutlineHandler.updatePosition.WidgetsManager_'+_.moduleID).on('OutlineHandler.updatePosition.WidgetsManager_'+_.moduleID,function( event, elementID ) {var $el = $('#'+elementID);if ( !isThisModuleWidget($el,_.moduleID) ) return;var $outline = OutlineHandler.$renderedOutlines[elementID].outlines.$bottom;var widgetObj = getWidget($el);if ( _.$bars[widgetObj.id] ) {updatePosition(widgetObj,$outline);}});$(document).off('OutlineHandler.rendered.WidgetsManager_'+_.moduleID).on('OutlineHandler.rendered.WidgetsManager_'+_.moduleID,function( event, elementID ) {var $el = $('#'+elementID);if ( !isThisModuleWidget($el,_.moduleID) ) return;render($el,OutlineHandler.$renderedOutlines[elementID].outlines.$bottom);});$(document).off('OutlineHandler.removed.WidgetsManager_'+_.moduleID).on('OutlineHandler.removed.WidgetsManager_'+_.moduleID,function( event, elementID ) {var $el = $('#'+elementID);if ( !isThisModuleWidget($el,_.moduleID) ) return;_.destroy(getWidget($el));});};_.destroy = function( widgetObj ) {if ( !_.$bars[widgetObj.id] ) return;widgetObj.$wrapper.css('z-index','');var popover = _.$bars[widgetObj.id].find('a[data-type="widgetMoreButtons"]').data('s123-p');if ( popover ) {popover.hide();}
_.$bars[widgetObj.id].remove();delete _.$bars[widgetObj.id];};function render( $el, $outline ) {var widgetObj = getWidget($el);if ( widgetObj.type == 'structure' ) return;widgetObj.$wrapper.css('z-index','1');var buttons = getControllersList(widgetObj.id,$('#'+widgetObj.id).closest('.w-m-column'));_.$bars[widgetObj.id] = addFloatingMenu({type: 'widgetButtons',$element: $outline.parent(),buttons: buttons,allowMultiple: true});_.$bars[widgetObj.id].addClass('widgets-floating-bar');_.$bars[widgetObj.id].on('mouseenter.WidgetsFloatingBar', function(event) {$(document).trigger('OutlineHandler.resetHideDelay',[widgetObj.getOutlineElement()]);});updatePosition(widgetObj,$outline);};function disableEnableSortable( widgetObj ) {var popover = _.$bars[widgetObj.id].find('a[data-type="widgetMoreButtons"]').data('s123-p');if ( popover ) {var $sortDown = popover.popoverSettings.content.find('[data-type="sortDown"]');var $sortUp = popover.popoverSettings.content.find('[data-type="sortUp"]');$sortDown.removeClass('disabled');$sortUp.removeClass('disabled');if ( widgetObj.$wrapper.next('.w-m-widget-wrapper').length == 0 ) {$sortDown.addClass('disabled');}
if ( widgetObj.$wrapper.prev('.w-m-widget-wrapper').length == 0 ) {$sortUp.addClass('disabled');}}}
function updatePosition( widgetObj, $outline ) {_.$bars[widgetObj.id].css({top: parseInt($outline.css('top')) + 'px',left: (parseInt($outline.css('left')) + $outline.outerWidth(true)) - _.$bars[widgetObj.id].outerWidth(true) + 'px'});if ( widgetObj.hasBottomResizeController ) {_.$bars[widgetObj.id].addClass('has-bottom-resize-controller');}}
function getControllersList( widgetID, $column ) {var structure = _.structures[$column.closest('.w-m-structure').get(0).id];var column = structure.columns[$column.get(0).id];var widgetObj = WidgetsManagers.getWidget(_.moduleID,widgetID);var controllers = [{text: translations.edit,type: 'edit',addCallback: ( $btn ) => {$btn.addClass('widgets-admin-controller');$btn.data('module-id',_.moduleID);$btn.data('widget-id',widgetID);}},{type: 'widgetMoreButtons',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="ellipsis-h" class="svg-inline--fa fa-ellipsis-h fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg>',
menuType: 'popover',$el: widgetObj.$el,addCallback: function( $btn ) {var popover = $btn.data('s123-p');$btn
.off('show.bs.popover.widgetsManager').on('show.bs.popover.widgetsManager', function( event ) {disableEnableSortable(widgetObj);if ( WidgetsAdmin.isActive ) {WidgetsAdmin.show(widgetObj);}})
.off('shown.bs.popover.widgetsManager').on('shown.bs.popover.widgetsManager', function( event ) {OutlineHandler.focus(widgetObj.getOutlineElement());$btn.one('hidden.bs.popover.widgetsManager', function( event ) {if ( WidgetsAdmin.isActive && WidgetsAdmin.widgetObj.id == widgetObj.id ) return;widgetObj.removeOutline();});popover.popoverSettings.content.on('click','.p-m-b-floating-menu-btn:not(.s123-p)', function( event ) {popover.popoverSettings.content.find('.s123-p').data('s123-p').hide();});});},buttons: [{type: 'add',icon: '<i class="fa fa-plus"></i>',text: translations.addNewWidget,addCallback: function( $btn ) {var widgetsMenu = new WidgetsMenu({$el: $btn,menu: _.widgetsSettings,showCallback: function() {OutlineHandler.focus(widgetObj.getOutlineElement());},selectCallback: function( type ) {var value = _.widgetsSettings[type].defValues.value;if ( typeof value === 'object' && value !== null ) {value = tryParseJSON(JSON.stringify(_.widgetsSettings[type].defValues.value));}
var newWidgetObj = getWidgetInstance(_.moduleSettings,column,{template: _.widgetsSettings[type].template,id: topWindow.uniqid(type+'-'),type: type,class: tryParseJSON(JSON.stringify(_.widgetsSettings[type].defValues.class)), // clone the object because we don't want to pass the original object so it won't get effected
value: value,advanced: tryParseJSON(JSON.stringify(_.widgetsSettings[type].defValues.advanced)),style: tryParseJSON(JSON.stringify(_.widgetsSettings[type].defValues.style)), // clone the object because we don't want to pass the original object so it won't get effected
$section: _.$section});addWidgetObjToData(column.id,newWidgetObj,{insertAfterWidgetID: widgetObj.id});newWidgetObj.$wrapper.insertAfter(widgetObj.$wrapper);if ( _.widgetAddeCallback ) _.widgetAddeCallback.call(this,$column,newWidgetObj);_.$section.trigger('widgetManager.add',[newWidgetObj.$el]);if ( WidgetsAdmin.isActive && WidgetsAdmin.widgetObj.id == widgetObj.id ) return;widgetObj.removeOutline();}});}},{icon: '<i class="fa fa-arrow-up"></i>',text: translations.moveUp,type: 'sortUp',click: function( event ) {event.preventDefault();if ( $(this).hasClass('disabled') ) return;sortWidget('up',column.id,widgetObj);}},{icon: '<i class="fa fa-arrow-down"></i>',text: translations.moveDown,type: 'sortDown',click: function( event ) {event.preventDefault();if ( $(this).hasClass('disabled') ) return;sortWidget('down',column.id,widgetObj);}},{type: 'remove',icon: '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="trash" class="svg-inline--fa fa-trash fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"></path></svg>',
text: translations.remove,click: function( event ) {event.preventDefault();_.destroy(widgetObj);_.structures[structure.id].columns[column.id].widgets[widgetObj.id].destroy();WidgetsManagers.removeWidget(_.moduleID,column.id,widgetObj.id);if ( _.widgetRemoveCallback ) _.widgetRemoveCallback.call(this,_.$section.find('#'+column.id));}}]}];return widgetObj.controllers.concat(controllers);}
function getWidget( $widget ) {var widgetObj = null;if ( $widget.hasClass('resizable-text-wrapper') ) {widgetObj = WidgetsManagers.getWidget(_.moduleID,$widget.find('.s123-widget').get(0).id);} else {widgetObj = WidgetsManagers.getWidget(_.moduleID,$widget.get(0).id);}
return widgetObj}
function isThisModuleWidget( $el, moduleID ) {if ( $el.hasClass('w-m-column') ) return false;if ( $el.attr('data-type') == 'structure' ) return false;return $el.closest('.s123-module[data-module-id="'+moduleID+'"][data-module-type-num="159"]').length > 0;}
function sortWidget( action, columnID, widgetObj ) {var strucutre = WidgetsManagers.getStructure(_.moduleID,columnID);var settings = null;switch ( action ) {case 'up':var $prev = widgetObj.$wrapper.prev('.w-m-widget-wrapper');widgetObj.$wrapper.insertBefore($prev);OutlineHandler.setPosition(widgetObj.$el.get(0).id);settings = {insertBeforeWidgetID: getWidget($prev.find('.s123-widget')).id};break;case 'down':var $next = widgetObj.$wrapper.next('.w-m-widget-wrapper');widgetObj.$wrapper.insertAfter($next);OutlineHandler.setPosition(widgetObj.$el.get(0).id);settings = {insertAfterWidgetID: getWidget($next.find('.s123-widget')).id};break;}
delete _.structures[strucutre.id].columns[columnID].widgets[widgetObj.id];addWidgetObjToData(columnID,widgetObj,settings);$(document).trigger('s123.page.ready.refreshAOS');if ( _.saveCallback ) _.saveCallback.call(this,false);}
return _;}();_.init();return _;};class WidgetsInterface {constructor() {this.responsiveSupport = {content: [''],advanced: ['margin','padding']};}
getAdvancedStyles() {var elementType = 'container';if ( this.type == 'structure' || this.type == 'column' ) {elementType = 'wrapper';}
var advancedStyles = {};advancedStyles['margin-top'] =  WidgetsManagers.getVal(this.advanced.style[elementType],'margin-top','');advancedStyles['margin-right'] = WidgetsManagers.getVal(this.advanced.style[elementType],'margin-right','');advancedStyles['margin-bottom'] = WidgetsManagers.getVal(this.advanced.style[elementType],'margin-bottom','');advancedStyles['margin-left'] = WidgetsManagers.getVal(this.advanced.style[elementType],'margin-left','');advancedStyles['padding-top'] = WidgetsManagers.getVal(this.advanced.style[elementType],'padding-top','');advancedStyles['padding-right'] = WidgetsManagers.getVal(this.advanced.style[elementType],'padding-right','');advancedStyles['padding-bottom'] = WidgetsManagers.getVal(this.advanced.style[elementType],'padding-bottom','');advancedStyles['padding-left'] = WidgetsManagers.getVal(this.advanced.style[elementType],'padding-left','');return advancedStyles;}
getOutlineElement() {return this.$el;}
removeOutline() {OutlineHandler.blur(this.getOutlineElement());}
generateCSS() {var css = {widget: {computer: '',mobile: '',tablet: ''},element: {computer: '',mobile: '',tablet: ''},container: {computer: '',mobile: '',tablet: ''},wrapper: {computer: '',mobile: '',tablet: ''}};$.each(this.style, function( elementType, styles ) {if ( elementType == 'custom' ) return;$.each(styles,function( attribute, value ) {if ( attribute.indexOf('m_') != -1 ) {css[elementType].mobile += attribute.replace('m_','')+':'+value+'; ';} else if ( attribute.indexOf('t_') != -1 ) {css[elementType].tablet += attribute.replace('t_','')+':'+value+'; ';} else {css[elementType].computer += attribute+':'+value+'; ';}});});$.each(this.advanced.style, function( elementType, styles ) {$.each(styles, function( attribute, value ) {if ( attribute.indexOf('m_') != -1 ) {css[elementType].mobile += attribute.replace('m_','')+':'+value+'; ';} else if ( attribute.indexOf('t_') != -1 ) {css[elementType].tablet += attribute.replace('t_','')+':'+value+'; ';} else {css[elementType].computer += attribute+':'+value+'; ';}});});var rootSelector = '.s123-widgets-module .promo-container';var style = '<style class="w-m-style">';if ( css.widget.computer.length > 0 ) {style += rootSelector + ' #'+this.id+' {';style += css.widget.computer;style += '}';}
if ( css.element.computer.length > 0 ) {style += rootSelector + ' #'+this.id+' .s123-widget-element {';style += css.element.computer;style += '}';}
if ( css.wrapper.computer.length > 0 ) {style += rootSelector + ' .w-m-widget-wrapper[data-id="'+this.id+'"] {';style += css.wrapper.computer;style += '}';}
if ( css.container.computer.length > 0 ) {style += rootSelector + ' #'+this.id+' .w-m-widget-container[data-id="'+this.id+'"] {';style += css.container.computer;style += '}';}
if ( this.generateCustomCSS ) {style += this.generateCustomCSS(rootSelector);}
style += '@media(min-width: 768px) and (max-width: 1024px) {';if ( css.widget.tablet.length > 0 ) {style += rootSelector + ' #'+this.id+' {';style += css.widget.tablet;style += '}';}
if ( css.element.tablet.length > 0 ) {style += rootSelector + ' #'+this.id+' .s123-widget-element {';style += css.element.tablet;style += '}';}
if ( css.wrapper.tablet.length > 0 ) {style += rootSelector + ' .w-m-widget-wrapper[data-id="'+this.id+'"] {';style += css.wrapper.tablet;style += '}';}
if ( css.container.tablet.length > 0 ) {style += rootSelector + ' #'+this.id+' .w-m-widget-container[data-id="'+this.id+'"] {';style += css.container.tablet;style += '}';}
style += '}';style += '@media(max-width: 767px) {';if ( css.widget.mobile.length > 0 ) {style += rootSelector + ' #'+this.id+' {';style += css.widget.mobile;style += '}';}
if ( css.element.mobile.length > 0 ) {style += rootSelector + ' #'+this.id+' .s123-widget-element {';style += css.element.mobile;style += '}';}
if ( css.wrapper.mobile.length > 0 ) {style += rootSelector + ' .w-m-widget-wrapper[data-id="'+this.id+'"] {';style += css.wrapper.mobile;style += '}';}
if ( css.container.mobile.length > 0 ) {style += rootSelector + ' #'+this.id+' .w-m-widget-container[data-id="'+this.id+'"] {';style += css.container.mobile;style += '}';}
style += '}';style += '</style>';return style;}
getAdminTabObj() {this.setAdminTemplate();if ( this.adminTemplate.length == 0 ) return null;var adminTabObj = {id: 'content',controllerText: topWindow.translations.widgets.content,html: this.adminTemplate};switch( this.type ) {case 'buttonWidget':adminTabObj.title = topWindow.translations.widgets.button.admitTabTitle;break;case 'dividerWidget':adminTabObj.title = topWindow.translations.widgets.divider.admitTabTitle;break;case 'formWidget':adminTabObj.title = topWindow.translations.widgets.form.admitTabTitle;break;case 'imageWidget':adminTabObj.title = topWindow.translations.widgets.image.admitTabTitle;break;case 'mailingListWidget':adminTabObj.title = topWindow.translations.widgets.mailingList.admitTabTitle;break;case 'spacerWidget':adminTabObj.title = topWindow.translations.widgets.spacer.admitTabTitle;break;case 'textWidget':adminTabObj.title = topWindow.translations.widgets.text.admitTabTitle;break;case 'videoWidget':adminTabObj.title = topWindow.translations.widgets.video.admitTabTitle;break;case 'structure':adminTabObj.title = topWindow.translations.widgets.structure.admitTabTitle;break;case 'column':adminTabObj.title = topWindow.translations.widgets.column.admitTabTitle;break;}
return adminTabObj;}
getVisibiltyElementType() {switch( this.type ) {case 'structure':case 'column':return 'widget';break;default:return 'wrapper';break;}}
getVisibiltyDomElement() {switch( this.getVisibiltyElementType() ) {case 'widget':return this.$el;break;case 'wrapper':return this.$wrapper;break;}}
isVisible( deviceType ) {return this.style[this.getVisibiltyElementType()][WRH.propNamespace[deviceType] + 'display'] != 'none';}}
class Widget extends WidgetsInterface {constructor( settings ) {super();this.structureID = '';this.columnID = '';this.id = '';this.type = '';this.value = '';this.advanced = {};this.style = {};this.class = '';this.template = '';this.adminTemplate = '';this.$el = null;this.$wrapper = null;this.$container = null;this.controllers = [];this.classCollection = {wrapper: {alignLeft: 'w-m-left',alignCenter: 'w-m-center',alignRight: 'w-m-right'},widget: {},element: {}};this.positions = false;this.setID(settings.id);this.setType(settings.type);this.setValue(settings.value);this.setAdvanced(settings.advanced);this.setStyle(settings.style);this.setClass(settings.class);this.setTemplate(settings.template);this.moduleSettings = settings.moduleSettings;this.moduleID = settings.moduleID;this.moduleTypeNUM = settings.moduleTypeNUM;this.structureID = settings.structureID;this.columnID = settings.columnID;this.positions = settings.positions;if ( settings.widgetClassCollection ) {this.setWidgetClassCollection(settings.widgetClassCollection);}
if ( settings.elementClassCollection ) {this.setElementClassCollection(settings.elementClassCollection);}
if ( !settings.$el ) {this.template = this.template.replace('{{wrapperClass}}','');this.template = this.template.replace('{{widgetClass}}','');this.template = this.template.replace('{{elementClass}}','');this.template = this.template.replace('{{style}}','');this.render();} else {this.$el = settings.$el;this.$wrapper = this.$el.closest('.w-m-widget-wrapper');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');OutlineHandler.destroy(this.id);OutlineHandler.refresh();}
this.$el.addClass('widgets-admin-controller');this.$el.data('module-id',this.moduleID);this.$el.data('widget-id',this.id);}
setID( id ) {this.id = id;}
setType( type ) {this.type = type;}
setValue( value ) {this.value = value;}
setAdvanced( advanced ) {function Advanced( data ) {function Def() {return {style: {container: {}}};}
var def = new Def();if ( data ) {data = topWindow.objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
return data;};this.advanced = new Advanced(advanced);}
setStyle( style ) {function Style( data ) {function Def() {return {wrapper: {},widget: {},element: {}};}
var def = new Def();if ( data ) {data = topWindow.objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
return data;};this.style = new Style(style);}
setClass( classes ) {this.class = classes;}
setTemplate( template ) {this.template = template;}
setElement( $el ) {this.$el = $el;}
getSettings() {return {id: this.id,type: this.type,class: this.class,value: this.value,advanced: this.advanced,style: this.style};}
updateWidgetClass() {$.each(this.classCollection.wrapper, (index, className) => {this.$wrapper.removeClass(className);});$.each(this.class.wrapper, (index, className) => {this.$wrapper.addClass(this.classCollection.wrapper[index]);});if ( this.class.widget ) {$.each(this.classCollection.widget, (index, className) => {if ( this.type == 'textWidget' ) {this.$widgetEl.removeClass(className);} else {this.$el.removeClass(className);}});$.each(this.class.widget, (index, className) => {if ( this.type == 'textWidget' ) {this.$widgetEl.addClass(this.classCollection.widget[index]);} else {this.$el.addClass(this.classCollection.widget[index]);}});}
if ( this.class.element ) {$.each(this.classCollection.element, (index, className) => {this.$widgetEl.removeClass(className);});$.each(this.class.element, (index, className) => {this.$widgetEl.addClass(this.classCollection.element[index]);});}}
setAdminTemplate() {this.adminTemplate = '';}
setWidgetClassCollection( collection ) {this.classCollection.widget = collection;}
setElementClassCollection( collection ) {this.classCollection.element = collection;}
setProp( settings ) {var widgetObj = WidgetsManagers.getWidget(this.moduleID,this.id);widgetObj[settings.name] = settings.val;switch( settings.name ) {case 'class':widgetObj.updateWidgetClass();break;case 'style':widgetObj.renderCSS();break;}
WidgetsManagers.updateWidgetObj(widgetObj.moduleID,widgetObj.columnID,widgetObj);if ( settings.callBack ) settings.callBack.call(this,widgetObj);if ( settings.save ) {WidgetsManagers.save(widgetObj.moduleID,settings.reloadModule);}}
getAlignment() {return WidgetsManagers.getVal(this.style.wrapper,'text-align');}
setAlignment( activeAlignment ) {WidgetsManagers.removeVal(this.style.wrapper,'text-align');if ( activeAlignment.length > 0 ) WidgetsManagers.setVal(this.style.wrapper,'text-align',activeAlignment);this.setProp({name: 'style',val: this.style,save: true,reloadModule: false});$(document).trigger('OutlineHandler.setPosition',[this.id]);}
renderCSS() {this.$wrapper.children('.w-m-style').remove();this.$wrapper.append(this.generateCSS());}}
class TextWidget extends Widget {constructor( settings ) {settings.widgetClassCollection = {shadow1: 'shadow1',shadow2: 'shadow2',shadow3: 'shadow3',shadow4: 'shadow4',normal: 'weight400',bold: 'weight700',italic: 'italic',};super(settings);this.$widgetEl = this.$el;this.$section = settings.$section;}
initAdminPanel() {}
render() {var html = this.template;html = html.replaceAll('{{id}}',this.id);html = html.replace('{{value}}',this.value);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.renderCSS();}
initComponents() {var _ = this;var minFontSize = 10;var maxFontSize = 200;var id = _.$el.get(0).id;var maxlength = 500;var customClass = _.$widgetEl.attr('class').split(' ');customClass = customClass.filter(function( className ) {if ( !_.classCollection.widget[className] ) return true;return false;});var resizableText = new ResizableText({$el: _.$widgetEl,$section: _.$section,minFontSize: minFontSize,maxFontSize: maxFontSize,customClass: customClass.join(' '),initCallBack: function( resizableText ) {_.$el = resizableText.$wrapper;_.$el.attr('data-type',_.type);},startCallBack: function() {if ( WidgetsAdmin.isActive ) {WidgetsAdmin.show(_);}},resizeCallBack: function( size ) {_.$widgetEl.css('font-size', size + 'px');if ( _.$widgetEl.data('s123-tool-bar') )  _.$widgetEl.data('s123-tool-bar').setPosition();},endCallBack: function( size ) {WidgetsManagers.setVal(_.style.widget,'font-size', size + 'px');WidgetsManagers.setVal(_.style.element,'font-size',size + 'px');_.setProp({name: 'style',val: _.style,save: true,reloadModule: false,callBack: ( widgetObj ) => {_.$section.trigger('resizableText.end',[widgetObj.$widgetEl,size]);}});}});var editableText = new S123EditableElement({$el: _.$widgetEl,disableNewLine: false,maxlength: maxlength,eventCallback: function( eventType ) {if ( eventType == 'focus' ) {_.$container.data('original-text',_.$container.text());if ( _.$widgetEl.data('s123-editable-elements').isDisabled ) return false;_.$widgetEl.data('s123-tool-bar').show();_.$widgetEl.data('s123-tool-bar').setPosition();}
if ( eventType == 'blur' ) {if ( _.$container.text().trim().length == 0 ) {_.$container.text(_.$container.data('original-text'));}
_.hideToolBar();} else if ( eventType == 'input' || eventType == 'paste' ) {clearTimeout(_.$widgetEl.inputFinished);_.$widgetEl.inputFinished = setTimeout(function() {let text = _.$container.html().trim()
.replace(/<br.*?>/ig,'\n')
.replace(/&nbsp;/ig,'');if ( text.trim().length == 0 ) return;_.setProp({name: 'value',val: text,save: true,reloadModule: false});},300);}}});var toolBar = new S123ToolBar({$el: _.$widgetEl,optionsList: ['weight','italic','fontStyle','fontResizing','textShadow'],initCallback: function( toolBar ) {var fontResizing = new S123PopOverSliders({$el: toolBar.$toolBar.find('[data-type="fontResizing"]'),popoverSettings: {placement: 'auto top'},slidersArray: [{type: 'textSize',label: translations.s123ToolBar.textSize,tooltip: '',design: 'oneLine',getValue: function() {return parseInt(_.$widgetEl.css('font-size'));},numberKind: 1,minValue: minFontSize,maxValue: maxFontSize,callback: function( event, value, isLive ) {_.$widgetEl.css('font-size',value + 'px');WidgetsManagers.setVal(_.style.widget,'font-size',value + 'px');WidgetsManagers.setVal(_.style.element,'font-size',value + 'px');_.setProp({name: 'style',val: _.style,save: !isLive, // run save only when user stopped changing font size
reloadModule: false});}},{type: 'letterSpacing',label: translations.s123ToolBar.letterSpacing,tooltip: '',design: 'oneLine',getValue: function() {return parseInt(_.$widgetEl.css('letter-spacing'));},numberKind: 1,minValue: -5,maxValue: 10,callback: function( event, value, isLive ) {WidgetsManagers.setVal(_.style.widget,'letter-spacing',value + 'px');WidgetsManagers.setVal(_.style.element,'letter-spacing',value + 'px');_.setProp({name: 'style',val: _.style,save: !isLive, // run save only when user stopped changing font size
reloadModule: false});}},{type: 'wordSpacing',label: translations.s123ToolBar.wordSpacing,tooltip: '',design: 'oneLine',getValue: function() {return parseInt(_.$widgetEl.css('word-spacing'));},numberKind: 1,minValue: -5,maxValue: 10,callback: function( event, value, isLive ) {WidgetsManagers.setVal(_.style.widget,'word-spacing',value + 'px');WidgetsManagers.setVal(_.style.element,'word-spacing',value + 'px');_.setProp({name: 'style',val: _.style,save: !isLive, // run save only when user stopped changing font size
reloadModule: false});}},{type: 'lineHeight',label: translations.s123ToolBar.lineHeight,tooltip: '',design: 'oneLine',getValue: function() {return ( (parseInt(_.$widgetEl.css('line-height')) * 100 / parseInt(_.$widgetEl.css('font-size'))) / 100);},numberKind: 2,minValue: 0.7,maxValue: 2,callback: function( event, value, isLive ) {WidgetsManagers.setVal(_.style.widget,'line-height',value);WidgetsManagers.setVal(_.style.element,'line-height',value);_.setProp({name: 'style',val: _.style,save: !isLive, // run save only when user stopped changing font size
reloadModule: false});}}],showCallback: function() {toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});var $html = $('<div class="form-group"></div>');var s123PopOver = new S123PopOver({$el: toolBar.$toolBar.find('[data-type="textShadow"]'),popoverSettings: {placement: 'auto top',content: $html},showCallback: function() {(function() {$html.find('.shadow-controller').remove();var options = ['shadow1','shadow2','shadow3','shadow4'];var html = '';html += '<div class="shadow-controller">';html += '<label>' + S123.escapeHtml(translations.s123ToolBar.textShadow) + '</label>';html += '<div class="shadow-controller">';html += '<a href="#" data-value="" class="active">A</a>';html += '<a href="#" data-value="shadow1" class="shadow1">A</a>';html += '<a href="#" data-value="shadow2" class="shadow2">A</a>';html += '<a href="#" data-value="shadow3" class="shadow3">A</a>';html += '<a href="#" data-value="shadow4" class="shadow4">A</a>';html += '</div>';html += '</div>';$html.append(html);$html.find('.shadow-controller a:not([data-value=""])').each(function( inex, el ) {var $this = $(this);if ( _.$widgetEl.hasClass($this.data('value')) ) {$this.siblings().removeClass('active');$this.addClass('active');return false;}});$html.find('.shadow-controller').off('click').on('click','a',function( event ) {event.preventDefault();var $this = $(this);if ( $this.hasClass('active') ) return;$this.siblings().removeClass('active');$this.addClass('active');$.each(options, function(index, val) {WidgetsManagers.removeVal(_.class.widget,val);});if ( $this.data('value').length > 0 ) {WidgetsManagers.setVal(_.class.widget,$this.data('value'),true);}
toolBar.manualActiveHandler('textShadow',$this.data('value').length > 0);_.setProp({name: 'class',val: _.class,save: false,reloadModule: false});clearTimeout(_.$widgetEl['updateDelay_shadow']);_.$widgetEl['updateDelay_shadow'] = setTimeout(function() {_.setProp({name: 'class',val: _.class,save: true,reloadModule: false});},500);});})();toolBar.preventHideToolBar = true;},hideCallback: function() {toolBar.preventHideToolBar = false;}});},showCallback: function() {toolBar.manualActiveHandler('weight',_.$widgetEl.hasClass('weight700'));toolBar.manualActiveHandler('italic',_.$widgetEl.hasClass('italic'));toolBar.manualActiveHandler('textShadow',_.$widgetEl.is('[class*="shadow"]'));if ( !topWindow.Wizard.promoFonts.isItalicSupported(_.id,_.moduleID) ) {toolBar.disableOption('italic');toolBar.getOptionButton('italic').tooltip({title: translations.italic.notSupported,container: 'body',placement: 'auto'});} else {toolBar.getOptionButton('italic').tooltip('destroy');toolBar.enableOption('italic');}
$(document).on('click.textWidget.hideToolBar.'+_.id,function( event ) {var $target = $(event.target);if ( $target.closest('#'+_.id).length > 0 ) return;if ( $target.closest('.popover').length > 0 ) {if ( $('#'+$target.closest('.popover').data('rel')).closest('.s123-tool-bar').length > 0 ) {return;}}
_.hideToolBar();});},hideCallback: function() {$(document).off('click.textWidget.hideToolBar.'+_.id);},clickCallback: function( $btn ) {var italicOptions = ['italic'];switch( $btn.data('type') ) {case 'weight':case 'italic':if ( $btn.data('type') == 'weight' ) {if ( _.$widgetEl.hasClass('weight700') ) {WidgetsManagers.removeVal(_.class.widget,'bold');WidgetsManagers.setVal(_.class.widget,'normal',true);} else {WidgetsManagers.removeVal(_.class.widget,'normal');WidgetsManagers.setVal(_.class.widget,'bold',true);}} else if ( $btn.data('type') == 'italic' ) {if ( _.$widgetEl.hasClass('italic') ) {WidgetsManagers.removeVal(_.class.widget,'italic');} else {WidgetsManagers.setVal(_.class.widget,'italic',true);}}
_.setProp({name: 'class',val: _.class,save: false,reloadModule: false});clearTimeout(_.$widgetEl['updateDelay_'+$btn.data('type')]);_.$widgetEl['updateDelay_'+$btn.data('type')] = setTimeout(function() {_.setProp({name: 'class',val: _.class,save: true,reloadModule: false});},500);break;case 'fontStyle':var $this = $(this);topWindow.$('.moduleSortList .modulesEditButton[data-moduleid="'+_.moduleID+'"]').closest('li').data('open-tool','font-themes');openItemEditModal(_.moduleID,_.moduleTypeNUM,'',function( $iframe ) {var frameWindow = $iframe.get(0).contentWindow;frameWindow.showFontThemes(_.id,function( newTheme ) {var widgetObj = WidgetsManagers.getWidget(_.moduleID,_.id);if ( !widgetObj ) return;WidgetsManagers.setVal(widgetObj.style.widget,'font-family',newTheme.name);topWindow.Wizard.promoFonts.save(widgetObj.moduleID,widgetObj.id,newTheme);if ( !newTheme.italic && widgetObj.class.widget.italic ) {WidgetsManagers.removeVal(widgetObj.class.widget,'italic');widgetObj.setProp({name: 'class',val: widgetObj.class,save: false,reloadModule: false});}
widgetObj.setProp({name: 'style',val: widgetObj.style,save: true,reloadModule: false});});});OutlineHandler.focus(_.getOutlineElement());topWindow.$(topWindow.document).one('wizard_tabs_opened.TextWidget wizard_tabs_closed.TextWidget', function( event, tabID ) {_.removeOutline();});break;}}});OutlineHandler.refresh();S123ResizeObserver.refresh();}
hideToolBar() {this.$widgetEl.data('s123-tool-bar').hide();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();if ( this.$el.data('resizable-text') ) this.$el.data('resizable-text').destroy();if ( this.$el.data('s123-editable-elements') ) this.$el.data('s123-editable-elements').destroy();if ( this.$widgetEl.data('s123-tool-bar') ) this.$widgetEl.data('s123-tool-bar').destroy();this.$wrapper.remove();}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';}}
class ImageWidget extends Widget {constructor( settings ) {super(settings);this.hasBottomResizeController = true;}
initAdminPanel() {topWindow.UploadSingleFilesInitialize();topWindow.ColorboxInitial('#widgetsAdmin [data-rel="colorbox"]');if ( topWindow.imageWidgetIllustrations ) topWindow.imageWidgetIllustrations.destroy();topWindow.imageWidgetIllustrations = new topWindow.InlineIllustrations({container: WidgetsAdmin.$adminPanel.find('.inline-illustration-images'),uploadInput: this.id,tool: 'promo',websiteID: $('#websiteID').val()});topWindow.uploadFiles[this.id].input.on('change', ( event ) => {this.setProp({name: 'value',val: topWindow.uploadFiles[this.id].input.val(),save: true,reloadModule: true});});}
render() {var html = this.template;html = html.replaceAll('{{id}}',this.id);html = html.replace('{{value}}',this.value);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.renderCSS();}
initComponents() {OutlineHandler.register(this.getOutlineElement());var resizable = new S123Resizable({$el: this.$el,maxWidth: this.$el.closest('#'+this.columnID).width(),maxHeight: null,minWidth: 10,minHeight: 10,resizByWidth: true,resizByHeight: true,preserveRatio: true,startCallBack: () => {if ( WidgetsAdmin.isActive ) {WidgetsAdmin.show(this);}},resizeCallBack: ( event, ui ) => {WidgetsManagers.setVal(this.style.element,'width',ui.size.width + 'px');this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});},endCallBack: ( event, ui ) => {var advancedStyles = this.getAdvancedStyles();if ( advancedStyles['margin-left'] ) {ui.size.width -= parseInt(advancedStyles['margin-left']);}
if ( advancedStyles['margin-right'] ) {ui.size.width -= parseInt(advancedStyles['margin-right']);}
if ( advancedStyles['padding-left'] ) {ui.size.width -= parseInt(advancedStyles['padding-left']);}
if ( advancedStyles['padding-right'] ) {ui.size.width -= parseInt(advancedStyles['padding-right']);}
WidgetsManagers.setVal(this.style.element,'width',ui.size.width + 'px');this.setProp({name: 'style',val: this.style,save: true,reloadModule: false});}});OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();if ( this.$el.data('s123-resizable') ) this.$el.data('s123-resizable').destroy();this.$wrapper.remove();}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="input-file-upload" id="'+this.id+'" data-website-id="'+$('#websiteID').val()+'" data-mb="20" data-file-kind="1" data-value="'+WidgetsManagers.getVal(this,'value','')+'" data-text="'+translations.image+'" data-library="image" data-illustrations="true" data-required="true" data-custom-class="promo-widget" data-not-form-input="true"></div>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';this.adminTemplate += '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="widget-main illustration-library">';this.adminTemplate += '<div class="illustrationInlineBox">';this.adminTemplate += '<div class="inline-illustration-images fancy-scrollbar">';this.adminTemplate += '<div class="illustrations-packs-container"></div>';this.adminTemplate += '<div class="illustrations-items"></div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';}}
class ButtonWidget extends Widget {constructor( settings ) {settings.elementClassCollection = {primaryTransparent: 'btn-primary-transparent',primaryGrey: 'btn-primary-grey',primaryTransparentMain: 'btn-primary-transparent-main',primaryWhite: 'btn-primary-white',primaryBlack: 'btn-primary-black',primarySimpleLink: 'btn-primary-simplelink',primarySimpleLinkTextColor: 'btn-primary-simplelink-text-color',};super(settings);}
initAdminPanel() {var actionButtonAdmin = topWindow.ActionButtons.renderButton(WidgetsAdmin.$adminPanel.find('.action-buttons-settings'),{buttonStateChanged: ( newValue, isLive, $input ) => {var reloadModule = this.isModuleReload($input);this.updateButtonSettings(newValue);var buttonStyles = ['','btn-primary-transparent','btn-primary-grey','btn-primary-transparent-main','btn-primary-white','btn-primary-black','btn-primary-simplelink','btn-primary-simplelink-text-color'];var styleIndex = parseInt(this.value.style.value);if ( !$.isNumeric(styleIndex) ) {styleIndex = 0;}
$.each(this.classCollection.element, (index, className) => {if ( className == buttonStyles[styleIndex] ) {WidgetsManagers.setVal(this.class.element,index,true);} else {WidgetsManagers.removeVal(this.class.element,index);}});if ( $input.hasClass('icon-input') ) {isLive = true;}
this.setProp({name: 'class',val: this.class,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: !isLive,reloadModule: reloadModule,callBack: ( widgetObj ) => {widgetObj.refreshView();}});}});topWindow.ActionButtons.initializeDependecies();}
refreshView() {this.setButtonText();this.renderCSS();this.updateWidgetClass();this.setButtonAction();}
setButtonAction() {if ( this.value.type.value == '2' ) {this.$el.find('a').attr('onclick','');this.$el.find('a').attr('href','tel:'+this.value.type.inputs.phoneNumber.value);} else if ( this.value.type.value == '3' ) {this.$el.find('a').attr('onclick','');this.$el.find('a').attr('href','mailto:'+this.value.type.inputs.email.value);}}
setButtonText() {this.$el.find('.widget-btn-txt').text(this.value.textInput.value);}
render() {var html = this.template;html = html.replaceAll('{{id}}',this.id);html = html.replace('{{text}}',this.value.textInput.value);html = html.replace('{{icon}}','');this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.refreshView();}
initComponents() {OutlineHandler.register(this.getOutlineElement());OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();this.$wrapper.remove();}
setAdminTemplate() {topWindow.SettingsBox.hide();this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<textarea class="hidden action-buttons-settings">' + JSON.stringify(this.getButtonSettings()) + '</textarea>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';}
isModuleReload( $input ) {if ( $input.hasClass('text-input') ) return false;if ( $input.hasClass('email-input') ) return false;if ( $input.hasClass('phone-number-input') ) return false;if ( $input.hasClass('button-style') ) return false;return true;}
getButtonSettings() {return {websiteID: $('#websiteID').val(),moduleID: this.moduleID,moduleTypeNUM: 159,btnType: 'promo',notFormInputs: true,textInput: {id: 'buttonWidget-text',text: topWindow.translations.widgets.button.textInput.text,placeholder: topWindow.translations.widgets.button.textInput.placeholder,tooltip: topWindow.translations.widgets.button.textInput.tooltip,value: this.value.textInput.value,classes: '',},type: {id: 'buttonWidget-type',tooltip: topWindow.translations.widgets.button.type.tooltip,dataAttr: '',value: this.value.type.value,inputs: {scroll: {id: 'buttonWidget-scroll',value: this.value.type.inputs.scroll.value,dataAttr: ''},redirect: {id: 'buttonWidget-redirect',value: this.value.type.inputs.redirect.value,dataAttr: 'data-rel="links-autocomplete" data-website-id="'+$('#websiteID').val()+'" data-version-num="'+$('#versionNUM').val()+'"'},phoneNumber: {id: 'buttonWidget-phoneNumber',value: this.value.type.inputs.phoneNumber.value,classes: '',dataAttr: 'data-website-id="'+$('#websiteID').val()+'" data-version-num="'+$('#versionNUM').val()+'" data-input-restrictor-type="phone"'},email: {id: 'buttonWidget-email',value: this.value.type.inputs.email.value,classes: '',dataAttr: 'data-website-id="'+$('#websiteID').val()+'" data-version-num="'+$('#versionNUM').val()+'"'},downloadFile: {id: 'buttonWidget-downloadFile',value: this.value.type.inputs.downloadFile.value,dataAttr: 'data-website-id="'+$('#websiteID').val()+'"'},videoPopup: {id: 'buttonWidget-videoType',value: this.value.type.inputs.videoPopup.value,classes: '',inputs: {externalVideo: {id: 'buttonWidget-externalVideo',value: this.value.type.inputs.videoPopup.inputs.externalVideo.value,classes: '',dataAttr: 'youtube-vimeo-pattern="true"'},customVideo: {id: 'buttonWidget-customVideo',value: this.value.type.inputs.videoPopup.inputs.customVideo.value,dataAttr: 'data-website-id="'+$('#websiteID').val()+'" data-version-num="'+$('#versionNUM').val()+'"'}}}}},style: {id: 'buttonWidget-style',value: this.value.style.value,tooltip: topWindow.translations.widgets.button.style.tooltip,dataAttr: '',classes: '',},icon: {id: 'buttonWidget-style-icon',value: this.value.icon.value,settings: {id: 'buttonWidget-style-icon_settings',value: JSON.stringify(this.value.icon.settings.value),},dataAttr: 'data-scroll-preview="#page-top" data-website-id="'+$('#websiteID').val()+'"'}};}
updateButtonSettings( newValue ) {this.value.textInput.value = newValue.textInput.value;this.value.type.value = newValue.type.value;this.value.type.inputs.scroll.value = newValue.type.inputs.scroll.value;this.value.type.inputs.redirect.value = newValue.type.inputs.redirect.value;this.value.type.inputs.phoneNumber.value = newValue.type.inputs.phoneNumber.value;this.value.type.inputs.email.value = newValue.type.inputs.email.value;this.value.type.inputs.downloadFile.value = newValue.type.inputs.downloadFile.value;this.value.type.inputs.videoPopup.value = newValue.type.inputs.videoPopup.value;this.value.type.inputs.videoPopup.inputs.externalVideo.value = newValue.type.inputs.videoPopup.inputs.externalVideo.value;this.value.type.inputs.videoPopup.inputs.customVideo.value = newValue.type.inputs.videoPopup.inputs.customVideo.value;this.value.style.value = newValue.style.value;this.value.icon.value = newValue.icon.value;this.value.icon.settings.value = tryParseJSON(newValue.icon.settings.value);}}
class MailingListWidget extends Widget {constructor( settings ) {super(settings);}
initAdminPanel() {topWindow.SliderInputInitialize(WidgetsAdmin.$adminPanel.find('#' + this.id + '_width'));topWindow.InitializeToolTips();topWindow.sliderInputs[this.id+'_width'].$html.find('#'+this.id+'_width')
.on('input.MailingListWidget change.MailingListWidget sliderInput.stop.MailingListWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.style.element,'width',$this.val() + 'px');this.setProp({name: 'style',val: this.style,save: event.type == 'sliderInput' || event.type == 'change',reloadModule: false});});WidgetsAdmin.$adminPanel.find('#' + this.id + '_placeholder').on('input.MailingListWidget change.MailingListWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'placeholder',$this.val());this.setProp({name: 'value',val: this.value,save: event.type == 'change',reloadModule: false,callBack: ( widgetObj ) => {widgetObj.refreshView();}});});WidgetsAdmin.$adminPanel.find('#' + this.id + '_buttonText').on('input.MailingListWidget change.MailingListWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'buttonText',$this.val());this.setProp({name: 'value',val: this.value,save: event.type == 'change',reloadModule: false,callBack: ( widgetObj ) => {widgetObj.refreshView();}});});}
render() {var html = this.template;html = html.replaceAll('{{id}}',this.id);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.refreshView();}
refreshView() {this.renderCSS();this.setButtonText();this.setPlaceHolder();}
setPlaceHolder() {var placeholder = this.value.placeholder.length > 0 ? this.value.placeholder : translations.enterYourEmail;this.$widgetEl.find('[name="widget-subscribe-form-email"]').attr('placeholder',placeholder);}
setButtonText() {var buttonText = this.value.buttonText.length > 0 ? this.value.buttonText : translations.subscribe;this.$el.find('.widget-btn-txt').text(buttonText);}
initComponents() {OutlineHandler.register(this.getOutlineElement());OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();S123ResizeObserver.refresh();this.$wrapper.remove();}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_width" data-text="' + S123.escapeHtml(topWindow.translations.widgets.mailingList.width) + '" data-value="' + parseInt(WidgetsManagers.getVal(this.style.element,'width','315px')) + '" data-max="600" data-min="300" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.mailingList.widthToolTip) + '" data-number-kind="1" data-design="twoLines" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="width"></div>') + '"></div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_placeholder">' + S123.escapeHtml(topWindow.translations.widgets.mailingList.placeHolder) + '</label>';this.adminTemplate += ' <a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="'+S123.escapeHtml(topWindow.translations.widgets.mailingList.placeHolderTooltip)+'">';this.adminTemplate += '<i class="fa fa-question-circle"></i>';this.adminTemplate += '</a>';this.adminTemplate += '<input id="' + this.id + '_placeholder" class="form-control" type="text" value="' + S123.escapeHtml(this.value.placeholder) + '" maxlength="40">';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_buttonText">' + S123.escapeHtml(topWindow.translations.widgets.mailingList.buttonText) + '</label>';this.adminTemplate += ' <a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="'+S123.escapeHtml(topWindow.translations.widgets.mailingList.buttonTextTooltip)+'">';this.adminTemplate += '<i class="fa fa-question-circle"></i>';this.adminTemplate += '</a>';this.adminTemplate += '<input id="' + this.id + '_buttonText" class="form-control" type="text" value="' + S123.escapeHtml(this.value.buttonText) + '" maxlength="40">';this.adminTemplate += '</div>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';}}
class VideoWidget extends Widget {constructor( settings ) {super(settings);this.hasBottomResizeController = true;if ( this.value.widgetType == 'popup' ) {this.hasBottomResizeController = false;}}
initAdminPanel() {topWindow.UploadSingleFileHandler.init();topWindow.ColorboxInitialTopWindow('#'+this.id+'_customVideo_previewStatic[data-rel="colorbox-t-w"]');topWindow.InitializeToolTips();WidgetsAdmin.$adminPanel.find('#'+this.id+'_widgetType').on('change',() => {this.setWidgetType(WidgetsAdmin.$adminPanel.find('#'+this.id+'_widgetType').val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});});WidgetsAdmin.$adminPanel.find('.video-type').on('change',() => {WidgetsAdmin.$adminPanel.find('.externalVideo').hide();WidgetsAdmin.$adminPanel.find('.customVideo').hide();WidgetsAdmin.$adminPanel.find('.'+WidgetsAdmin.$adminPanel.find('.video-type').val()).show();this.setTypeVideo(WidgetsAdmin.$adminPanel.find('.video-type').val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});});WidgetsAdmin.$adminPanel.find('.externalVideo input').on('change',() => {clearTimeout(window.finishedTyping);window.finishedTyping = setTimeout(() => {this.setVideo(WidgetsAdmin.$adminPanel.find('.externalVideo input').val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});},topWindow.doneTypingInterval_Short);});var uploadFile = topWindow.getUploadFileObjectByID(this.id + '_customVideo');uploadFile.input.on('change.VideoWidget', () => {this.setVideo(uploadFile.input.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});});}
render() {var html = this.template;var videoPath = this.getVideo(this.value[this.value.widgetType].videoType);html = html.replaceAll('{{id}}',this.id);html = html.replace('{{icon}}',S123.s123IconToSvg.getHtml('play','',''));html = html.replace('{{player}}',this.getPlayer());html = html.replace('{{value}}',videoPath);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');if ( this.value.widgetType == 'inline' && this.value[this.value.widgetType].videoType == 'externalVideo' ) {this.$el.addClass('video-is-loading');var $cover = $('<div class="loading-container"><div class="custom-cover"></div><i class="ace-icon fa fa-spinner fa-spin fa-5x"></i><div>');this.$el.append($cover);var ajax = $.ajax({type: "POST",url: "/versions/"+$('#versionNUM').val()+"/wizard/getProvidersVideoUrl.php",data: {w: $('#websiteID').val(),videoUrl: encodeURI(videoPath)},success: ( data ) => {data = tryParseJSON(data);if ( !data ) return;this.$el.find('.s123-video-handler').attr('data-video',data.url);this.$el.find('img').on('load', (event) => {this.$el.removeClass('video-is-loading');$cover.remove();S123.VideoHandler.addClickEvent(this.$el.find('.s123-video-handler'));});this.$el.find('img').attr('src',data.tumbImage);}});}
this.renderCSS();}
getPlayer() {return WidgetsManagers.getVal(this.value[this.value.widgetType][this.value[this.value.widgetType].videoType],'player','');}
getVideo( videoType ) {return WidgetsManagers.getVal(this.value[this.value.widgetType][videoType],'value','');;}
setWidgetType( widgetType ) {WidgetsManagers.setVal(this.value,'widgetType',widgetType);}
setVideo( videoUrl ) {WidgetsManagers.setVal(this.value[this.value.widgetType][this.value[this.value.widgetType].videoType],'value',videoUrl);}
setTypeVideo( videoType ) {WidgetsManagers.setVal(this.value[this.value.widgetType],'videoType',videoType);}
initComponents() {OutlineHandler.register(this.getOutlineElement());if ( WidgetsManagers.getVal(this.value,'widgetType','') == 'inline' ) {var isVideoPlaying = false;this.$container.on('click', () => {isVideoPlaying = true;});var resizable = new S123Resizable({$el: this.$el,maxWidth: this.$el.closest('#'+this.columnID).width(),maxHeight: null,minWidth: 10,minHeight: 10,resizByWidth: true,resizByHeight: true,preserveRatio: true,startCallBack: () => {if ( WidgetsAdmin.isActive ) {WidgetsAdmin.show(this);}},resizeCallBack: ( event, ui ) => {if ( isVideoPlaying ) {this.$widgetEl = this.$el.find('.s123-widget-element');isVideoPlaying = false;}
WidgetsManagers.setVal(this.style.custom.element[this.value.widgetType],'width',ui.size.width + 'px');this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});},endCallBack: ( event, ui ) => {var advancedStyles = this.getAdvancedStyles();if ( advancedStyles['margin-left'] ) {ui.size.width -= parseInt(advancedStyles['margin-left']);}
if ( advancedStyles['margin-right'] ) {ui.size.width -= parseInt(advancedStyles['margin-right']);}
if ( advancedStyles['padding-left'] ) {ui.size.width -= parseInt(advancedStyles['padding-left']);}
if ( advancedStyles['padding-right'] ) {ui.size.width -= parseInt(advancedStyles['padding-right']);}
WidgetsManagers.setVal(this.style.custom.element[this.value.widgetType],'width',ui.size.width + 'px');this.setProp({name: 'style',val: this.style,save: true,reloadModule: false});}});} else {intializePopupVideoPlayers(this.$el.find('[data-type="videoPopup"] a'));}
OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();this.$wrapper.remove();}
generateCustomCSS( rootSelector ) {var style = rootSelector + ' #'+this.id+' .s123-widget-element {';$.each(this.style.custom.element[this.value.widgetType], function( attribute, value ) {style += attribute+':'+value+'; ';});style += '}';return style;}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_widgetType">' + S123.escapeHtml(topWindow.translations.widgets.type) + '</label>';this.adminTemplate += '<select class="form-control widget-type" id="' + this.id + '_widgetType">';this.adminTemplate += '<option value="inline" ' + (WidgetsManagers.getVal(this.value,'widgetType','') == 'inline' ? 'selected' : '') + '>Inline</option>';this.adminTemplate += '<option value="popup" ' + (WidgetsManagers.getVal(this.value,'widgetType','') == 'popup' ? 'selected' : '') + '>Popup</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="videoType">' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.text) + '</label>';this.adminTemplate += '<select class="form-control video-type" id="' + this.id + '_videoType">';this.adminTemplate += '<option value="externalVideo">' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.externalVideo.optionText) + '</option>';this.adminTemplate += '<option value="customVideo" ' + (WidgetsManagers.getVal(this.value[this.value.widgetType],'videoType','') == 'customVideo' ? 'selected' : '') + '>' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.customVideo.optionText) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group externalVideo" style="' + (WidgetsManagers.getVal(this.value[this.value.widgetType],'videoType','') != 'externalVideo' ? 'display: none;' : '') + '">';this.adminTemplate += '<label for="' + this.id + '_extVideoUrl">' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.externalVideo.text) + '</label>';this.adminTemplate += '<input type="text" class="form-control" id="' + this.id + '_extVideoUrl" value="' + this.getVideo('externalVideo') + '" placeholder="' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.externalVideo.placeholder) + '" required data-msg-required="' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.externalVideo.msgRequired) + '" youtube-vimeo-pattern="true">';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group customVideo" style="' + (this.value[this.value.widgetType].videoType != 'customVideo' ? 'display: none;' : '') + '">';this.adminTemplate += '<div class="input-file-upload" id="' + this.id + '_customVideo" data-website-id="' + $('#websiteID').val() + '" data-mb="20" data-file-kind="2" data-value="' + this.getVideo('customVideo') + '" data-text="' + S123.escapeHtml(topWindow.translations.actionButtons.type.videoPopup.customVideo.text) + '" data-library="video" data-hide-remove-btn="true" data-not-form-input="true"></div>';this.adminTemplate += '</div>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';}}
class DividerWidget extends Widget {constructor( settings ) {settings.elementClassCollection = {solid: 'w-m-solid',double: 'w-m-double',dotted: 'w-m-dotted',dashed: 'w-m-dashed'};super(settings);}
initAdminPanel() {topWindow.ColorPickerInitialize();topWindow.InitializeToolTips();WidgetsAdmin.$adminPanel.find('.widget-style').on('change.DividerWidget',( event ) => {var $this = $(event.target);$.each(this.classCollection.element, (index, className) => {this.$widgetEl.removeClass(className);});WidgetsManagers.removeVal(this.class.element,'solid');WidgetsManagers.removeVal(this.class.element,'double');WidgetsManagers.removeVal(this.class.element,'dotted');WidgetsManagers.removeVal(this.class.element,'dashed');WidgetsManagers.setVal(this.class.element,$this.val(),true);this.setProp({name: 'class',val: this.class,save: true,reloadModule: false});});this.addSliderEvent(topWindow.sliderInputs[this.id+'_width'].$html.find('#'+this.id+'_width'));this.addSliderEvent(topWindow.sliderInputs[this.id+'_gap'].$html.find('#'+this.id+'_gap'));this.addSliderEvent(topWindow.sliderInputs[this.id+'_weight'].$html.find('#'+this.id+'_weight'));WidgetsAdmin.$adminPanel.find('#'+this.id+'_color').on('change.DividerWidget', ( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.style.element,'border-top-color',$this.val());this.setProp({name: 'style',val: this.style,save: true,reloadModule: false});});}
addSliderEvent( $slider ) {$slider.on('input.DividerWidget change.DividerWidget sliderInput.stop.DividerWidget',( event ) => {var $this = $(event.target);if ( $this.hasClass('width-input') ) {WidgetsManagers.setVal(this.style.element,'width',$this.val() + '%');} else if ( $this.hasClass('gap-input') ) {WidgetsManagers.setVal(this.style.widget,'padding-top',$this.val() + 'px');WidgetsManagers.setVal(this.style.widget,'padding-bottom',$this.val() + 'px');} else if ( $this.hasClass('weight-input') ) {WidgetsManagers.setVal(this.style.element,'border-top-width',$this.val() + 'px');}
this.setProp({name: 'style',val: this.style,save: event.type == 'sliderInput' || event.type == 'change',reloadModule: false,callBack: ( widgetObj ) => {OutlineHandler.setPosition(widgetObj.id);}});});}
render() {var html = this.template;html = html.replaceAll('{{id}}',this.id);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.renderCSS();}
initComponents() {OutlineHandler.register(this.getOutlineElement());OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();S123ResizeObserver.refresh();this.$wrapper.remove();}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_style">' + S123.escapeHtml(topWindow.translations.widgets.divider.style) + '</label>';this.adminTemplate += '<select class="form-control widget-style" id="' + this.id + '_style">';this.adminTemplate += '<option value="solid" ' + (WidgetsManagers.getVal(this.class.element,'solid','') ? 'selected' : '') + '>' + S123.escapeHtml(topWindow.translations.widgets.divider.solid) + '</option>';this.adminTemplate += '<option value="double" ' + (WidgetsManagers.getVal(this.class.element,'double','') ? 'selected' : '') + '>' + S123.escapeHtml(topWindow.translations.widgets.divider.double) + '</option>';this.adminTemplate += '<option value="dotted" ' + (WidgetsManagers.getVal(this.class.element,'dotted','') ? 'selected' : '') + '>' + S123.escapeHtml(topWindow.translations.widgets.divider.dotted) + '</option>';this.adminTemplate += '<option value="dashed" ' + (WidgetsManagers.getVal(this.class.element,'dashed','') ? 'selected' : '') + '>' + S123.escapeHtml(topWindow.translations.widgets.divider.dashed) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_width" data-text="' + S123.escapeHtml(topWindow.translations.widgets.divider.width) + '" data-value="' + parseInt(WidgetsManagers.getVal(this.style.element,'width','100')) + '" data-max="100" data-min="1" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.divider.widthToolTip) + '" data-number-kind="1" data-design="twoLines" data-custom-class="width-input" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="width"></div>') + '"></div>';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_gap" data-text="' + S123.escapeHtml(topWindow.translations.widgets.divider.gap) + '" data-value="' + parseInt(WidgetsManagers.getVal(this.style.widget,'padding-top','2')) + '" data-max="50" data-min="2" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.divider.gapToolTip) + '" data-number-kind="1" data-design="twoLines" data-custom-class="gap-input" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="padding-top"></div>') + '"></div>';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_weight" data-text="' + S123.escapeHtml(topWindow.translations.widgets.divider.weight) + '" data-value="' + parseInt(WidgetsManagers.getVal(this.style.element,'border-top-width','1')) + '" data-max="10" data-min="1" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.divider.weightToolTip) + '" data-number-kind="1" data-design="twoLines" data-custom-class="weight-input" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="border-top-width"></div>') + '"></div>';this.adminTemplate += '<div class="colorPalette" id="' + this.id + '_color" data-required="true" data-text="' + S123.escapeHtml(topWindow.translations.widgets.divider.color) + '" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.divider.colorToolTip) + '" data-value="' + WidgetsManagers.getVal(this.style.element,'border-top-color','') + '" data-not-form-input="true"></div>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';}}
class SpacerWidget extends Widget {constructor( settings ) {super(settings);}
initAdminPanel() {topWindow.SliderInputInitialize(WidgetsAdmin.$adminPanel.find('.sliderInput'));topWindow.InitializeToolTips();var $input = topWindow.sliderInputs[this.id].$html.find('#'+this.id);$input.on('input.SpacerWidget change.SpacerWidget sliderInput.stop.SpacerWidget', ( event ) => {WidgetsManagers.setVal(this.style.element,'height',$input.val() + 'px');this.setProp({name: 'style',val: this.style,save: event.type == 'sliderInput' || event.type == 'change',reloadModule: false});});}
render() {var html = this.template;html = html.replaceAll('{{id}}',this.id);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.renderCSS();}
initComponents() {OutlineHandler.register(this.getOutlineElement());OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();S123ResizeObserver.refresh();this.$wrapper.remove();}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '" data-text="' + S123.escapeHtml(topWindow.translations.widgets.spacer.title) + '" data-value="' + parseInt(WidgetsManagers.getVal(this.style.element,'height','10')) + '" data-max="600" data-min="10" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.spacer.toolTip) + '" data-number-kind="1" data-design="twoLines" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="height"></div>') + '"></div>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';}}
class FormWidget extends Widget {constructor( settings ) {settings.elementClassCollection = {style1: 'form_style_1',style2: 'form_style_2',style3: 'form_style_3',style4: 'form_style_4',style5: 'form_style_5',style6: 'form_style_6',style7: 'form_style_7',};super(settings);}
initAdminPanel() {topWindow.initilizeLinksAutocomplete();topWindow.InitializeToolTips();topWindow.modalSelect.init();this.limitProFeatures();var $customFormManageButton = WidgetsAdmin.$adminPanel.find('#'+this.id+'_manageFields');var $emailNotification = WidgetsAdmin.$adminPanel.find('#'+this.id+'_email_notification');var $emailCollector = WidgetsAdmin.$adminPanel.find('#'+this.id+'_email_collector');var $buttonClickAction = WidgetsAdmin.$adminPanel.find('#'+this.id+'_buttonClickAction');var $autoReplyManageButton = WidgetsAdmin.$adminPanel.find('#'+this.id+'_autoReplyManageButton');var $replySubjectMessage = WidgetsAdmin.$adminPanel.find('#'+this.id+'_reply_subject_message');var $replyMessage = WidgetsAdmin.$adminPanel.find('#'+this.id+'_reply_message');var $activeAutoReplyMessage = WidgetsAdmin.$adminPanel.find('#'+this.id+'_activeReplyMessage');var EmailCollector = new topWindow.S123EmailCollector({$el: $emailCollector,addCallback: () => {WidgetsManagers.setVal(this.value,'email_collector',$emailCollector.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});},removeCallback: () => {WidgetsManagers.setVal(this.value,'email_collector',$emailCollector.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});}});WidgetsAdmin.$adminPanel.find('#formDesigns').on('change.FormWidget',( event ) => {var $this = $(event.target);$.each(this.classCollection.element, (index, className) => {WidgetsManagers.removeVal(this.class.element,index);});WidgetsManagers.setVal(this.class.element,$this.val(),true);this.setProp({name: 'class',val: this.class,save: true,reloadModule: false});});WidgetsAdmin.$adminPanel.find('.show-custom-form').on('change.FormWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'isShowCustomForm',$this.is(':checked'));if ( this.value.isShowCustomForm ) {$customFormManageButton.removeClass('hidden');} else {$customFormManageButton.addClass('hidden');}
this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});});$customFormManageButton.on('click.FormWidget',( event ) => {event.preventDefault();var $this = $(event.target);window.top.promoCustomFormData = WidgetsAdmin.$adminPanel.find('.form-data');window.top.promoCustomFormButtonText = WidgetsAdmin.$adminPanel.find('.form-submit-button');window.top.promoCustomFormPrevButtonText = WidgetsAdmin.$adminPanel.find('.form-prev-button');window.top.promoCustomFormNextButtonText = WidgetsAdmin.$adminPanel.find('.form-next-button');window.top.promoCustomFormType = WidgetsAdmin.$adminPanel.find('.form-type');var $modal = window.top.$('#globalModal');$modal.data('manual',true);$modal.data('manual-url',$this.data('url'));$modal.data('manual-title',$this.data('title'));$modal.data('manual-size',$this.data('size'));$modal.data('disable-wizard-save',true);$modal.one('hide.bs.modal', ( event ) => {WidgetsManagers.setVal(this.value.customForm,'formData',window.top.promoCustomFormData.val());WidgetsManagers.setVal(this.value.customForm,'formSubmitButton',window.top.promoCustomFormButtonText.val());WidgetsManagers.setVal(this.value.customForm,'formPrevButton',window.top.promoCustomFormPrevButtonText.val());WidgetsManagers.setVal(this.value.customForm,'formNextButton',window.top.promoCustomFormNextButtonText.val());WidgetsManagers.setVal(this.value.customForm,'customFormType',window.top.promoCustomFormType.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: true,callBack: () => {$modal.data('disable-wizard-save',false);}});});$modal.modal('show');});$buttonClickAction.on('change.FormWidget',( event ) => {WidgetsManagers.setVal(this.value,'buttonClickAction',$(event.target).val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false,callBack: ( widgetObj ) => {widgetObj.$widgetEl.data('click-action',this.value.buttonClickAction);}});showHideAfterSubmitOptions();});showHideAfterSubmitOptions();WidgetsAdmin.$adminPanel.find('#'+this.id+'_buttonLink').on('change.FormWidget',( event ) => {WidgetsManagers.setVal(this.value,'buttonLink',$(event.target).val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});WidgetsAdmin.$adminPanel.find('#'+this.id+'_conv_code').on('change.FormWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'conv_code',$(event.target).val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});$autoReplyManageButton.on('click.FormWidget',( event ) => {event.preventDefault();var $this = $(event.target);window.top.reply_subject_message = $replySubjectMessage;window.top.reply_message = $replyMessage;var $modal = window.top.$('#globalModal');$modal.data('manual',true);$modal.data('manual-url',$this.data('url'));$modal.data('manual-title',$this.data('title'));$modal.data('manual-size',$this.data('size'));$modal.data('disable-wizard-save',true);$modal.one('hide.bs.modal', ( event ) => {WidgetsManagers.setVal(this.value,'reply_subject_message',$replySubjectMessage.val());WidgetsManagers.setVal(this.value,'reply_message',$replyMessage.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false,callBack: () => {$modal.data('disable-wizard-save',false);}});});$modal.modal('show');});$activeAutoReplyMessage.on('change.FormWidget',( event ) => {WidgetsManagers.setVal(this.value,'activeReplyMessage',$activeAutoReplyMessage.is(':checked'));this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});showHideReplyOptions();});showHideReplyOptions();$emailNotification.on('change.FormWidget',( event ) => {WidgetsManagers.setVal(this.value,'email_notification',$emailNotification.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});showHideNotificationOptions();});showHideNotificationOptions();function showHideReplyOptions() {if ( $activeAutoReplyMessage.is(':checked') ) {$autoReplyManageButton.removeClass('hidden');} else {$autoReplyManageButton.addClass('hidden');}}
function showHideNotificationOptions() {WidgetsAdmin.$adminPanel.find('.email-notification').hide();WidgetsAdmin.$adminPanel.find('.email-notification.'+$emailNotification.find('option:selected').data('related-option')).show();}
function showHideAfterSubmitOptions() {WidgetsAdmin.$adminPanel.find('.after-submit-action').hide();WidgetsAdmin.$adminPanel.find('.after-submit-action.'+$buttonClickAction.find('option:selected').data('related-option')).show();}}
limitProFeatures() {var $buttonClickAction = WidgetsAdmin.$adminPanel.find('#'+this.id+'_buttonClickAction');var $activeAutoReplyMessage = WidgetsAdmin.$adminPanel.find('#'+this.id+'_activeReplyMessage');var $convCode = WidgetsAdmin.$adminPanel.find('#'+this.id+'_conv_code');(function() {if ( topWindow.ProFeature_isLimit({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'toolType': 'formAfterSubmitActions','openPremiumFeatures': topWindow.openPremiumFeatures})) {$buttonClickAction.off('click').on('click.pro',function( event ) {event.preventDefault();event.stopPropagation();topWindow.ProFeature_limit({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'toolType': 'formAfterSubmitActions','openPremiumFeatures': topWindow.openPremiumFeatures,'modalParent': true,'featureID': 'formAfterSubmitActions'});});$buttonClickAction.addClass('pro-feature-disable-field');}
topWindow.ProFeature_addLabel({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'limitedToPackageNUM': '1','toolType': 'formAfterSubmitActions','$element': $buttonClickAction.closest('.form-group').find('label')});})();(function() {if ( topWindow.ProFeature_isLimit({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'toolType': 'formAutoReplyMessage','openPremiumFeatures': topWindow.openPremiumFeatures})) {$activeAutoReplyMessage.off('click').on('click.pro',function( event ) {event.preventDefault();event.stopPropagation();topWindow.ProFeature_limit({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'toolType': 'formAutoReplyMessage','openPremiumFeatures': topWindow.openPremiumFeatures,'modalParent': true,'featureID': 'formAutoReplyMessage'});});$activeAutoReplyMessage.prop('checked',false);}
topWindow.ProFeature_addLabel({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'limitedToPackageNUM': '1','toolType': 'formAutoReplyMessage','$element': $activeAutoReplyMessage.closest('.premiumFeature').find('label')});})();(function() {if ( topWindow.ProFeature_isLimit({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'toolType': 'formConversionCode','openPremiumFeatures': topWindow.openPremiumFeatures})) {$convCode.closest('.form-group').off('click').on('click.pro',function( event ) {event.preventDefault();event.stopPropagation();topWindow.ProFeature_limit({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'toolType': 'formConversionCode','openPremiumFeatures': topWindow.openPremiumFeatures,'modalParent': true,'featureID': 'formConversionCode'});});$convCode.addClass('pro-feature-disable-field');$convCode.attr('readonly',true);}
topWindow.ProFeature_addLabel({'websiteID': topWindow.websiteID,'packageNUM': topWindow.packageNUM,'limitedToPackageNUM' : '1','toolType' : 'formConversionCode','$element' : $convCode.closest('.form-group').find('label')});})();}
render() {var html = this.template;html = html.replace(/{{id}}/g,this.id);html = html.replace('{{structureID}}',this.structureID);html = html.replace('{{columnID}}',this.columnID);html = html.replace('{{clickAction}}',this.value.buttonClickAction);this.$wrapper = $(html);this.$el = this.$wrapper.find('.s123-widget');this.$container = this.$el.find('.w-m-widget-container');this.$widgetEl = this.$el.find('.s123-widget-element');this.renderCSS();this.updateWidgetClass();}
initComponents() {OutlineHandler.register(this.getOutlineElement());var resizable = new S123Resizable({$el: this.$el,maxWidth: this.$el.closest('#'+this.columnID).width(),maxHeight: null,minWidth: 150,minHeight: 10,resizByWidth: true,resizByHeight: false,preserveRatio: false,startCallBack: () => {if ( WidgetsAdmin.isActive ) {WidgetsAdmin.show(this);}},resizeCallBack: ( event, ui ) => {WidgetsManagers.setVal(this.style.container,'width','100%');this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});CustomForm_EnableTwoColumns(this.$widgetEl);CustomForm_DisableTwoColumns(this.$widgetEl);},endCallBack: ( event, ui ) => {var advancedStyles = this.getAdvancedStyles();if ( advancedStyles['margin-left'] ) {ui.size.width -= parseInt(advancedStyles['margin-left']);}
if ( advancedStyles['margin-right'] ) {ui.size.width -= parseInt(advancedStyles['margin-right']);}
WidgetsManagers.setVal(this.style.container,'width',ui.size.width + 'px');this.setProp({name: 'style',val: this.style,save: true,reloadModule: false});}});OutlineHandler.refresh();S123ResizeObserver.refresh();}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();this.$wrapper.remove();}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="'+this.id+'_email_notification">';this.adminTemplate += S123.escapeHtml(topWindow.translations.widgets.form.emailNotifications.title)+' ';this.adminTemplate += '<a href="#" onclick="return false;" data-rel="tooltip" data-html="true" data-trigger="hover" title="'+S123.escapeHtml(topWindow.translations.widgets.form.emailNotifications.titleTooltip)+'">';this.adminTemplate += '<i class="fa fa-question-circle"></i>';this.adminTemplate += '</a>';this.adminTemplate += '</label>';this.adminTemplate += '<select class="form-control" id="'+this.id+'_email_notification">';this.adminTemplate += '<option value="admin" '+(WidgetsManagers.getVal(this.value,'email_notification','') == 'admin' ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.emailNotifications.admin.replace('{{admin_email_address}}',topWindow.user_name_email))+'</option>';this.adminTemplate += '<option value="custom" '+(WidgetsManagers.getVal(this.value,'email_notification','') == 'custom' ? 'selected' : '')+' data-related-option="email-collector">'+S123.escapeHtml(topWindow.translations.widgets.form.emailNotifications.custom)+'</option>';this.adminTemplate += '<option value="disable" '+(WidgetsManagers.getVal(this.value,'email_notification','') == 'disabled' ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.emailNotifications.disabled)+'</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group email-notification email-collector">';this.adminTemplate += '<label for="email_collector">'+S123.escapeHtml(topWindow.translations.widgets.form.emailCollector)+'</label>';this.adminTemplate += ' <a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="'+S123.escapeHtml(topWindow.translations.widgets.form.emailCollectorTooltip)+'">';this.adminTemplate += '<i class="fa fa-question-circle"></i>';this.adminTemplate += '</a>';this.adminTemplate += '<div class="multiple-emails">';this.adminTemplate += '<input type="text" class="form-control preview-live-update" id="'+this.id+'_email_collector" value="'+WidgetsManagers.getVal(this.value,'email_collector','')+'" placeholder="'+S123.escapeHtml(topWindow.translations.widgets.form.emailCollectorPlaceHolder)+'">';this.adminTemplate += '</div>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="'+this.id+'_buttonClickAction">'+S123.escapeHtml(topWindow.translations.widgets.form.buttonClickAction)+'</label>';this.adminTemplate += ' <a href="#" onclick="return false;" data-rel="tooltip" data-trigger="hover" title="'+S123.escapeHtml(topWindow.translations.widgets.form.buttonClickActionTooltip)+'">';this.adminTemplate += '<i class="fa fa-question-circle"></i>';this.adminTemplate += '</a>';this.adminTemplate += '<select class="form-control" id="'+this.id+'_buttonClickAction">';this.adminTemplate += '<option value="thankYouMessage" '+(WidgetsManagers.getVal(this.value,'buttonClickAction','') == 'thankYouMessage' ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.thankYouMessage)+'</option>';this.adminTemplate += '<option value="redirect" '+(WidgetsManagers.getVal(this.value,'buttonClickAction','') == 'redirect' ? 'selected' : '')+' data-related-option="action-redirect">'+S123.escapeHtml(topWindow.translations.widgets.form.linkToURL)+'</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group after-submit-action action-redirect">';this.adminTemplate += '<label for="'+this.id+'_buttonLink">'+S123.escapeHtml(topWindow.translations.widgets.form.buttonLink)+'</label>';this.adminTemplate += '<input type="text" class="form-control" id="'+this.id+'_buttonLink" value="'+WidgetsManagers.getVal(this.value,'buttonLink','')+'" placeholder="'+S123.escapeHtml(topWindow.translations.widgets.form.buttonLink)+'" data-rel="links-autocomplete" data-website-id="'+$('#websiteID').val()+'" data-version-num="'+$('#versionNUM').val()+'" data-rule-url-abs-rel="true" data-msg-url-abs-rel="'+S123.escapeHtml(translations.pageUrlError)+'">';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group premiumFeature">';this.adminTemplate += '<label>'+S123.escapeHtml(topWindow.translations.widgets.form.autoReplyEmail)+'</label><br/>';this.adminTemplate += '<input id="'+this.id+'_activeReplyMessage" class="ace ace-switch" type="checkbox" '+(WidgetsManagers.getVal(this.value,'activeReplyMessage','') ? 'checked' : '')+'>';this.adminTemplate += '<span class="lbl"></span>';this.adminTemplate += '<a id="'+this.id+'_autoReplyManageButton" class="btn btn-sm btn-primary '+(WidgetsManagers.getVal(this.value,'activeReplyMessage','') ? '' : 'hidden')+'" style="margin-top: -10px; float: '+topWindow.t_align_reverse+';" data-size="medium" data-title="'+S123.escapeHtml(topWindow.translations.widgets.form.autoReplyModalTitle)+'" data-url="/versions/'+$('#versionNUM').val()+'/wizard/modules/widgetsModule/manageAutoReply.php?w='+$('#websiteID').val()+'">'+S123.escapeHtml(topWindow.translations.widgets.form.manageFields)+'</a>';this.adminTemplate += '<input type="hidden" class="form-control" id="'+this.id+'_reply_subject_message" value="'+WidgetsManagers.getVal(this.value,'reply_subject_message','')+'" placeholder="'+S123.escapeHtml(topWindow.translations.widgets.form.autoReplySubject)+'">';this.adminTemplate += '<textarea class="form-control hidden" id="'+this.id+'_reply_message" placeholder="'+S123.escapeHtml(topWindow.translations.widgets.form.autoReplyMessage)+'">'+WidgetsManagers.getVal(this.value,'reply_message','')+'</textarea>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="'+this.id+'_conv_code">';this.adminTemplate += S123.escapeHtml(topWindow.translations.widgets.form.conversionCode.title)+' ';this.adminTemplate += '<a href="#" onclick="return false;" data-rel="tooltip" data-html="true" data-trigger="hover" title="'+S123.escapeHtml(topWindow.translations.widgets.form.conversionCode.tooltip)+'">';this.adminTemplate += '<i class="fa fa-question-circle"></i>';this.adminTemplate += '</a>';this.adminTemplate += '</label>';this.adminTemplate += '<textarea class="form-control" id="'+this.id+'_conv_code" placeholder="'+S123.escapeHtml(topWindow.translations.widgets.form.conversionCode.placeHolder)+'" style="direction:ltr;">'+WidgetsManagers.getVal(this.value,'conv_code','')+'</textarea>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group premiumFeature">';this.adminTemplate += '<label>'+S123.escapeHtml(topWindow.translations.widgets.form.customForm)+'</label><br/>';this.adminTemplate += '<input class="ace ace-switch show-custom-form" type="checkbox" '+(WidgetsManagers.getVal(this.value,'isShowCustomForm','') ? 'checked' : '')+'>';this.adminTemplate += '<span class="lbl"></span>';this.adminTemplate += '<a id="'+this.id+'_manageFields" class="btn btn-sm btn-primary '+(WidgetsManagers.getVal(this.value,'isShowCustomForm','') ? '' : 'hidden')+'" style="margin-top: -10px; float: '+topWindow.t_align_reverse+';" data-size="medium" data-title="'+S123.escapeHtml(topWindow.translations.widgets.form.promoCustomForm)+'" data-url="/versions/'+$('#versionNUM').val()+'/wizard/modules/promo/addCustomForm.php?w='+$('#websiteID').val()+'">'+S123.escapeHtml(topWindow.translations.widgets.form.manageFields)+'</a>';this.adminTemplate += '<input type="hidden" class="form-submit-button" value="'+WidgetsManagers.getVal(this.value.customForm,'formSubmitButton','')+'">';this.adminTemplate += '<input type="hidden" class="form-next-button" value="'+WidgetsManagers.getVal(this.value.customForm,'formNextButton','')+'">';this.adminTemplate += '<input type="hidden" class="form-prev-button" value="'+WidgetsManagers.getVal(this.value.customForm,'formPrevButton','')+'">';this.adminTemplate += '<input type="hidden" class="form-type" value="'+WidgetsManagers.getVal(this.value.customForm,'customFormType','')+'">';this.adminTemplate += '<textarea class="form-data hidden">'+WidgetsManagers.getVal(this.value.customForm,'formData','')+'</textarea>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-styles">';this.adminTemplate += '<div id="formDesigns" class="form-group">';this.adminTemplate += '<h4>'+S123.escapeHtml(topWindow.translations.widgets.form.stylesTitle)+'</h4>';this.adminTemplate += '<select class="form-control modal-select" data-inline-select="true" id="promo_form_style" data-image-fit="true">';this.adminTemplate += '<option value="style1" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/white_background_p_top_border.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style1','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style1)+'</option>';this.adminTemplate += '<option value="style2" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/no_background.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style2','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style2)+'</option>';this.adminTemplate += '<option value="style3" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/white_background_p_transparent_p_top_porder.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style3','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style3)+'</option>';this.adminTemplate += '<option value="style4" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/transparent.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style4','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style4)+'</option>';this.adminTemplate += '<option value="style5" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/main_website_color.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style5','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style5)+'</option>';this.adminTemplate += '<option value="style6" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/black_background.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style6','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style6)+'</option>';this.adminTemplate += '<option value="style7" data-img-src="'+$GLOBALS["cdn-system-files"]+'/files/vendor/site123/modalSelect/images/homepage-form/vertical/gray_background.png?v='+$GLOBALS['v-cache']+'" '+(WidgetsManagers.getVal(this.class.element,'style7','') ? 'selected' : '')+'>'+S123.escapeHtml(topWindow.translations.widgets.form.styles.style7)+'</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';}}
class SystemWidget extends WidgetsInterface {constructor( settings ) {super();this.id = '';this.type = '';this.style = {};this.class = '';this.value = {};this.advanced = {};this.moduleSettings = {};this.adminTemplate = '';this.$el = null;this.controllers = [];this.floatingBar = null;this.classCollection = {widget: {},element: {}};this.id = settings.id;this.type = settings.type;this.setStyle(settings.style);this.class = settings.class;this.value = settings.value;this.setAdvanced(settings.advanced);this.moduleSettings = settings.moduleSettings;this.moduleID = settings.moduleID;this.moduleTypeNUM = settings.moduleTypeNUM;this.$el = settings.$el;switch( this.type ) {case 'structure':this.classCollection.container = {boxed: 'container',fullWidth: 'container-fluid'};break;case 'column':this.classCollection.widget = {alignLeft: 'w-m-h-left',alignCenter: 'w-m-h-center',alignRight: 'w-m-h-right',customTextColor: 'custom-text-color',topAlignment: 'w-m-top',centerAlignment: 'w-m-center',bottomAlignment: 'w-m-bottom',spaceBetween: 'w-m-s-b',spaceAround: 'w-m-s-a',spaceEvenly: 'w-m-s-e',};break;}}
setStyle( style ) {function Style( data ) {function Def() {return {widget: {},element: {},container: {}};}
var def = new Def();if ( data ) {data = topWindow.objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
return data;};this.style = new Style(style);}
setAdvanced( advanced ) {function Advanced( data ) {function Def() {return {style: {wrapper: {}}};}
var def = new Def();if ( data ) {data = topWindow.objectAssign(new Def(), data); // (objectAssign overwrite objects)
} else {data = def;}
return data;};this.advanced = new Advanced(advanced);}
updateWidgetClass() {if ( this.classCollection.widget ) {$.each(this.classCollection.widget, (index, className) => {this.$el.removeClass(className);});$.each(this.class.widget, (index, className) => {this.$el.addClass(this.classCollection.widget[index]);});}
if ( this.classCollection.container ) {$.each(this.classCollection.container, (index, className) => {this.$container.removeClass(className);});$.each(this.class.container, (index, className) => {this.$container.addClass(this.classCollection.container[index]);});}}
setProp( settings ) {var widgetObj = WidgetsManagers.getWidget(this.moduleID,this.id);widgetObj[settings.name] = settings.val;switch( settings.name ) {case 'class':widgetObj.updateWidgetClass();break;case 'style':widgetObj.renderCSS();break;}
WidgetsManagers.updateWidgetObj(widgetObj.moduleID,widgetObj.id,widgetObj);if ( settings.callBack ) settings.callBack.call(this,widgetObj);if ( settings.save ) {WidgetsManagers.save(widgetObj.moduleID,settings.reloadModule);}}}
class StructureWidget extends SystemWidget {constructor( settings ) {super(settings);this.$wrapper = null;this.$container = null;this.columns = {};settings.type = 'structure';this.$el = settings.$el;this.$wrapper = settings.$wrapper;this.$container = this.$el.find('.w-m-widget-container[data-id="'+this.id+'"]');this.columns = settings.columns;this.initComponents();}
initComponents() {this.getOutlineElement().addClass('no-outline-offset');this.getOutlineElement().addClass('disable-outline-on-enter');OutlineHandler.register(this.getOutlineElement());OutlineHandler.refresh();}
getOutlineElement() {return this.$wrapper;}
destroy() {OutlineHandler.destroy(this.getOutlineElement().get(0).id);OutlineHandler.refresh();}
initAdminPanel() {topWindow.ColorPickerInitialize();topWindow.InitializeToolTips();var $contentWidth = WidgetsAdmin.$adminPanel.find('#' + this.id + '_contentWidth');var $height = WidgetsAdmin.$adminPanel.find('#' + this.id + '_height');var $slider = topWindow.sliderInputs[this.id+'_minHeight'].$html.find('#'+this.id+'_minHeight');$contentWidth.on('change', () => {WidgetsManagers.removeVal(this.class.container,'boxed');WidgetsManagers.removeVal(this.class.container,'fullWidth');WidgetsManagers.setVal(this.class.container,$contentWidth.val(),true);this.setProp({name: 'class',val: this.class,save: true,reloadModule: false});});$slider.on('input.StructureWidget sliderInput.stop.StructureWidget change.StructureWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.style.container,'min-height',$this.val() + 'vh');WidgetsManagers.setVal(this.value.height,'min-height',$this.val());this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: event.type == 'sliderInput' || event.type == 'change',reloadModule: false});});showHideHeightOptions();$height.on('change', () => {showHideHeightOptions();WidgetsManagers.setVal(this.value.height,'value',$height.val());switch( this.value.height.value ) {case 'min-height':WidgetsManagers.setVal(this.style.container,'min-height',$slider.val() + this.value.height.units);break;case 'full':WidgetsManagers.setVal(this.style.container,'min-height','100vh');break;default:WidgetsManagers.setVal(this.style.container,'min-height','');break;}
this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});function showHideHeightOptions() {WidgetsAdmin.$adminPanel.find('.height-type').hide();WidgetsAdmin.$adminPanel.find('.height-type.'+$height.val()).show();}}
renderCSS() {this.$el.parent().children('.w-m-style').remove();this.$el.parent().append(this.generateCSS());}
getSettings() {var settings = {id: this.id,value: this.value,advanced: this.advanced,class: this.class,style: this.style,columns: {},settings: this.settings};$.each(this.columns, function(columnID, column) {settings.columns[columnID] = column.getSettings();});return settings;}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_contentWidth">' + S123.escapeHtml(topWindow.translations.widgets.structure.contentWidth.text) + '</label>';this.adminTemplate += '<select class="form-control" id="' + this.id + '_contentWidth">';this.adminTemplate += '<option value="boxed"' + (WidgetsManagers.getVal(this.class.container,'boxed','') ? 'selected' : '') + '>' + S123.escapeHtml(topWindow.translations.widgets.structure.contentWidth.boxed) + '</option>';this.adminTemplate += '<option value="fullWidth"' + (WidgetsManagers.getVal(this.class.container,'fullWidth','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.structure.contentWidth.fullWidth) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_height">' + S123.escapeHtml(topWindow.translations.widgets.structure.height.text) + '</label>';this.adminTemplate += '<select class="form-control" id="' + this.id + '_height">';this.adminTemplate += '<option value="default"' + (WidgetsManagers.getVal(this.value.height,'value','') == 'default' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.structure.height.default) + '</option>';this.adminTemplate += '<option value="full"' + (WidgetsManagers.getVal(this.value.height,'value','') == 'full' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.structure.height.full) + '</option>';this.adminTemplate += '<option value="min-height"' + (WidgetsManagers.getVal(this.value.height,'value','') == 'min-height' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.structure.height.minHeight) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group height-type min-height">';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_minHeight" data-text="' + S123.escapeHtml(translations.sectionManager.sectionMinHeight + ' (%)') + '" data-value="' + parseInt(WidgetsManagers.getVal(this.value.height,'min-height','1')) + '" data-max="100" data-min="1" data-number-kind="1" data-design="twoLines" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="min-height"></div>') + '"></div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';}
getColumnsAmount() {return Object.keys(this.columns).length;}}
class ColumnWidget extends SystemWidget {constructor( settings ) {super(settings);this.widgets = {};this.$structure = null;this.positions = true;settings.type = 'column';this.$structure = settings.$structure;this.$widgetContainer = settings.$el.find('.w-m-widget-wrapper[data-type="column"]');this.widgets = settings.widgets;this.$widgetEl = this.$el.children('.s123-widget-element');this.initComponents();}
initComponents() {this.$el.addClass('no-outline-offset');this.$el.addClass('disable-outline-on-enter');OutlineHandler.register(this.$el);OutlineHandler.refresh();}
destroy() {OutlineHandler.destroy(this.id);OutlineHandler.refresh();}
initAdminPanel() {topWindow.ColorPickerInitialize();topWindow.UploadSingleFileHandler.init();topWindow.InitializeToolTips();var strucutreWidth = this.$structure.width();var siblingsAmount = this.getSiblings().length;var $backgroundType = WidgetsAdmin.$adminPanel.find('#' + this.id + '_backgroundType');var backgroundImage = topWindow.getUploadFileObjectByID(this.id + '_bgImage');var backgroundVideo = topWindow.getUploadFileObjectByID(this.id + '_bgVideo');backgroundImage.input.on('change',( event ) => {WidgetsManagers.setVal(this.value.image.data,'background-image',backgroundImage.input.val());WidgetsManagers.setVal(this.style.widget,'background-image','url('+this.value.image.data['background-image']+')');this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});backgroundImage.settings.obj.on('input',( event ) => {WidgetsManagers.setVal(this.value.image,'settings',backgroundImage.settings.get());WidgetsManagers.setVal(this.style.widget,'background-position',this.value.image.settings.focusPoint.x + '% ' + this.value.image.settings.focusPoint.y + '%');this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});backgroundVideo.input.on('change',( event ) => {WidgetsManagers.setVal(this.value.video.data,'src',backgroundVideo.input.val());this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});});backgroundVideo.settings.obj.on('input',( event ) => {WidgetsManagers.setVal(this.value.video,'settings',backgroundVideo.settings.get());WidgetsManagers.setVal(this.style.element,'object-position',this.value.video.settings.focusPoint.x + '% ' + this.value.video.settings.focusPoint.y + '%');this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});showBgOptions();$backgroundType.on('change',() => {showBgOptions();WidgetsManagers.setVal(this.value,'backgroundType',$backgroundType.val());WidgetsManagers.removeVal(this.style.widget,'background-color');$.each(this.value.image.data, (propName, propVal) => {WidgetsManagers.removeVal(this.style.widget,propName);});$.each(this.value.video.data, (propName, propVal) => {WidgetsManagers.removeVal(this.style.element,propName);});if ( this.getValue('backgroundType') == 'image' ) {$.each(this.value.image.data, (propName, propVal) => {if ( propName == 'background-image' ) {propVal = 'url('+propVal+')';}
WidgetsManagers.setVal(this.style.widget,propName,propVal);});} else if ( this.getValue('backgroundType') == 'video' ) {$.each(this.value.video.data, (propName, propVal) => {WidgetsManagers.setVal(this.style.element,propName,propVal);});}
this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});topWindow.sliderInputs[this.id+'_width'].$html.find('#'+this.id+'_width')
.on('input.ColumnWidget sliderInput.stop.ColumnWidget change.ColumnWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.style.widget,'width',$this.val() + '%');WidgetsManagers.setVal(this.value,'width',$this.val());this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: event.type == 'sliderInput' || event.type == 'change',reloadModule: false,callBack: ( widgetObj ) => {widgetObj.setSiblisngsWidth(strucutreWidth,siblingsAmount,parseInt(widgetObj.style.widget['width']));}});});topWindow.sliderInputs[this.id+'_widgets_space'].$html.find('#'+this.id+'_widgets_space')
.on('input.ColumnWidget sliderInput.stop.ColumnWidget change.ColumnWidget',( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'widgetsSpace',$this.val());this.setProp({name: 'value',val: this.value,save: event.type == 'sliderInput' || event.type == 'change',reloadModule: false,callBack: ( widgetObj ) => {widgetObj.renderCSS();}});});WidgetsAdmin.$adminPanel.find('#'+this.id+'_back_color').on('change.ColumnWidget', ( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'background-color',$this.val());WidgetsManagers.setVal(this.style.widget,'background-color',$this.val());this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});WidgetsAdmin.$adminPanel.find('#'+this.id+'_text_color').on('change.ColumnWidget', ( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value,'color',$this.val());WidgetsManagers.setVal(this.style.widget,'color',$this.val());WidgetsManagers.removeVal(this.class.widget,'customTextColor');if ( this.value['color'].length > 0 ) {WidgetsManagers.setVal(this.class.widget,'customTextColor',true);}
this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'class',val: this.class,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false,callBack: ( widgetObj ) => {fixPopupVideoColor(widgetObj);}});});WidgetsAdmin.$adminPanel.find('#' + this.id + '_backgroundRepeat').on('change.ColumnWidget', ( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value.image.data,'background-repeat',$this.val());WidgetsManagers.setVal(this.style.widget,'background-repeat',$this.val());this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});WidgetsAdmin.$adminPanel.find('#' + this.id + '_backgroundSize').on('change.ColumnWidget', ( event ) => {var $this = $(event.target);WidgetsManagers.setVal(this.value.image.data,'background-size',$this.val());WidgetsManagers.setVal(this.style.widget,'background-size',$this.val());this.setProp({name: 'style',val: this.style,save: false,reloadModule: false});this.setProp({name: 'value',val: this.value,save: true,reloadModule: false});});WidgetsAdmin.$adminPanel.find('#' + this.id + '_verticalAlignment').on('change.ColumnWidget', ( event ) => {var $this = $(event.target);$this.find('option').each((index, option) => {WidgetsManagers.removeVal(this.class.widget,$(option).val());});WidgetsManagers.setVal(this.class.widget,$this.val(),true);this.setProp({name: 'class',val: this.class,save: true,reloadModule: false});});$.each(this.getValue('carouselImages'), (index, image) => {var imageObj = topWindow.getUploadFileObjectByID(image.id);var carousel = this.getValue('carousel');imageObj.input.on('change',( event ) => {image.src = imageObj.input.val();carousel.images[index] = image;delete carousel.images[index].id;this.setProp({name: 'value',val: this.value,save: true,reloadModule: true});});imageObj.settings.obj.on('input',( event ) => {image.settings = imageObj.settings.get();this.setProp({name: 'value',val: this.value,save: true,reloadModule: false,callBack: ( widgetObj ) => {widgetObj.renderCSS();}});});});function fixPopupVideoColor( widgetObj ) {var $popupVideo = widgetObj.$widgetContainer.find('.s123-widget[data-type="videoWidget"].promoVideoPopup');var color = widgetObj.value['color'].length > 0 ? widgetObj.value['color'] : widgetObj.$el.closest('.s123-module').css('color');if ( $popupVideo.length > 0 ) {$popupVideo.find('.video-popup-btn').css({color: color,borderColor: color,});$popupVideo.find('.svg-m').css('background-color',color);}}
function showBgOptions() {WidgetsAdmin.$adminPanel.find('.background-type').hide();WidgetsAdmin.$adminPanel.find('.background-type.'+$backgroundType.find('option:selected').data('related-option')).show();}}
generateCustomCSS( rootSelector ) {var style = '';if ( this.value.backgroundType != 'video' ) {style += rootSelector + ' #'+this.id+' .promo-video-bg.s123-widget-element {';style += 'display: none;';style += '}';}
if ( this.value.backgroundType != 'carousel' ) {style += rootSelector + ' #'+this.id+' .promo-image-bg.s123-widget-element {';style += 'display: none;';style += '}';} else {$.each(this.getValue('carousel').images, ( key, image ) => {if ( image.settings.focusPoint ) {style += rootSelector + ' #'+this.id+' .promo-image-bg.s123-widget-element .carousel-inner .item:nth-child('+(key+1)+') {';style += 'background-position: '+image.settings.focusPoint.x+'% '+image.settings.focusPoint.y+'%;';style += '}';}});}
style += rootSelector + ' #'+this.id+' .w-m-widget-wrapper:not(:last-child) {';style += 'margin-bottom:'+this.value.widgetsSpace+'px;';style += '}';if ( this.value.t_widgetsSpace ) {style += '@media(min-width: 768px) and (max-width: 1024px) {';style += rootSelector + ' #'+this.id+' .w-m-widget-wrapper:not(:last-child) {';style += 'margin-bottom:'+this.value.t_widgetsSpace+'px;';style += '}';style += '}';}
if ( this.value.m_widgetsSpace ) {style += '@media(max-width: 767px) {';style += rootSelector + ' #'+this.id+' .w-m-widget-wrapper:not(:last-child) {';style += 'margin-bottom:'+this.value.m_widgetsSpace+'px;';style += '}';style += '}';}
return style;}
renderCSS() {this.addSharedStyle();this.$el.children('.w-m-style').remove();this.$el.append(this.generateCSS());}
setSiblisngsWidth( strucutreWidth, siblingsAmount, width ) {this.getSiblings().each(( index, column ) => {var columnObj = WidgetsManagers.getWidget(this.moduleID,column.id);WidgetsManagers.setVal(columnObj.style.widget,'width',((100 - width) / siblingsAmount) + '%');WidgetsManagers.setVal(columnObj.value,'width',((100 - width) / siblingsAmount));columnObj.renderCSS();WidgetsManagers.updateWidgetObj(columnObj.moduleID,columnObj.id,columnObj);});}
getSiblings() {return this.$el.siblings('.w-m-column');}
getSettings() {var settings = {id: this.id,value: this.value,class: this.class,style: this.style,advanced: this.advanced,widgets: {},settings: this.settings};$.each(this.widgets, function(widgetID, widget) {settings.widgets[widgetID] = widget.getSettings();});return settings;}
getValue( key ) {switch( key ) {case 'background-image':case 'background-repeat':case 'background-size':return WidgetsManagers.getVal(this.value.image.data,key,'');break;case 'bgSettings':if ( ['noBackground','color'].indexOf(this.getValue('backgroundType')) != -1  ) {return {};} else {return this.value[this.getValue('backgroundType')].settings;}
break;case 'src':return WidgetsManagers.getVal(this.value.video.data,key,'');break;case 'carouselImages':var carouselImages = [];for (var i = 0; i < 3 ; i++) {var image = this.getValue('carousel').images[i];if ( !image ) {image = {src: '',settings: {}};}
image.id = this.id + '_backgroundCarousel-' + (i + 1);carouselImages.push(image);}
return carouselImages;break;default:if ( key == 'width' ) {return WidgetsManagers.getVal(this.value,key,'50');} else if ( key == 'widgetsSpace' ) {return WidgetsManagers.getVal(this.value,key,'20');} else {return WidgetsManagers.getVal(this.value,key,'');}
break;}}
addSharedStyle() {if ( this.getValue('backgroundType') != 'noBackground' ) {WidgetsManagers.setVal(this.style.widget,'background-color',this.getValue('background-color'));}
WidgetsManagers.setVal(this.style.widget,'width',this.getValue('width') + '%');WidgetsManagers.setVal(this.style.widget,'color',this.getValue('color'));}
setAdminTemplate() {this.adminTemplate = '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_verticalAlignment">' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.text) + '</label>';this.adminTemplate += '<select class="form-control" id="' + this.id + '_verticalAlignment">';this.adminTemplate += '<option value="">' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.default) + '</option>';this.adminTemplate += '<option value="topAlignment"' + (WidgetsManagers.getVal(this.class.widget,'topAlignment','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.top) + '</option>';this.adminTemplate += '<option value="centerAlignment"' + (WidgetsManagers.getVal(this.class.widget,'centerAlignment','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.center) + '</option>';this.adminTemplate += '<option value="bottomAlignment"' + (WidgetsManagers.getVal(this.class.widget,'bottomAlignment','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.bottom) + '</option>';this.adminTemplate += '<option value="spaceBetween"' + (WidgetsManagers.getVal(this.class.widget,'spaceBetween','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.spaceBetween) + '</option>';this.adminTemplate += '<option value="spaceAround"' + (WidgetsManagers.getVal(this.class.widget,'spaceAround','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.spaceAround) + '</option>';this.adminTemplate += '<option value="spaceEvenly"' + (WidgetsManagers.getVal(this.class.widget,'spaceEvenly','') ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.verticalAlignment.spaceEvenly) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '{{sharedContentOptions}}';this.adminTemplate += '<div class="form-group ' + (this.getSiblings().length == 0 ? 'hidden' :'') + '">';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_width" data-text="' + S123.escapeHtml(topWindow.translations.widgets.column.width) + '" data-value="' + this.getValue('width') + '" data-max="100" data-min="0" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.column.widthToolTip) + '" data-number-kind="1" data-design="twoLines" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="width"></div>') + '"></div>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="sliderInput" id="' + this.id + '_widgets_space" data-text="' + S123.escapeHtml(topWindow.translations.widgets.column.widgetsSpace) + '" data-value="' + this.getValue('widgetsSpace') + '" data-max="100" data-min="0" data-tooltip="' + S123.escapeHtml(topWindow.translations.widgets.column.widgetsSpaceToolTip) + '" data-number-kind="1" data-design="twoLines" data-not-form-input="true" data-custom-html="' + S123.escapeHtml('<div data-prop-name="widgetsSpace"></div>') + '"></div>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="checkboxSingleSetting" data-type="widget">';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<label for="' + this.id + '_backgroundType">' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundType) + '</label>';this.adminTemplate += '<select class="form-control" id="' + this.id + '_backgroundType">';this.adminTemplate += '<option value="noBackground" data-related-option="no-background" ' + (this.getValue('backgroundType') == 'noBackground' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.noBackground) + '</option>';this.adminTemplate += '<option value="color" data-related-option="color-bg" ' + (this.getValue('backgroundType') == 'color' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.color) + '</option>';this.adminTemplate += '<option value="image" data-related-option="image-bg" ' + (this.getValue('backgroundType') == 'image' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.image) + '</option>';this.adminTemplate += '<option value="video" data-related-option="video-bg" ' + (this.getValue('backgroundType') == 'video' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.video) + '</option>';this.adminTemplate += '<option value="carousel" data-related-option="carousel-bg" ' + (this.getValue('backgroundType') == 'carousel' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.carousel) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group">';this.adminTemplate += '<div class="form-group background-type image-bg">';this.adminTemplate += '<div class="input-file-upload" id="' + this.id + '_bgImage" data-website-id="' + $('#websiteID').val() + '" data-mb="20" data-file-kind="1" data-value="' + this.getValue('background-image') + '" data-text="' + S123.escapeHtml(translations.image) + '" data-library="image" data-custom-class="promo-widget" data-not-form-input="true" data-crop="disable" data-image-focus-point="true" data-image-focus-point-preview="true" data-group-edit-tools="true"></div>';this.adminTemplate += '<textarea id="' + this.id + '_bgImage_settings" class="hidden">' + S123.escapeHtml(JSON.stringify(this.getValue('bgSettings'))) + '</textarea>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group background-type video-bg">';this.adminTemplate += '<div class="input-file-upload" id="' + this.id + '_bgVideo" data-website-id="' + $('#websiteID').val() + '" data-mb="20" data-file-kind="2" data-value="' + this.getValue('src') + '" data-text="' + S123.escapeHtml(topWindow.translations.widgets.column.video) + '" data-library="video" data-hide-remove-btn="true" data-image-focus-point="true" data-not-form-input="true"></div>';this.adminTemplate += '<textarea id="' + this.id + '_bgVideo_settings" class="hidden">' + S123.escapeHtml(JSON.stringify(this.getValue('bgSettings'))) + '</textarea>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group background-type carousel-bg">';$.each(this.getValue('carouselImages'), (index, image) => {this.adminTemplate += '<div class="input-file-upload" id="' + image.id + '" data-website-id="' + $('#websiteID').val() + '" data-mb="20" data-file-kind="1" data-value="' + image.src + '" data-text="' + S123.escapeHtml(topWindow.translations.widgets.column.image) + ' ' + (index + 1) + '" data-library="image" data-min-height="300" data-min-width="700" data-min-library-width="1200" data-crop="disable" data-filter="disable" data-image-focus-point="true" data-image-focus-point-preview="true" data-not-form-input="true"></div>';this.adminTemplate += '<textarea id="' + image.id + '_settings" class="hidden">' + S123.escapeHtml(JSON.stringify(image.settings)) + '</textarea>';});this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group background-type image-bg">';this.adminTemplate += '<label for="' + this.id + '_backgroundRepeat">' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundRepeat.text) + '</label>';this.adminTemplate += '<select class="form-control" id="' + this.id + '_backgroundRepeat">';this.adminTemplate += '<option value="no-repeat"' + (this.getValue('background-repeat') == 'no-repeat' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundRepeat.noRepeat) + '</option>';this.adminTemplate += '<option value="repeat"' + (this.getValue('background-repeat') == 'repeat' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundRepeat.repeat) + '</option>';this.adminTemplate += '<option value="repeat-x"' + (this.getValue('background-repeat') == 'repeat-x' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundRepeat.repeatX) + '</option>';this.adminTemplate += '<option value="repeat-y"' + (this.getValue('background-repeat') == 'repeat-y' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundRepeat.repeatY) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="form-group background-type image-bg">';this.adminTemplate += '<label for="' + this.id + '_backgroundSize">' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundSize.text) + '</label>';this.adminTemplate += '<select class="form-control" id="' + this.id + '_backgroundSize">';this.adminTemplate += '<option value="cover"' + (this.getValue('background-size') == 'cover' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundSize.cover) + '</option>';this.adminTemplate += '<option value="contain"' + (this.getValue('background-size') == 'contain' ? 'selected' : '' ) + '>' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundSize.contain) + '</option>';this.adminTemplate += '</select>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="row">';this.adminTemplate += '<div class="col-xs-6 background-type image-bg color-bg no-background video-bg carousel-bg">';this.adminTemplate += '<div class="colorPalette" id="' + this.id + '_text_color" data-text="' + S123.escapeHtml(topWindow.translations.widgets.column.textColor) + '" data-value="' + this.getValue('color') + '"  data-allow-empty="true" data-not-form-input="true"></div>';this.adminTemplate += '</div>';this.adminTemplate += '<div class="col-xs-6 background-type color-bg image-bg video-bg carousel-bg">';this.adminTemplate += '<div class="colorPalette" id="' + this.id + '_back_color" data-text="' + S123.escapeHtml(topWindow.translations.widgets.column.backgroundColor) + '" data-value="' + this.getValue('background-color') + '" data-allow-empty="true" data-not-form-input="true"></div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';this.adminTemplate += '</div>';}
getAlignment() {return WidgetsManagers.getVal(this.style.widget,'text-align');}
setAlignment( activeAlignment ) {WidgetsManagers.removeVal(this.style.widget,'text-align');if ( activeAlignment.length > 0 ) WidgetsManagers.setVal(this.style.widget,'text-align',activeAlignment);this.setProp({name: 'style',val: this.style,save: true,reloadModule: false});}}}
var WidgetsManagers = function() {var _ = {managers: {}};_.init = function() {};_.getAllModulesWidgets = function( moduleID ) {var allWidgets = [];$.each(_.managers, function( key, manager ) {allWidgets = [...allWidgets,...Object.values(manager.widgets)];});return allWidgets;};_.save = function( moduleID, reloadModule ) {_.managers[moduleID].save(reloadModule);};_.updateWidgetObj = function( moduleID, columnID, newWidgetObj ) {_.managers[moduleID].updateWidgetObj(columnID,newWidgetObj);};_.getWidget = function( moduleID, widgetID ) {return _.managers[moduleID].getWidget(widgetID);};_.getStructure = function( moduleID, columnID ) {return _.managers[moduleID].getStructure(columnID);};_.removeWidget = function( moduleID, columnID, widgetID ) {_.managers[moduleID].removeWidget(columnID,widgetID);if ( !WidgetsAdmin.isActive ) return;if ( WidgetsAdmin.widgetObj.id  != widgetID ) return;WidgetsAdmin.hide();};_.getFloatingBarObj = function( moduleID ) {return _.managers[moduleID].WidgetsFloatingBar;};_.setVal = function( propObj, propName, porpVal ) {propObj[WRH.getPropName(propName)] = porpVal;};_.getVal = function( propObj, propName, defVal ) {propName = WRH.getPropName(propName);if ( typeof propObj[propName] != 'undefined' ) {return propObj[propName];} else {return defVal;}};_.removeVal = function( propObj, propName ) {delete propObj[WRH.getPropName(propName)];};return _;}();var WidgetsAdmin = function() {var _ = {initialized: false,widgetObj: null,isReloading: false,isActive: false};_.init = function() {if ( _.initialized ) return;topWindow.$(topWindow.document).off('wizard_tabs_opened.ColumnWidget wizard_tabs_closed.ColumnWidget');_.$adminPanel = topWindow.$('#widgetsAdmin');$(document).on('click.WidgetsAdmin contextmenu.WidgetsAdmin focus.WidgetsAdmin','.widgets-admin-controller', function( event ) {var $this = $(this);if ( !$this.data('module-id') || !$this.data('widget-id') ) return;var widgetObj = WidgetsManagers.getWidget($this.data('module-id'),$this.data('widget-id'));_.show(widgetObj);});_.hide();_.initialized = true;};_.show = function( widgetObj ) {if ( !_.isReloading && _.isActive && _.widgetObj.id == widgetObj.id ) return;if ( _.widgetObj ) {_.widgetObj.removeOutline();}
_.$adminPanel.attr('data-widget',widgetObj.type);_.$adminPanel.data('widget-id',widgetObj.id);_.widgetObj = widgetObj;_.Tabs.init({$container: _.$adminPanel.find('.widgets-admin')});var widgetTabObj = widgetObj.getAdminTabObj();var advancedTabObj = getAdminTabObj(widgetObj);_.$adminPanel.find('.t-h-e-tab-title .text-container').html(widgetTabObj.title);if ( !widgetTabObj ) {_.Tabs.add(advancedTabObj);_.Tabs.show(advancedTabObj.id);} else {if ( widgetTabObj.id == 'content' ) {widgetTabObj.html = widgetTabObj.html.replace('{{sharedContentOptions}}',getSharedContentOptions(widgetObj));}
_.Tabs.add(widgetTabObj);_.Tabs.add(advancedTabObj);_.Tabs.show(widgetTabObj.id);widgetObj.initAdminPanel();}
_.DeviceVisibility.init({widgetObj: widgetObj,$container: _.$adminPanel.find('.w-m-device-visibility')});if ( widgetObj.type == 'structure' ) {_.ColumnsRevers.init({widgetObj: widgetObj,$tabletController: _.$adminPanel.find('#reverseColumnOnTablet'),$mobileController: _.$adminPanel.find('#reverseColumnOnMobile')});}
var marginUnits = WidgetsManagers.getVal(widgetObj.advanced,'marginUnits','px');var isMarginLinked = WidgetsManagers.getVal(widgetObj.advanced,'linkMarginValues',true);var advancedStyles = widgetObj.getAdvancedStyles();_.Margins = new InputsGroup({widgetObj: widgetObj,type: 'margin',$container: _.$adminPanel.find('.w-m-margins'),isLinked: isMarginLinked,unitObj: {def: 'px',value: marginUnits},inputsObj: {top: {value: advancedStyles['margin-top'].replace(marginUnits,''),isDisabled: false},right: {value: advancedStyles['margin-right'].replace(marginUnits,''),isDisabled: ( widgetObj.type == 'structure' ? true : false)},bottom: {value: advancedStyles['margin-bottom'].replace(marginUnits,''),isDisabled: false},left: {value: advancedStyles['margin-left'].replace(marginUnits,''),isDisabled: ( widgetObj.type == 'structure' ? true : false)}},translations: {text: topWindow.translations.widgets.widgetsAdmin.advanced.margin,top: topWindow.translations.widgets.widgetsAdmin.advanced.top,right: topWindow.translations.widgets.widgetsAdmin.advanced.right,bottom: topWindow.translations.widgets.widgetsAdmin.advanced.bottom,left: topWindow.translations.widgets.widgetsAdmin.advanced.left},unitChangeCallBack: function( newUnit ) {WidgetsManagers.setVal(_.Margins.widgetObj.advanced,'marginUnits',newUnit);_.Margins.widgetObj.setProp({name: 'advanced',val: _.Margins.widgetObj.advanced,save: false,reloadModule: false});},valueChangeCallBack: function( inputsObj, unit ) {var elementType = 'container';if ( _.Margins.widgetObj.type == 'structure' || _.Margins.widgetObj.type == 'column' ) {elementType = 'wrapper';}
$.each(inputsObj, function(key, input) {if ( $.isNumeric(input.value) ) {WidgetsManagers.setVal(_.Margins.widgetObj.advanced.style[elementType],'margin-'+key,input.value + unit);} else {WidgetsManagers.removeVal(_.Margins.widgetObj.advanced.style[elementType],'margin-'+key);}});_.Margins.widgetObj.setProp({name: 'advanced',val: _.Margins.widgetObj.advanced,save: false,reloadModule: false,callBack: ( widgetObj ) => {widgetObj.renderCSS();}});},linkValuesCallBack: function( isLinked ) {WidgetsManagers.setVal(_.Margins.widgetObj.advanced,'linkMarginValues',isLinked);_.Margins.widgetObj.setProp({name: 'advanced',val: _.Margins.widgetObj.advanced,save: false,reloadModule: false,callBack: ( widgetObj ) => {widgetObj.renderCSS();}});},saveCallBack: function() {_.Margins.widgetObj.setProp({name: 'advanced',val: _.Margins.widgetObj.advanced,save: true,reloadModule: false});}});var paddingUnits = WidgetsManagers.getVal(widgetObj.advanced,'paddingUnits','px');var isPaddingLinked = WidgetsManagers.getVal(widgetObj.advanced,'linkPaddingValues',true);_.Paddings = new InputsGroup({widgetObj: widgetObj,type: 'padding',$container: _.$adminPanel.find('.w-m-paddings'),isLinked: isPaddingLinked,unitObj: {def: 'px',value: paddingUnits,},inputsObj: {top: {value: advancedStyles['padding-top'].replace(paddingUnits,''),isDisabled: false,min: 0},right: {value: advancedStyles['padding-right'].replace(paddingUnits,''),isDisabled: false,min: 0},bottom: {value: advancedStyles['padding-bottom'].replace(paddingUnits,''),isDisabled: false,min: 0},left: {value: advancedStyles['padding-left'].replace(paddingUnits,''),isDisabled: false,min: 0}},translations: {text: topWindow.translations.widgets.widgetsAdmin.advanced.padding,top: topWindow.translations.widgets.widgetsAdmin.advanced.top,right: topWindow.translations.widgets.widgetsAdmin.advanced.right,bottom: topWindow.translations.widgets.widgetsAdmin.advanced.bottom,left: topWindow.translations.widgets.widgetsAdmin.advanced.left},unitChangeCallBack: function( newUnit ) {WidgetsManagers.setVal(_.Paddings.widgetObj.advanced,'paddingUnits',newUnit);_.Paddings.widgetObj.setProp({name: 'advanced',val: _.Paddings.widgetObj.advanced,save: false,reloadModule: false});},valueChangeCallBack: function( inputsObj, unit ) {var elementType = 'container';if ( _.Paddings.widgetObj.type == 'structure' || _.Paddings.widgetObj.type == 'column' ) {elementType = 'wrapper';}
$.each(inputsObj, function(key, input) {if ( $.isNumeric(input.value) ) {WidgetsManagers.setVal(_.Paddings.widgetObj.advanced.style[elementType],'padding-'+key,input.value + unit);} else {WidgetsManagers.removeVal(_.Paddings.widgetObj.advanced.style[elementType],'padding-'+key);}});_.Paddings.widgetObj.setProp({name: 'advanced',val: _.Paddings.widgetObj.advanced,save: false,reloadModule: false,callBack: ( widgetObj ) => {widgetObj.renderCSS();}});},linkValuesCallBack: function( isLinked ) {WidgetsManagers.setVal(_.Paddings.widgetObj.advanced,'linkPaddingValues',isLinked);_.Paddings.widgetObj.setProp({name: 'advanced',val: _.Paddings.widgetObj.advanced,save: false,reloadModule: false,callBack: ( widgetObj ) => {widgetObj.renderCSS();}});},saveCallBack: function() {_.Paddings.widgetObj.setProp({name: 'advanced',val: _.Paddings.widgetObj.advanced,save: true,reloadModule: false});}});if ( widgetObj.positions ) {_.Alignment.init({$controllers: _.$adminPanel.find('.widget-align-box'),changeCallback: function( activeAlignment ) {_.widgetObj.setAlignment(activeAlignment);}});}
topWindow.InitializeToolTips();if ( !_.isActive ) {_.isActive = true;topWindow.OpenWizardTab('widgetsAdmin',true);}
$(document).trigger('OutlineHandler.focus',[_.widgetObj.getOutlineElement()]);$(document).trigger('OutlineHandler.setPosition',[_.widgetObj.getOutlineElement().get(0).id]);$(document).off('previewScale.deviceTypeChange.WidgetsAdmin').on('previewScale.deviceTypeChange.WidgetsAdmin',function( event, deviceType ) {$(document).trigger('OutlineHandler.setPosition',[_.widgetObj.getOutlineElement().get(0).id]);});topWindow.$(topWindow.document).off('wizard_tabs_opened.ColumnWidget wizard_tabs_closed.ColumnWidget').one('wizard_tabs_opened.ColumnWidget wizard_tabs_closed.ColumnWidget', ( event, tabID ) => {if ( tabID == 'widgetsAdmin' && _.$adminPanel.data('widget-id') == _.widgetObj.id ) return;if ( _.widgetObj ) _.widgetObj.removeOutline();_.isActive = false;_.widgetObj = null;$(document).off('previewScale.deviceTypeChange.WidgetsAdmin');});if ( _.widgetObj.responsiveSupport ) {var containerSelector = '';$.each(_.widgetObj.responsiveSupport, function(tabName, options) {$.each(options, function(optionName, option) {containerSelector += '[data-prop-name="'+option+'"],'});});containerSelector = containerSelector.slice(0,-1);WRH.addControllers({$adminPanel: _.$adminPanel,responsiveSupport: _.widgetObj.responsiveSupport,containerSelector: containerSelector,deviceChangeCallback: function() {_.reload();}});}};_.hide = function() {if ( topWindow.$('#widgetsAdmin').is(':visible') ) {_.isActive = false;topWindow.Wizard.Tabs.widgetsAdmin.t.trigger('click');}};_.refresh = function() {if ( _.isActive && _.widgetObj ) {_.widgetObj = WidgetsManagers.getWidget(_.widgetObj.moduleID,_.widgetObj.id);$(document).trigger('OutlineHandler.focus',[_.widgetObj.getOutlineElement()]);}};_.reload = function() {if ( !_.isActive ) return;_.isReloading = true;_.widgetObj = WidgetsManagers.getWidget(_.widgetObj.moduleID,_.widgetObj.id);var activeTabID = _.Tabs.getActiveTabID();_.show(_.widgetObj);_.Tabs.show(activeTabID);_.isReloading = false;};function getAdminTabObj( widgetObj ) {var html = '';html += '<div class="checkboxSingleSetting" data-type="widget">';html += '<div class="form-group w-m-margins w-m-input-group"></div>';html += '<div class="form-group w-m-paddings w-m-input-group"></div>';if ( widgetObj.type == 'structure' ) {html += '<div class="row ' + (widgetObj.getColumnsAmount() < 2 ? 'hidden' :'') + '">';html += '<div class="col-xs-9">';html += '<div class="form-group">';html += '<span>' + S123.escapeHtml(topWindow.translations.widgets.structure.reverseColumn.tablet) + '&nbsp;';html += '<a href="#" onclick="return false;" data-rel="tooltip" data-html="true" data-trigger="hover" title="' + S123.escapeHtml(topWindow.translations.widgets.structure.reverseColumn.tabletToolTip) + '"><i class="fa fa-question-circle"></i>';html += '</a>';html += '</span>';html += '</div>';html += '</div>';html += '<div class="col-xs-3 pull-right">';html += '<label class="pull-right">';html += '<input id="reverseColumnOnTablet" class="ace ace-switch" type="checkbox"' + (widgetObj.advanced.reverseColumnOnTablet ? 'checked' : '') + '>';html += '<span class="lbl"></span>';html += '</label>';html += '</div>';html += '</div>';html += '<div class="row ' + (widgetObj.getColumnsAmount() < 2 ? 'hidden' :'') + '">';html += '<div class="col-xs-9">';html += '<div class="form-group">';html += '<span>' + S123.escapeHtml(topWindow.translations.widgets.structure.reverseColumn.mobile) + '&nbsp;';html += '<a href="#" onclick="return false;" data-rel="tooltip" data-html="true" data-trigger="hover" title="' + S123.escapeHtml(topWindow.translations.widgets.structure.reverseColumn.mobileToolTip) + '"><i class="fa fa-question-circle"></i>';html += '</a>';html += '</span>';html += '</div>';html += '</div>';html += '<div class="col-xs-3 pull-right">';html += '<label class="pull-right">';html += '<input id="reverseColumnOnMobile" class="ace ace-switch" type="checkbox"' + (widgetObj.advanced.reverseColumnOnMobile ? 'checked' : '') + '>';html += '<span class="lbl"></span>';html += '</label>';html += '</div>';html += '</div>';}
html += '<div class="form-group w-m-device-visibility"></div>';html += '</div>';return {id: 'advanced',controllerText: topWindow.translations.widgets.advanced,html: html};}
function getSharedContentOptions( widgetObj ) {var html = '';if ( widgetObj.positions ) {html += '<div class="form-group">';html += '<div class="widget-align-container">';html += '<div data-prop-name="align">';html += '<label>' + S123.escapeHtml(topWindow.translations.widgets.widgetsAdmin.widgetPosition) + '</label>';html += '</div>';html += '<div class="widget-align">';html += '<a href="#" class="widget-align-box '+(widgetObj.getAlignment() == 'left' ? 'active' : '')+'" data-value="left">';html += '<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="align-left" class="svg-inline--fa fa-align-left fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M12.83 344h262.34A12.82 12.82 0 0 0 288 331.17v-22.34A12.82 12.82 0 0 0 275.17 296H12.83A12.82 12.82 0 0 0 0 308.83v22.34A12.82 12.82 0 0 0 12.83 344zm0-256h262.34A12.82 12.82 0 0 0 288 75.17V52.83A12.82 12.82 0 0 0 275.17 40H12.83A12.82 12.82 0 0 0 0 52.83v22.34A12.82 12.82 0 0 0 12.83 88zM432 168H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16z"></path></svg>';
html += '</a>';html += '<a href="#" class="widget-align-box '+(widgetObj.getAlignment() == 'center' ? 'active' : '')+'" data-value="center">';html += '<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="align-justify" class="svg-inline--fa fa-align-justify fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 424H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16zm0-128H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16zm0-128H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16zm0-128H16A16 16 0 0 0 0 56v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V56a16 16 0 0 0-16-16z"></path></svg>';
html += '</a>';html += '<a href="#" class="widget-align-box '+(widgetObj.getAlignment() == 'right' ? 'active' : '')+'" data-value="right">';html += '<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="align-right" class="svg-inline--fa fa-align-right fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M16 216h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16zm416 208H16a16 16 0 0 0-16 16v16a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-16a16 16 0 0 0-16-16zm3.17-384H172.83A12.82 12.82 0 0 0 160 52.83v22.34A12.82 12.82 0 0 0 172.83 88h262.34A12.82 12.82 0 0 0 448 75.17V52.83A12.82 12.82 0 0 0 435.17 40zm0 256H172.83A12.82 12.82 0 0 0 160 308.83v22.34A12.82 12.82 0 0 0 172.83 344h262.34A12.82 12.82 0 0 0 448 331.17v-22.34A12.82 12.82 0 0 0 435.17 296z"></path></svg>';
html += '</a>';html += '</div>';html += '</div>';html += '</div>';}
return html;}
_.Tabs = function() {var _ = {$container: null,};_.init = function( settings ) {_.tabs = {};_.$container = settings.$container;_.$container.html(generateHtml());_.innerTabsHanler = new InnerTabsHanler({$container: _.$container});};_.show = function( tabID ) {_.innerTabsHanler.show(tabID);};_.getActiveTabID = function( tabID ) {return _.innerTabsHanler.activeTabID;};_.add = function( tabObj ) {_.tabs[tabObj.id] = {$controller: $('<div data-tab="' + tabObj.id + '">' + S123.escapeHtml(tabObj.controllerText) + '</div>'),$content: $('<div id="' + tabObj.id + '" class="tabContent fancy-scrollbar">' + tabObj.html + '</div>')};_.$container.find('.i-t-handler .i-t-header').append(_.tabs[tabObj.id].$controller);_.$container.find('.i-t-handler').append(_.tabs[tabObj.id].$content);};function generateHtml() {var html = '';html += '<div class="i-t-handler">';html += '<div class="i-t-header"></div>';html += '</div>';return html;}
function InnerTabsHanler( settings ) {var _ = {$container: settings.$container,activeTabID: null};_.init = function () {_.$linkContainer = _.$container.find('.i-t-header');_.$linkContainer.on('click.inner_tabs_hanler','[data-tab]', function() {_.show($(this).data('tab'));});};_.show = function( tabID ) {_.activeTabID = tabID;_.$container.find('.tabContent').removeClass('active');_.$container.find('#' + _.activeTabID + '.tabContent').addClass('active');_.$container.find('.i-t-header [data-tab]').removeClass('active');_.$container.find('.i-t-header [data-tab="' + _.activeTabID + '"]').addClass('active');};_.init();return _;};return _;}();_.DeviceVisibility = function() {var _ = {$container: null,$tabletController: null,$mobileController: null};_.init = function( settings ) {_.widgetObj = settings.widgetObj;_.$container = settings.$container;_.elementType = _.widgetObj.getVisibiltyElementType();_.$container.html(generateHtml());_.$container.find('#widgetsAdminHideOnTablet').on('change', function() {var $this = $(this);var widgetObj = WidgetsManagers.getWidget(_.widgetObj.moduleID,_.widgetObj.id);WidgetsManagers.removeVal(widgetObj.style[_.elementType],'t_display');if ( $this.is(':checked') ) {WidgetsManagers.setVal(widgetObj.style[_.elementType],'t_display','none');}
widgetObj.setProp({name: 'style',val: widgetObj.style,save: true,reloadModule: false,callBack: ( widgetObj ) => {WRH.handleWidgetVisibility([widgetObj]);}});});_.$container.find('#widgetsAdminHideOnMobile').on('change', function() {var $this = $(this);var widgetObj = WidgetsManagers.getWidget(_.widgetObj.moduleID,_.widgetObj.id);WidgetsManagers.removeVal(widgetObj.style[_.elementType],'m_display');if ( $this.is(':checked') ) {WidgetsManagers.setVal(widgetObj.style[_.elementType],'m_display','none');}
widgetObj.setProp({name: 'style',val: widgetObj.style,save: true,reloadModule: false,callBack: ( widgetObj ) => {WRH.handleWidgetVisibility([widgetObj]);}});});};function generateHtml() {var hideOnTablet = WidgetsManagers.getVal(_.widgetObj.style[_.elementType],'t_display','') == 'none';var hideOnMobile = WidgetsManagers.getVal(_.widgetObj.style[_.elementType],'m_display','') == 'none';var html = '';html += '<div class="row">';html += '<div class="col-xs-9">';html += '<div class="form-group">';html += '<span>' + S123.escapeHtml(topWindow.translations.widgets.widgetsAdmin.advanced.hideOnTablet) + '&nbsp;';html += '<a href="#" onclick="return false;" data-rel="tooltip" data-html="true" data-trigger="hover" title="' + S123.escapeHtml(topWindow.translations.widgets.widgetsAdmin.advanced.hideOnTabletToolTip) + '"><i class="fa fa-question-circle"></i>';html += '</a>';html += '</span>';html += '</div>';html += '</div>';html += '<div class="col-xs-3 pull-right">';html += '<label class="pull-right">';html += '<input id="widgetsAdminHideOnTablet" class="ace ace-switch" type="checkbox"' + (hideOnTablet ? 'checked' : '') + '>';html += '<span class="lbl"></span>';html += '</label>';html += '</div>';html += '</div>';html += '<div class="row">';html += '<div class="col-xs-9">';html += '<div class="form-group">';html += '<span>' + S123.escapeHtml(topWindow.translations.widgets.widgetsAdmin.advanced.hideOnMobile) + '&nbsp;';html += '<a href="#" onclick="return false;" data-rel="tooltip" data-html="true" data-trigger="hover" title="' + S123.escapeHtml(topWindow.translations.widgets.widgetsAdmin.advanced.hideOnMobileToolTip) + '"><i class="fa fa-question-circle"></i>';html += '</a>';html += '</span>';html += '</div>';html += '</div>';html += '<div class="col-xs-3 pull-right">';html += '<label class="pull-right">';html += '<input id="widgetsAdminHideOnMobile" class="ace ace-switch" type="checkbox"' + (hideOnMobile ? 'checked' : '') + '>';html += '<span class="lbl"></span>';html += '</label>';html += '</div>';html += '</div>';return html;}
return _;}();_.ColumnsRevers = function() {var _ = {mobileClass: 'w-m-mobile-reverse',tabletClass: 'w-m-tablet-reverse',$tabletController: null,$mobileController: null};_.init = function( settings ) {_.$tabletController = settings.$tabletController;_.$mobileController = settings.$mobileController;_.$tabletController.on('change', function() {var $this = $(this);var widgetObj = WidgetsManagers.getWidget(_.widgetObj.moduleID,_.widgetObj.id);widgetObj.$el.removeClass(_.tabletClass);widgetObj.advanced.reverseColumnOnTablet = false;if ( $this.is(':checked') ) {widgetObj.$el.addClass(_.tabletClass);widgetObj.advanced.reverseColumnOnTablet = true;}
WidgetsManagers.save(widgetObj.moduleID,false);if ( topWindow.Wizard.Preview.Scale.mode == 'tablet' ) {$(document).trigger('s123.page.ready.refreshAOS');}});_.$mobileController.on('change', function() {var $this = $(this);var widgetObj = WidgetsManagers.getWidget(_.widgetObj.moduleID,_.widgetObj.id);widgetObj.$el.removeClass(_.mobileClass);widgetObj.advanced.reverseColumnOnMobile = false;if ( $this.is(':checked') ) {widgetObj.$el.addClass(_.mobileClass);widgetObj.advanced.reverseColumnOnMobile = true;}
WidgetsManagers.save(widgetObj.moduleID,false);if ( topWindow.Wizard.Preview.Scale.mode == 'mobile' ) {$(document).trigger('s123.page.ready.refreshAOS');}});_.widgetObj = settings.widgetObj;};return _;}();_.Alignment = function() {var _ = {$controllers: null,changeCallback: null};_.init = function( settings ) {_.$controllers = settings.$controllers;_.changeCallback = settings.changeCallback;_.$controllers.on('click', function( event ) {event.preventDefault();var $this = $(this);if ( $this.hasClass('disabled') ) return;$this.siblings().removeClass('active');if ( $this.hasClass('active') ) {$this.removeClass('active');} else {$this.addClass('active');}
var $activeController = _.$controllers.filter('.active');if ( $activeController.length > 0 ) {if ( _.changeCallback ) _.changeCallback.call(this,$activeController.data('value'));} else {if ( _.changeCallback ) _.changeCallback.call(this,'');}});};return _;}();function InputsGroup( settings ) {var _ = {$container: settings.$container,widgetObj: settings.widgetObj,type: settings.type,isLinked: settings.isLinked,unitObj: settings.unitObj,inputsObj: settings.inputsObj,translations: settings.translations,unitChangeCallBack: settings.unitChangeCallBack,valueChangeCallBack: settings.valueChangeCallBack,linkValuesCallBack: settings.linkValuesCallBack,saveCallBack: settings.saveCallBack};_.init = function() {_.unit = _.unitObj.value ? _.unitObj.value : _.unitObj.def;_.$container.html(generateHTML());var $inputs = _.$container.find('.w-m-input:not([disabled])');var $firstInput = $inputs.first();$inputs.on('change input', function( event ) {var $this = $(this);_.inputsObj[$this.data('id')].value = $this.val();if ( _.isLinked ) {$inputs.each(function(index, input) {var $input = $(this);if ( $this.data('id') == $input.data('id') ) return;$input.val($this.val());_.inputsObj[$input.data('id')].value = $input.val();});if ( _.valueChangeCallBack ) _.valueChangeCallBack.call(this,_.inputsObj,_.unit);} else {if ( !$.isNumeric($this.val()) ) $this.val(0);if ( _.valueChangeCallBack ) _.valueChangeCallBack.call(this,_.inputsObj,_.unit);}
clearTimeout(_.finishedTyping);if ( event.type == 'change' ) {_.finishedTyping = setTimeout( function() {if ( _.saveCallBack ) _.saveCallBack.call(this);},topWindow.doneTypingInterval_Short);}});_.$container.find('.units').on('click', function( event ) {var $this = $(this);_.$container.find('.units').removeClass('active');$this.addClass('active');_.unit = $this.data('value');if ( _.unitChangeCallBack ) _.unitChangeCallBack.call(this,_.unit);_.$container.find('.w-m-input:not([disabled])').each(function( index, input ) {var $this = $(this);if ( _.valueChangeCallBack ) _.valueChangeCallBack.call(this,_.inputsObj,_.unit);});if ( _.saveCallBack ) _.saveCallBack.call(this);});_.$container.find('.link-values a').on('click', function( event ) {var $this = $(this).parent();if ( $this.hasClass('active') ) {$this.removeClass('active');_.isLinked = false;$inputs.each(function( index, input ) {var $this = $(this);if ( !$.isNumeric($this.val()) ) {$this.val(0);_.inputsObj[$this.data('id')].value = $this.val();}});if ( _.valueChangeCallBack ) _.valueChangeCallBack.call(this,_.inputsObj,_.unit);if ( _.linkValuesCallBack ) _.linkValuesCallBack.call(this,_.isLinked,_.unit);} else {$this.addClass('active');_.isLinked = true;if ( _.linkValuesCallBack ) _.linkValuesCallBack.call(this,_.isLinked);$inputs.each(function( index, input ) {var $this = $(this);if ( $this.data('id') ==  $firstInput.data('id') ) return;$this.val($firstInput.val());_.inputsObj[$this.data('id')].value = $this.val();});if ( _.valueChangeCallBack ) _.valueChangeCallBack.call(this,_.inputsObj,_.unit);}
if ( _.saveCallBack ) _.saveCallBack.call(this);});};function generateHTML() {var html = '';html += '<div class="w-m-space-around-header">';html += '<div data-prop-name="' + _.type + '">'
html += '<label>' + S123.escapeHtml(_.translations.text) + '</label>';html += '</div>';html += '<div class="w-m-units-box">';html += '<a class="units ' + (_.unit == 'px' ? 'active' : '') + '" data-value="px" href="#">PX</a>';html += '<a class="units ' + (_.unit == '%' ? 'active' : '') + '" data-value="%" href="#">%</a>';html += '</div>';html += '</div>';html += '<div class="w-m-inline-inputs-box">';html += '<div class="w-m-input-container">';html += '<input data-id="top" type="number" value="' + (_.inputsObj.top.value ? _.inputsObj.top.value : '') + '" class="form-control w-m-input" ' + ($.isNumeric(_.inputsObj.top.min) ? 'min="' + _.inputsObj.top.min + '"' : '') + '>';html += '<label>' + S123.escapeHtml(_.translations.top) + '</label>';html += '</div>';html += '<div class="w-m-input-container">';html += '<input data-id="right" type="number" value="' + (_.inputsObj.right.value ? _.inputsObj.right.value : '') + '" class="form-control w-m-input" ' + (_.inputsObj.right.isDisabled ? 'disabled' : '') + ' ' + ($.isNumeric(_.inputsObj.right.min) ? 'min="' + _.inputsObj.right.min + '"' : '') + '>';html += '<label>' + S123.escapeHtml(_.translations.right) + '</label>';html += '</div>';html += '<div class="w-m-input-container">';html += '<input data-id="bottom" type="number" value="' + (_.inputsObj.bottom.value ? _.inputsObj.bottom.value : '') + '" class="form-control w-m-input" ' + ($.isNumeric(_.inputsObj.bottom.min) ? 'min="' + _.inputsObj.bottom.min + '"' : '') + '>';html += '<label>' + S123.escapeHtml(_.translations.bottom) + '</label>';html += '</div>';html += '<div class="w-m-input-container">';html += '<input data-id="left" type="number" value="' + (_.inputsObj.left.value ? _.inputsObj.left.value : '') + '" class="form-control w-m-input" ' + (_.inputsObj.left.isDisabled ? 'disabled' : '') + ' ' + ($.isNumeric(_.inputsObj.left.min) ? 'min="' + _.inputsObj.left.min + '"' : '') + '>';html += '<label>' + S123.escapeHtml(_.translations.left) + '</label>';html += '</div>';html += '<div class="w-m-input-container link-values ' + (_.isLinked ? 'active' : '') + '">';html += '<a href="#">';html += '<span class="linked">';html += '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lock-alt" class="svg-inline--fa fa-lock-alt fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zM264 392c0 22.1-17.9 40-40 40s-40-17.9-40-40v-48c0-22.1 17.9-40 40-40s40 17.9 40 40v48zm32-168H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path></svg>';
html += '</span>';html += '<span class="unlinked">';html += '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lock-open-alt" class="svg-inline--fa fa-lock-open-alt fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0zM264 392c0 22.1-17.9 40-40 40s-40-17.9-40-40v-48c0-22.1 17.9-40 40-40s40 17.9 40 40v48z"></path></svg>';
html += '</span>';html += '</a>';html += '</div>';html += '</div>';return html;}
_.init();return _;};return _;}();var WRH = function() {var _ = {initialized: false,$adminPanel: null,responsiveSupport: null,containerSelector: '',controllers: [],isActive: false,deviceType: '',deviceChangeCallback: false,propNamespace: {computer: '',mobile: 'm_',tablet: 't_'}};_.init = function( settings ) {if ( _.initialized ) return;$(document).on('previewScale.deviceTypeChange.WRH',function( event ) {_.handleWidgetVisibility(WidgetsManagers.getAllModulesWidgets());});_.initialized = true;};_.handleWidgetVisibility = function( widgetsArray ) {var deviceType = getDeviceType();$.each(widgetsArray, function( index, widgetObj ) {if ( !widgetObj.isVisible(deviceType) && deviceType != 'computer' ) {widgetObj.getVisibiltyDomElement().show();widgetObj.getVisibiltyDomElement().css({filter: 'opacity(.4) saturate(0)',background: 'repeating-linear-gradient(125deg,rgba(0,0,0,.05),rgba(0,0,0,.05) 1px,transparent 2px,transparent 9px)'});} else {widgetObj.getVisibiltyDomElement().css({display: '',filter: '',background: ''});}});};_.addControllers = function( settings ) {_.$adminPanel = settings.$adminPanel;_.responsiveSupport = settings.responsiveSupport;_.containerSelector = settings.containerSelector;_.deviceChangeCallback = settings.deviceChangeCallback;$.each(_.$adminPanel.find(_.containerSelector), function(index, container) {var $this = $(this);$this.addClass('w-r-h-container');_.controllers.push(new Devices({deviceType: getDeviceType(),$contianer: $this,deviceChangeCallback: _.setAll}));});topWindow.s123DropDown.init();$(document).off('previewScale.deviceTypeChange.WRH.addControllers').one('previewScale.deviceTypeChange.WRH.addControllers',function( event, deviceType ) {if ( _.deviceType == deviceType ) return;_.deviceType = deviceType;if ( _.deviceChangeCallback ) _.deviceChangeCallback.call(this);});_.isActive = true;};_.setAll = function( deviceType ) {$.each(_.controllers, function(index, controller) {controller.setIcon(deviceType);});};_.getPropName = function( propName ) {if ( !_.isActive ) return propName;if ( !isPropSupported(propName) ) return propName;return _.propNamespace[getDeviceType()] + propName;};function isPropSupported( propName ) {var isSupported = false;if ( propName.indexOf('margin') != -1 || propName.indexOf('Margin') != -1 ) propName = 'margin';if ( propName.indexOf('padding') != -1 || propName.indexOf('Padding') != -1 ) propName = 'padding';if ( propName.indexOf('align') != -1 || propName.indexOf('Align') != -1 ) propName = 'align';$.each(_.responsiveSupport, function(index, val) {isSupported = val.indexOf(propName) != -1;if ( isSupported ) return false;});return isSupported;}
function getDeviceType() {return topWindow.Wizard.Preview.Scale.mode;}
function Devices( settings ) {var _ = {deviceType: settings.deviceType,$contianer: settings.$contianer,deviceChangeCallback: settings.deviceChangeCallback};_.init = function() {_.$html = $(generateHtml());_.$contianer.append(_.$html);_.$html.find('[data-device-type]').on('click', function( event ) {event.preventDefault();_.setIcon($(this).data('device-type'));_.setPreview($(this).data('device-type'));if ( _.deviceChangeCallback ) _.deviceChangeCallback.call(this,$(this).data('device-type'));});_.setIcon(_.deviceType);};_.setIcon = function( deviceType ) {var $selectedDevice = _.$html.find('.devicesPreviewContent [data-device-type="'+deviceType+'"]');var $currentDevice = _.$html.find('.current-device');$selectedDevice.siblings().removeClass('active');$selectedDevice.addClass('active');$currentDevice.html($selectedDevice.find('.device-type').clone());$currentDevice.attr('data-device-type',deviceType);};_.setPreview = function( deviceType ) {$.each(topWindow.Wizard.Preview.Scale.$dButtons,function(index, $btn) {if ( $btn.data('device-type') == deviceType ) {topWindow.Wizard.Preview.Scale.deviceButtonsClick($btn);return false;}});};function generateHtml() {var html = '<div data-rel="s123DropDown" data-s123-drop-down-toggle="click">';html += '<a href="#" data-s123-drop-down-role="controller">';html += '<span class="current-device icon-container" style="margin-top: 0;">';html += '<i class="fa fa-desktop"></i>';html += '</span>';html += '</a>';html += '<ul class="devicesPreviewContent" data-s123-drop-down-role="dropdown">';html += '<li data-device-type="computer">';html += '<a href="#">';html += '<span class="device-type-icon icon-container">';html += '<i class="fa fa-desktop device-type"></i>';html += '</span>';html += '</a>';html += '</li>';html += '<li data-device-type="tablet">';html += '<a href="#">';html += '<span class="device-type-icon icon-container">';html += '<i class="fa fa-tablet device-type"></i>';html += '</span>';html += '</a>';html += '</li>';html += '<li data-device-type="mobile">';html += '<a href="#">';html += '<span class="device-type-icon icon-container">';html += '<i class="fa fa-mobile device-type"></i>';html += '</span>';html += '</a>';html += '</li>';html += '</ul>';html += '</div>';return html;}
_.init();return _;}
return _;}();